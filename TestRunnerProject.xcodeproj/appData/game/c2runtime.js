// Generated by Construct 2, the HTML5 game and app creator :: http://www.scirra.com
//////////////////////////////////////
// COCOONJS.JS                        //
//////////////////////////////////////

(function()
{
    // There should not be a CocoonJS object when this code is executed.
    // if (typeof window.CocoonJS !== 'undefined') throw("This is strange, a CocoonJS object already exists when trying to create it.");

    /**
    * The basic object for all the CocoonJS related specific APIs === extensions.
    * @namespace
    */
    CocoonJS = window.CocoonJS ? window.CocoonJS : {};

    CocoonJS.nativeExtensionObjectAvailable = typeof window.ext !== 'undefined';

    /**
    * This type represents a 2D size structure with horizontal and vertical values.
    * @namespace
    */
    CocoonJS.Size =
    {
        /**
        * The horizontal size value.
        */
        width : 0,

        /**
        * The vertical size value.
        */
        height : 0
    };

    /**
    * This utility function allows to create an object oriented like hierarchy between two functions using their prototypes.
    * This function adds a "superclass" and a "__super" attributes to the subclass and it's functions to reference the super class.
    * @param {function} subc The subclass function.
    * @param {function} superc The supercall function.
    */
    CocoonJS.extend = function(subc, superc) 
    {
        var subcp = subc.prototype;

        // Class pattern.
        var CocoonJSExtendHierarchyChainClass = function() {};
        CocoonJSExtendHierarchyChainClass.prototype = superc.prototype;

        subc.prototype = new CocoonJSExtendHierarchyChainClass();       // chain prototypes.
        subc.superclass = superc.prototype;
        subc.prototype.constructor = subc;

        // Reset constructor. See Object Oriented Javascript for an in-depth explanation of this.
        if (superc.prototype.constructor === Object.prototype.constructor) 
        {
            superc.prototype.constructor = superc;
        }

        // Check all the elements in the subclass prototype and add them to the chain object's prototype.
        for (var method in subcp) 
        {
            if (subcp.hasOwnProperty(method)) 
            {
                subc.prototype[method] = subcp[method];

                // // tenemos en super un metodo con igual nombre.
                // if ( superc.prototype[method]) 
                // {
                //     subc.prototype[method]= (function(fn, fnsuper) 
                //     {
                //         return function() 
                //         {
                //             var prevMethod= this.__super;

                //             this.__super= fnsuper;

                //             var retValue= fn.apply(
                //                     this,
                //                     Array.prototype.slice.call(arguments) );

                //             this.__super= prevMethod;

                //             return retValue;
                //         };
                //     })(subc.prototype[method], superc.prototype[method]);
                // }
            }
        }
    }


    /**
    * This function allows a call to the native extension object function reusing the same arguments object.
    * Why is interesting to use this function instead of calling the native object's function directly?
    * As the CocoonJS object functions expicitly receive parameters, if they are not present and the native call is direcly mapped,
    * undefined arguments are passed to the native side. Some native functions do not check the parameters validation
    * correctly (just check the number of parameters passed).
    * Another solution instead of using this function call is to correctly check if the parameters are valid (not undefined) to make the
    * call, but it takes more work than using this approach.
    * @static
    * @param {string} nativeExtensionObjectName The name of the native extension object name. The object that is a member of the 'ext' object.
    * @param {string} nativeFunctionName The name of the function to be called inside the native extension object.
    * @param {object} arguments The arguments object of the CocoonJS extension object function. It contains all the arguments passed to the CocoonJS extension object function and these are the ones that will be passed to the native call too.
    * @param {boolean} [async] A flag to indicate if the makeCall (false or undefined) or the makeCallAsync function should be used to perform the native call.
    * @returns Whatever the native function call returns.
    */
    CocoonJS.makeNativeExtensionObjectFunctionCall = function(nativeExtensionObjectName, nativeFunctionName, arguments, async)
    {
        if (CocoonJS.nativeExtensionObjectAvailable)
        {
            var argumentsArray = Array.prototype.slice.call(arguments);
            argumentsArray.unshift(nativeFunctionName);
            var nativeExtensionObject = ext[nativeExtensionObjectName];
            var makeCallFunction = async ? nativeExtensionObject.makeCallAsync : nativeExtensionObject.makeCall;
            var ret = makeCallFunction.apply(nativeExtensionObject, argumentsArray);
            var finalRet = ret;
            if (typeof ret === "string")
            {
                try
                {
                    finalRet = JSON.parse(ret);
                }
                catch(error)
                {
                }
            }
            return finalRet;
        }
    };

    /**
    * Returns an object retrieved from a path specified by a dot specified text path starting from a given base object.
    * @param {Object} baseObject The object to start from to find the object using the given text path.
    * @param {string} objectPath The path in the form of a text using the dot notation. i.e. "document.body"
    * For example:
    * var body = getObjectFromPath(window, "document.body");
    */
    CocoonJS.getObjectFromPath = function(baseObject, objectPath)
    {
        var parts = objectPath.split('.');
        var obj = baseObject;
        for (var i = 0, len = parts.length; i < len; ++i) 
        {
            obj[parts[i]] = obj[parts[i]] || undefined;
            obj = obj[parts[i]];
        }
        return obj;
     };

     /**
     * Finds a string inside a given array of strings by looking for a given substring. It can also
     * specify if the search must be performed taking care or not of the case sensitivity.
     * @param {Array} stringArray The array of strings in which to to look for the string.
     * @param {string} subString The substring to look for inside all the strings of the array.
     * @param {boolean} caseSensitive A flag to indicate if the search must be performed taking case of the 
     * case sensitiveness (true) or not (false).
     * @return {string} The string that has been found or null if the substring is not inside any of the string of the array.
     */
     CocoonJS.findStringInStringArrayThatIsIndexOf = function(stringArray, subString, caseSensitive)
     {
         var foundString = null;
         subString = caseSensitive ? subString : subString.toUpperCase();
         for (var i = 0; foundString == null && i < stringArray.length; i++)
         {
             foundString = caseSensitive ? stringArray[i] : stringArray[i].toUpperCase();
             foundString = foundString.indexOf(subString) >= 0 ? stringArray[i] : null; 
         }
         return foundString;
     };

    /**
    * A class that represents objects to handle events. Event handlers have always the same structure:
    * A addEventListener and a removeEventListener functions.
    * Both functions receive a callback function that will be added or removed. All the added callback
    * functions will be called when the event takes place.
    * @constructor
    * @param {string} nativeExtensionObjectName
    * @param {string} cocoonJSExtensionObjectName
    * @param {string} nativeEventName
    * @param {number} chainFunction An optional function used to preprocess the listener callbacks
    */
    CocoonJS.EventHandler = function(nativeExtensionObjectName, cocoonJSExtensionObjectName, nativeEventName, chainFunction)
    {
        this.listeners = [];
        this.listenersOnce = [];
        this.chainFunction = chainFunction;

        /**
        * Adds a callback function so it can be called when the event takes place.
        * @param {function} listener The callback function to be added to the event handler object. See the referenced Listener function documentation for more detail in each event handler object's documentation.
        */
        this.addEventListener = function(listener)
        {
            if (chainFunction) {
                var f = function() {chainFunction.call(this,arguments.callee.sourceListener,Array.prototype.slice.call(arguments)); };
                listener.CocoonJSEventHandlerChainFunction = f;
                f.sourceListener = listener;
                listener = f;
            }

            var cocoonJSExtensionObject = CocoonJS.getObjectFromPath(CocoonJS, cocoonJSExtensionObjectName);
            if (cocoonJSExtensionObject && cocoonJSExtensionObject.nativeExtensionObjectAvailable)
            {
                ext[nativeExtensionObjectName].addEventListener(nativeEventName, listener);
            }
            else
            {
                var indexOfListener = this.listeners.indexOf(listener);
                if (indexOfListener < 0)
                {
                    this.listeners.push(listener);
                }
            }
        };

        this.addEventListenerOnce = function(listener)
        {
            if (chainFunction) {
                var f = function() { chainFunction(arguments.callee.sourceListener,Array.prototype.slice.call(arguments)); };
                f.sourceListener = listener;
                listener = f;
            }

            var cocoonJSExtensionObject = CocoonJS.getObjectFromPath(CocoonJS, cocoonJSExtensionObjectName);
            if (cocoonJSExtensionObject.nativeExtensionObjectAvailable)
            {
                ext[nativeExtensionObjectName].addEventListenerOnce(nativeEventName, listener);
            }
            else
            {
                var indexOfListener = this.listeners.indexOf(listener);
                if (indexOfListener < 0)
                {
                    this.listenersOnce.push(listener);
                }
            }
        };

        /**
         * Removes a callback function that was added to the event handler so it won't be called when the event takes place.
         * @param {function} listener The callback function to be removed from the event handler object. See the referenced Listener function documentation for more detail in each event handler object's documentation.
         */
        this.removeEventListener = function (listener) {

            if (chainFunction) {
                listener = listener.CocoonJSEventHandlerChainFunction;
                delete listener.CocoonJSEventHandlerChainFunction;
            }

            var cocoonJSExtensionObject = CocoonJS.getObjectFromPath(CocoonJS, cocoonJSExtensionObjectName);
            if (cocoonJSExtensionObject.nativeExtensionObjectAvailable) {
                ext[nativeExtensionObjectName].removeEventListener(nativeEventName, listener);
            }
            else {
                var indexOfListener = this.listeners.indexOf(listener);
                if (indexOfListener >= 0) {
                    this.listeners.splice(indexOfListener, 1);
                }
            }
        };

        this.notifyEventListeners = function() {
            var cocoonJSExtensionObject = CocoonJS.getObjectFromPath(CocoonJS, cocoonJSExtensionObjectName);
            if (cocoonJSExtensionObject && cocoonJSExtensionObject.nativeExtensionObjectAvailable) {
                ext[nativeExtensionObjectName].notifyEventListeners(nativeEventName);
            } else {

                var argumentsArray= Array.prototype.slice.call(arguments);
                var listeners =     Array.prototype.slice.call(this.listeners);
                var listenersOnce = Array.prototype.slice.call(this.listenersOnce);
                var _this = this;
                // Notify listeners after a while ;) === do not block this thread.
                setTimeout(function() {
                    for (var i = 0; i < listeners.length; i++) {
                        listeners[i].apply(_this, argumentsArray);
                    }
                    for (var i = 0; i < listenersOnce.length; i++) {
                        listenersOnce[i].apply(_this, argumentsArray);
                    }
                }, 0);

                _this.listenersOnce= [];
            }
        };
        return this;
    };

    /**
    * A simple timer class. Update it every loop iteration and get values from accumulated time to elapsed time in seconds or milliseconds.
    */
    CocoonJS.Timer = function() {
        this.reset();
        return this;
    };

    CocoonJS.Timer.prototype = {
        currentTimeInMillis : 0,
        lastTimeInMillis : 0,
        elapsedTimeInMillis : 0,
        elapsedTimeInSeconds : 0,
        accumTimeInMillis : 0,

        /**
        Resets the timer to 0.
        */
        reset : function() {
            this.currentTimeInMillis = this.lastTimeInMillis = new Date().getTime();
            this.accumTimeInMillis = this.elapsedTimeInMillis = this.elapsedTimeInSeconds = 0;
        },

        /**
        Updates the timer calculating the elapsed time between update calls.
        */
        update : function() {
            this.currentTimeInMillis = new Date().getTime();
            this.elapsedTimeInMillis = this.currentTimeInMillis - this.lastTimeInMillis;
            this.elapsedTimeInSeconds = this.elapsedTimeInMillis / 1000.0;
            this.lastTimeInMillis = this.currentTimeInMillis;
            this.accumTimeInMillis += this.elapsedTimeInMillis;
        }
    };

    /**
    * A class that represents a Frames Per Second counter. It relied in CocoonJS.Timer to do the time calculation.
    */
    CocoonJS.FPSCounter = function() {
        this.timer = new CocoonJS.Timer();
        this.reset();
        return this;
    };

    CocoonJS.Timer.prototype = {
        timer : 0,
        fps : 0,
        averageFPS : 0,

        reset : function()
        {
            this.timer.reset();
            this.fps = 0;
            this.averageFPS = 0;
        },

        update : function()
        {
            this.timer.update();
            this.fps++;
            if (this.timer.accumTimeInMillis >= 1000) {
                this.averageFPS = this.fps;
                this.fps = 0;
                this.timer.reset();
            }
        }
    };

    // CocoonJS.FindAllNativeBindingsInCocoonJSExtensionObject = function(cocoonJSExtensionObject, nativeFunctionBindingCallback, nativeEventBindingCallback)
    // {
    //     for (var cocoonJSExtensionObjectAttributeName in cocoonJSExtensionObject)
    //     {
    //         var cocoonJSExtensionObjectAttribute = cocoonJSExtensionObject[cocoonJSExtensionObjectAttributeName];

    //         // Function
    //         if (typeof cocoonJSExtensionObjectAttribute === 'function' && typeof cocoonJSExtensionObjectAttribute.nativeFunctionName !== 'undefined')
    //         {
    //             var nativeFunctionName = cocoonJSExtensionObjectAttribute.nativeFunctionName;
    //             nativeFunctionBindingCallback(cocoonJSExtensionObjectAttributeName, nativeFunctionName);
    //         }
    //         // Event object
    //         else if (typeof cocoonJSExtensionObjectAttribute === 'object' && cocoonJSExtensionObjectAttribute !== null && typeof cocoonJSExtensionObjectAttribute.nativeEventName !== 'undefined')
    //         {
    //             var nativeEventName = cocoonJSExtensionObjectAttribute.nativeEventName;
    //             nativeEventBindingCallback(cocoonJSExtensionObjectAttributeName, nativeEventName);
    //         }
    //     }
    // }

    /**
    This function looks for a CocoonJS extension object that is bound to the given native ext object name.
    @returns The CocoonJS extension object that corresponds to the give native extension object name or null if it cannot be found.
    */
    // CocoonJS.GetCocoonJSExtensionObjectForNativeExtensionObjectName = function(nativeExtensionObjectName)
    // {
    //     var cocoonJSExtensionObject = null;
    //     // Look in the CocoonJS object and for every object that is a CocoonJS.Extension check if it's nativeExtensionObjectName matches to the one passed as argument. If so, create an object that will represent it's documentation for the native ext object.
    //     for (var cocoonJSAttributeName in CocoonJS)
    //     {
    //         var cocoonJSAttribute = CocoonJS[cocoonJSAttributeName];
    //         if (typeof cocoonJSAttribute === 'object' && cocoonJSAttribute instanceof CocoonJS.Extension && cocoonJSAttribute.nativeExtensionObjectName === nativeExtensionObjectName)
    //         {
    //             // We have found the CocoonJS object that represents the native ext extension object name. 
    //             cocoonJSExtensionObject = cocoonJSAttribute;
    //             break;
    //         }
    //     }
    //     return cocoonJSExtensionObject;
    // };

    /**
    This function adds functions to a CocoonJS extension object in order to bind them to the native makeCall function calls of the ext object.

    @param extensionObject The reference to the CocoonJS extension object where to add the new functions bound to the ext object makeCall functions calls.

    @param nativeFunctionsConfiguration An array of objects with the following structure:

        { nativeFunctionName : "" [, functionName : "", isAsync : true/false] }

        - nativeFunctionName: Specifies the name of the function inside the ext object makeCall function call that will be bound.
        - functionName: An optional attribute that allows to specify the name of the function to be added to the CocoonJS extension object. If is not present, the name of the function will be the same
        as the nativeFunctionName.
        - isAsync: An optional attribute that allows to specify if the call should be performed using makeCall (false or missing) or makeCallAsync (true).
        - alternativeFunction: An optional attribute that allows to specify an alternative function that will be called internally when this function is called. This attribute
        allows for adding new functionalities like for example adding methods 

    @returns The CocoonJS extension object.
    */
    // CocoonJS.AddNativeFunctionBindingsToExtensionObject = function(extensionObject, nativeFunctionsConfiguration)
    // {
    //     if (typeof extensionObject === 'undefined' || extensionObject === null) throw("The passed extension object be a valid object.");
    //     if (typeof nativeFunctionsConfiguration === 'undefined' || nativeFunctionsConfiguration === null) throw("The passed native functions configuration array must be a valid object.");

    //     for (var i = 0; i < nativeFunctionsConfiguration.length; i++)
    //     {
    //         if (typeof nativeFunctionsConfiguration[i].nativeFunctionName === 'undefined') throw("The 'nativeFunctionName' attribute in the native function configuration object at index '" + i + "' in the native function configuration array cannot be undefined.");
    //         var nativeFunctionName = nativeFunctionsConfiguration[i].nativeFunctionName;
    //         var functionName = typeof nativeFunctionsConfiguration[i].functionName !== 'undefined' ? nativeFunctionsConfiguration[i].functionName : nativeFunctionName;
    //         var makeCallFunction = null;
    //         makeCallFunction = typeof nativeFunctionsConfiguration[i].isAsync !== 'undefined' && nativeFunctionsConfiguration[i].isAsync ? extensionObject.nativeExtensionObject.makeCallAsync : extensionObject.nativeExtensionObject.makeCall;
    //         // Add the new function to the CocoonJS extension object
    //         extensionObject[functionName] = function()
    //         {
    //             // Convert the arguments object to an array
    //             var arguments = Array.prototype.slice.call(arguments);
    //             // Add the native function name as the first parameter
    //             arguments.unshift(nativeFunctionName);
    //             // Make the native ext object call
    //             var result = makeCallFunction.apply(extensionObject.nativeExtensionObject, arguments);
    //             return result;
    //         }
    //         // Add a property to the newly added function to store the name of the original function.
    //         extensionObject[functionName].nativeFunctionName = nativeFunctionName;
    //     }
    //     return extensionObject;
    // };

    /**
    This function adds objects to a CocoonJS extension object to allow event listener handling (add and remove) bound to the native ext object event listener handling.

    @param extensionObject The reference to the CocoonJS extension object where to add the new objects bound to the ext object event listener handling.

    @param nativeEventsConfiguration An array of objects with the following structure:

        { nativeEventName : "" [, eventObjectName : ""] }

        - nativeEventName: Specifies the event in the native ext object to be bound.
        - eventObjectName: An optional attribute that allows to specify the name of the object to be added to the CocoonJS extension object. If is not present, the name of the function will be the same
        as the nativeEventName.
        - alternativeAddEventListenerFunction:
        - alternativeRemoveEventListenerFunction:

    @returns The CocoonJS extension object.
    */
    // CocoonJS.AddNativeEventBindingsToExtensionObject = function(extensionObject, nativeEventsConfiguration)
    // {
    //     if (typeof extensionObject === 'undefined' || extensionObject === null) throw("The passed extension object be a valid object.");
    //     if (typeof nativeEventsConfiguration === 'undefined' || nativeEventsConfiguration === null) throw("The passed native events configuration array must be a valid object.");

    //     for (var i = 0; i < nativeEventsConfiguration.length; i++)
    //     {
    //         if (typeof nativeEventsConfiguration[i].nativeEventName === 'undefined') throw("The 'nativeEventName' attribute in the native event configuration object at index '" + i + "' in the native event configuration array cannot be undefined.");
    //         var nativeEventName = nativeEventsConfiguration[i].nativeEventName;
    //         var eventObjectName = typeof nativeEventsConfiguration[i].eventObjectName !== 'undefined' ? nativeEventsConfiguration[i].eventObjectName : nativeEventName;
    //         // Anonymous function call so each variable in the loop is used in the event listener handling function bindings.
    //         (function(nativeEventName, eventObjectName)
    //         {
    //             extensionObject[eventObjectName] =
    //             {
    //                 // Store the native event name
    //                 nativeEventName : nativeEventName,
    //                 // Create the event listener management functions bound to the native counterparts
    //                 addEventListener : function(callback)
    //                 {
    //                     extensionObject.nativeExtensionObject.addEventListener(nativeEventName, callback);
    //                 },
    //                 removeEventListener : function(callback)
    //                 {
    //                     extensionObject.nativeExtensionObject.removeEventListener(nativeEventName, callback);
    //                 }
    //                 // ,
    //                 // removeAllEventListeners : function()
    //                 // {

    //                 // }
    //             };
    //         })(nativeEventName, eventObjectName);
    //     }
    //     return extensionObject;
    // };

    /**
    The function object constructor function all the CocoonJS extensions can use to instantiate the CocoonJS extension object and add all the functionality needed bound to the native ext object.

    @param nativeExtensionObject The reference to the ext object extension object.

    @param nativeFunctionsConfiguration See CocoonJS.AddNativeFunctionBindingsToExtensionObject function's documentation for more details.

    @param nativeEventsConfiguration See CocoonJS.AddNativeEventBindingsToExtensionObject function's documentation for more details.

    @returns The new CocoonJS extension object.
    */
    // CocoonJS.Extension = function(nativeExtensionObjectName, nativeFunctionsConfiguration, nativeEventsConfiguration)
    // {
    //     if (typeof nativeExtensionObjectName === 'undefined' || nativeExtensionObjectName === null) throw("The native extension object name cannot be null");

    //     if (window.ext[nativeExtensionObjectName] === 'undefined') throw("The given native extension object name '" + nativeExtensionObjectName + "' is incorrect or the native extension object is undefined.");

    //     var nativeExtensionObject = window.ext[nativeExtensionObjectName];

    //     // Store a reference to the native extension object and to it's name
    //     this.nativeExtensionObject = nativeExtensionObject;
    //     this.nativeExtensionObjectName = nativeExtensionObjectName;

    //     // If native function configuration is passed, use it to add some functions to the new extension object.
    //     if (typeof nativeFunctionsConfiguration !== 'undefined')
    //     {
    //         CocoonJS.AddNativeFunctionBindingsToExtensionObject(this, nativeFunctionsConfiguration);
    //     }

    //     // If native event configuration is passed, use it to add some event objects to the new extension object.
    //     if (typeof nativeEventsConfiguration !== 'undefined')
    //     {
    //         CocoonJS.AddNativeEventBindingsToExtensionObject(this, nativeEventsConfiguration);
    //     }

    //     return this;
    // };   

})();

//////////////////////////////////////
// COCOONJS_APP.JS                    //
//////////////////////////////////////

(function()
{
    // The CocoonJS must exist before creating the extension.
    if (typeof window.CocoonJS === 'undefined' || window.CocoonJS === null) throw("The CocoonJS object must exist and be valid before creating any extension object.");

    /**
    * This namespace represents all the basic functionalities available in the CocoonJS extension API.
    * @namespace
    */
    CocoonJS.App = CocoonJS.App ? CocoonJS.App : {};

    CocoonJS.App.nativeExtensionObjectAvailable = CocoonJS.nativeExtensionObjectAvailable && typeof window.ext.IDTK_APP !== 'undefined';

    CocoonJS.App.FPSLayout =
    {
        TOP_LEFT : 'top-left',
        TOP_RIGHT : 'top-right',
        BOTTOM_LEFT : 'bottom-left',
        BOTTOM_RIGHT : 'bottom-right'
    };

    /**
    * Contains all the possible values to specify the input keyboard type to be used when introducing text.
    * @namespace
    */
    CocoonJS.App.KeyboardType =
    {
        /**
        * Represents a generic text input keyboard.
        */
        TEXT : "text",

        /**
        * Represents a number like input keyboard.
        */
        NUMBER : "num",

        /**
        * Represents a phone like input keyboard.
        */
        PHONE : "phone",

        /**
        * Represents an email like input keyboard.
        */
        EMAIL : "email",

        /**
        * Represents an URL like input keyboard.
        */
        URL : "url"
    };

    /**
    * The storage types to be used with file system related operations.
    * @namespace
    */
    CocoonJS.App.StorageType = 
    {
        /**
        * Represents the application storage. The application storage is the place where all the resources that come with the application are stored.
        */
        APP_STORAGE : "APP_STORAGE", 

        /**
        * Represents the internal storage. The internal storage is a different storage space that the application storage and only the data that the application has stored
        * in it will be in this storage. It is internal to the platform/device.
        */
        INTERNAL_STORAGE : "INTERNAL_STORAGE",

        /**
        * Represents an external storage. The external storage is similar to the internal storage in the sense that it only contains information that the application has written
        * in it but it represents an external storage device like a SD-CARD. If there is no exrernal storage, it will represent the same as the internal storage.
        */
        EXTERNAL_STORAGE : "EXTERNAL_STORAGE",

        /**
        * Represents the temporal storage. Same as the internal and external storage spaces in the sense that it only contains information that the application has written
        * in it but the main difference is that the information in this storage may dissapear without notice.
        */
        TEMPORARY_STORAGE : "TEMPORARY_STORAGE"    
    };

    /**
    * Makes a forward call of some javascript code to be executed in a different environment (i.e. from CocoonJS to the WebView and viceversa).
    * It waits until the code is executed and the result of it is returned.
    * @static
    * @param {string} javaScriptCode Some JavaScript code in a string to be forwarded and executed in a different JavaScript environment (i.e. from CocoonJS to the WebView and viceversa).
    * @return The result of the execution of the passed JavaScript code in the different JavaScript environment.
    */
    CocoonJS.App.forward = function(javaScriptCode)
    {
        if (CocoonJS.App.nativeExtensionObjectAvailable)
        {
            return CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_APP", "forward", arguments);
        }
        else if (!navigator.isCocoonJS)
        {
            if (window.name == 'CocoonJS_App_ForCocoonJS_WebViewIFrame')
            {
                window.parent.eval(javaScriptCode);
            }
            else
            {
                window.parent.frames['CocoonJS_App_ForCocoonJS_WebViewIFrame'].window.eval(javaScriptCode);
            }
        }
    };

    /**
    * Makes a forward call of some javascript code to be executed in a different environment (i.e. from CocoonJS to the WebView and viceversa).
    * It is asyncrhonous so it does not wait until the code is executed and the result of it is returned. Instead, it calls a callback function when the execution has finished to pass the result.
    * @static
    * @param {string} javaScriptCode Some JavaScript code in a string to be forwarded and executed in a different JavaScript environment (i.e. from CocoonJS to the WebView and viceversa).
    * @param {function} [returnCallback] A function callback that will be called when the passed JavaScript code is executed in a different thread to pass the result of the execution in the different JavaScript environment.
    */
    CocoonJS.App.forwardAsync = function(javaScriptCode, returnCallback)
    {
        if (CocoonJS.App.nativeExtensionObjectAvailable)
        {
            if (typeof returnCallback !== 'undefined')
            {
                return ext.IDTK_APP.makeCallAsync("forward", javaScriptCode, returnCallback);
            }
            else
            {
                return ext.IDTK_APP.makeCallAsync("forward", javaScriptCode);
            }
        }
        else if (!navigator.isCocoonJS)
        {
            if (window.name == 'CocoonJS_App_ForCocoonJS_WebViewIFrame')
            {
                window.parent.eval(javaScriptCode);
            }
            else
            {
                window.parent.frames['CocoonJS_App_ForCocoonJS_WebViewIFrame'].window.eval(javaScriptCode);
            }
        }
    };

    /**
    * Pops up a text dialog so the user can introduce some text and the application can get it back. It is the first approach CocoonJS has taken to be able to introduce 
    * text input in a easy way. The dialog execution events are passed to the application through the {@link CocoonJS.App.onTextDialogFinished} and the {@link CocoonJS.App.onTextDialogCancelled} event objects.
    * @param {string} [title] Default value is "". The title to be displayed in the dialog.
    * @param {string} [message] Default value is "". The message to be displayed in the dialog, next to the text input field.
    * @param {string} [text] Default value is "". The initial text to be introduced in the text input field.
    * @param {CocoonJS.App.KeyboardType} [keyboardType] Default value is {@link CocoonJS.App.KeyboardType.TEXT}. The keyboard type to be used when the text has to be introduced.
    * @param {string} [cancelButtonText] Default value is "". The text to be displayed in the cancel button of the dialog.
    * @param {string} [okButtonText] Default value is "". The text to be displayed in the ok button of the dialog.
    * @see CocoonJS.App.onTextDialogFinished
    * @see CocoonJS.App.onTextDialogCancelled
    */
    CocoonJS.App.showTextDialog = function(title, message, text, keyboardType, cancelButtonText, okButtonText)
    {
        if (CocoonJS.App.nativeExtensionObjectAvailable)
        {
            return CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_APP", "showTextDialog", arguments, true);
        }
        else if (!navigator.isCocoonJS)
        {
            if (!message)
            {
                message = "";
            }
            if (!text)
            {
                text = "";
            }
            var result = prompt(message, text);
            var eventObject = result ? CocoonJS.App.onTextDialogFinished : CocoonJS.App.onTextDialogCancelled;
            eventObject.notifyEventListeners(result);
        }
    };

    /**
    * Pops up a message dialog so the user can decide between a yes or no like confirmation. The message box execution events are passed to the application through the {@link CocoonJS.App.onMessageBoxConfirmed} and the {@link CocoonJS.App.onMessageBoxDenied} event objects.
    * @param {string} [title] Default value is "". The title to be displayed in the dialog.
    * @param {string} [message] Default value is "". The message to be displayed in the dialog, next to the text input field.
    * @param {string} [confirmButtonText] Default value is "Yes". The text to be displayed for the confirm button.
    * @param {string} [denyButtonText] Default value is "No". The text to be displayed for the deny button.
    * @see CocoonJS.App.onMessageBoxConfirmed
    * @see CocoonJS.App.onMessageBoxDenied
    */
    CocoonJS.App.showMessageBox = function(title, message, confirmButtonText, denyButtonText)
    {
        if (CocoonJS.App.nativeExtensionObjectAvailable)
        {
            return CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_APP", "showMessageBox", arguments, true);
        }
        else if (!navigator.isCocoonJS)
        {
            if (!message)
            {
                message = "";
            }
            var result = confirm(message);
            var eventObject = result ? CocoonJS.App.onMessageBoxConfirmed : CocoonJS.App.onMessageBoxDenied;
            eventObject.notifyEventListeners();
        }
    };

    /**
    * It allows to load a new JavaScript/HTML5 resource that can be loaded either locally (inside the platform/device storage) or using a remote URL.
    * @param {string} path A path to a resource stored in the platform or in a URL to a remote resource.
    * @param {CocoonJS.App.StorageType} [storageType] If the path argument represents a locally stored resource, the developer can specify the storage where it is stored. If no value is passes, the {@link CocoonJS.App.StorageType.APP_STORAGE} value is used by default.
    */
    CocoonJS.App.load = function(path, storageType)
    {
        if (CocoonJS.App.nativeExtensionObjectAvailable)
        {
            return CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_APP", "loadPath", arguments);
        }
        else if (!navigator.isCocoonJS)
        {
            var xhr = new XMLHttpRequest();

            xhr.onreadystatechange = function(event) {
                if (xhr.readyState === 4)
                {
                    if (xhr.status === 200)
                    {
                        // TODO: As window load event is not being called (WHY???), I have decided to call the listeners directly
                        // var callback= function(event){
                        //     window.removeEventListener("load", callback);
                            var jsCode;
                            // If there is no webview, it means we are in the webview, so notify the CocoonJS environment
                            if (!CocoonJS.App.EmulatedWebViewIFrame)
                            {
                                jsCode = "CocoonJS.App.onLoadInTheWebViewSucceed.notifyEventListeners('" + path + "');";
                            }
                            // If there is a webview, it means we are in CocoonJS, so notify the webview environment
                            else 
                            {
                                jsCode = "CocoonJS.App.onLoadInCocoonJSSucceed.notifyEventListeners('" + path + "');";
                            }
                            CocoonJS.App.forwardAsync(jsCode);
                        // };
                        // window.addEventListener("load", callback);
                        window.location.href = path;
                    }
                    else if (xhr.status === 404)
                    {
                        this.onreadystatechange = null;
                            var jsCode;
                            // If there is no webview, it means we are in the webview, so notify the CocoonJS environment
                            if (!CocoonJS.App.EmulatedWebViewIFrame)
                            {
                                jsCode = "CocoonJS.App.onLoadInTheWebViewFailed.notifyEventListeners('" + path + "');";
                            }
                            // If there is a webview, it means we are in CocoonJS, so notify the webview environment
                            else 
                            {
                                jsCode = "CocoonJS.App.onLoadInCocoonJSFailed.notifyEventListeners('" + path + "');";
                            }
                            CocoonJS.App.forwardAsync(jsCode);
                    }
                }
            };
            xhr.open("GET", path, true);
            xhr.send();
        }
    };

    /**
    * Opens a given URL using a system service that is able to open it. For example, open a HTTP URL using the system WebBrowser.
    * @param {string} url The URL to be opened by a system service.
    */
    CocoonJS.App.openURL = function(url)
    {
        if (CocoonJS.App.nativeExtensionObjectAvailable)
        {
            return CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_APP", "openURL", arguments, true);
        }
        else if (!navigator.isCocoonJS)
        {
            window.open(url, '_blank');
        }
    }

    /**
    * Forces the app to be finished.
    */
    CocoonJS.App.forceToFinish = function()
    {
        if (CocoonJS.App.nativeExtensionObjectAvailable)
        {
            return CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_APP", "forceToFinish", arguments);
        }
        else if (!navigator.isCocoonJS)
        {
            window.close();
        }
    }

    /**
    * Creates a canvas element that is automatically resized to the screen size. When the app is being executed
    * inside CocoonJS. This canvas is optimized for rendering so it is higly recommended to use it if it fits
    * your app needs. If your app uses one canvas as the main canvas where all other canvases and images are displayed, Ludei recommends to 
    * call this function in order to create this main canvas. A usual 2x performance gain is achieved by doing so
    * depending on the device and the graphics card driver. 
    * @return The canvas object that should be used as the main canvas and that is resized to the screen resolution.
    */
    CocoonJS.App.createScreenCanvas = function()
    {
        var screenCanvas;
        if (navigator.isCocoonJS)
        {
            screenCanvas = document.createElement("screencanvas");
        }
        else if (!navigator.isCocoonJS)
        {
            screenCanvas = document.createElement("canvas");
            screenCanvas.width = window.innerWidth;
            screenCanvas.height = window.innerHeight;
        }
        return screenCanvas;
    };

    /**
    * Disables the touch events in the CocoonJS environment.
    */
    CocoonJS.App.disableTouchInCocoonJS = function()
    {
        if (CocoonJS.App.nativeExtensionObjectAvailable)
        {
            window.ext.IDTK_APP.makeCall("disableTouchLayer", "CocoonJSView");
        }
    };

    /**
    * Enables the touch events in the CocoonJS environment.
    */
    CocoonJS.App.enableTouchInCocoonJS = function()
    {
        if (CocoonJS.App.nativeExtensionObjectAvailable)
        {
            window.ext.IDTK_APP.makeCall("enableTouchLayer", "CocoonJSView");
        }
    };

    /**
    * Disables the touch events in the WebView environment.
    */
    CocoonJS.App.disableTouchInTheWebView = function()
    {
        if (CocoonJS.App.nativeExtensionObjectAvailable)
        {
            window.ext.IDTK_APP.makeCall("disableTouchLayer", "WebView");
        }
    };

    /**
    * Enables the touch events in the WebView environment.
    */
    CocoonJS.App.enableTouchInTheWebView = function()
    {
        if (CocoonJS.App.nativeExtensionObjectAvailable)
        {
            window.ext.IDTK_APP.makeCall("enableTouchLayer", "WebView");
        }
    };

    /**
    * Setups the update interval in seconds (1 second / X frames) to receive the accelerometer updates.
    * It defines the rate at which the devicemotion events are updated.
    * @param {number} updateIntervalInSeconds The update interval in seconds to be set.
    */
    CocoonJS.App.setAccelerometerUpdateIntervalInSeconds = function(updateIntervalInSeconds)
    {
        if (CocoonJS.App.nativeExtensionObjectAvailable)
        {
            return window.ext.IDTK_APP.makeCall("setAccelerometerUpdateIntervalInSeconds", updateIntervalInSeconds);
        }
    };

    /**
    * Returns the update interval in seconds that is currently set for accelerometer related events.
    * @return The update interval in seconds that is currently set for accelerometer related events.
    */
    CocoonJS.App.getAccelerometerUpdateIntervalInSeconds = function()
    {
        if (CocoonJS.App.nativeExtensionObjectAvailable)
        {
            return window.ext.IDTK_APP.makeCall("getAccelerometerUpdateIntervalInSeconds");
        }
    };

    /**
    * Setups the update interval in seconds (1 second / X frames) to receive the gyroscope updates.
    * It defines the rate at which the devicemotion and deviceorientation events are updated.
    * @param {number} updateIntervalInSeconds The update interval in seconds to be set.
    */
    CocoonJS.App.setGyroscopeUpdateIntervalInSeconds = function(updateIntervalInSeconds)
    {
        if (CocoonJS.App.nativeExtensionObjectAvailable)
        {
            return window.ext.IDTK_APP.makeCall("setGyroscopeUpdateIntervalInSeconds", updateIntervalInSeconds);
        }
    };

    /**
    * Returns the update interval in seconds that is currently set for gyroscope related events.
    * @return The update interval in seconds that is currently set for gyroscope related events.
    */
    CocoonJS.App.getGyroscopeUpdateIntervalInSeconds = function()
    {
        if (CocoonJS.App.nativeExtensionObjectAvailable)
        {
            window.ext.IDTK_APP.makeCall("getGyroscopeUpdateIntervalInSeconds");
        }
    };

    /**
    * FOR DOCUMENTATION PURPOSE ONLY! The documentation of the function callback for the {@link CocoonJS.App.onTextDialogFinished} event calls.
    * @name OnTextDialogFinishedListener
    * @function
    * @static
    * @memberOf CocoonJS.App
    * @param {string} text The text that was introduced in the text dialog when it was finished.
    */

    /**
    * This {@link CocoonJS.EventHandler} object allows listening to events called when the text dialog is finished by accepting it's content.
    * The callback function's documentation is represented by {@link CocoonJS.App.OnTextDialogFinishedListener}
    * @static
    */
    CocoonJS.App.onTextDialogFinished = new CocoonJS.EventHandler("IDTK_APP", "App", "ontextdialogfinish");

    /**
    * This {@link CocoonJS.EventHandler} object allows listening to events called when the text dialog is finished by dismissing it's content.
    * The callback function does not receive any parameter.
    * @static
    */
    CocoonJS.App.onTextDialogCancelled = new CocoonJS.EventHandler("IDTK_APP", "App", "ontextdialogcancel");

    /**
    * This {@link CocoonJS.EventHandler} object allows listening to events called when the text dialog is finished by accepting it's content.
    * The callback function does not receive any parameter.
    * @static
    */
    CocoonJS.App.onMessageBoxConfirmed = new CocoonJS.EventHandler("IDTK_APP", "App", "onmessageboxconfirmed");

    /**
    * This {@link CocoonJS.EventHandler} object allows listening to events called when the text dialog is finished by dismissing it's content.
    * The callback function does not receive any parameter.
    * @static
    */
    CocoonJS.App.onMessageBoxDenied = new CocoonJS.EventHandler("IDTK_APP", "App", "onmessageboxdenied");

    /**
    * This {@link CocoonJS.EventHandler} object allows listening to events called when the application is suspended.
    * The callback function does not receive any parameter.
    * @static
    */
    CocoonJS.App.onSuspended = new CocoonJS.EventHandler("IDTK_APP", "App", "onsuspended");

    /**
    * This {@link CocoonJS.EventHandler} object allows listening to events called when the application is activated.
    * The callback function does not receive any parameter.
    * @static
    */
    CocoonJS.App.onActivated = new CocoonJS.EventHandler("IDTK_APP", "App", "onactivated");
    
})();

//////////////////////////////////////
// COCOONJS_APP_FORCOCOONJS.JS        //
//////////////////////////////////////

(function()
{
    if (typeof window.CocoonJS === 'undefined' || window.CocoonJS === null) throw("The CocoonJS object must exist and be valid before adding more functionalities to an extension.");
    if (typeof window.CocoonJS.App === 'undefined' || window.CocoonJS.App === null) throw("The CocoonJS.App object must exist and be valid before adding more functionalities to it.");

    if (!CocoonJS.App.nativeExtensionObjectAvailable)
    {
        (function createWebView() { 
            CocoonJS.App.EmulatedWebView = document.createElement('div'); 
            CocoonJS.App.EmulatedWebView.setAttribute('id', 'CocoonJS_App_ForCocoonJS_WebViewDiv'); 
            CocoonJS.App.EmulatedWebView.style.width = 0; 
            CocoonJS.App.EmulatedWebView.style.height = 0; 
            CocoonJS.App.EmulatedWebView.style.position = "absolute"; 
            CocoonJS.App.EmulatedWebView.style.left = 0; 
            CocoonJS.App.EmulatedWebView.style.top = 0;
            CocoonJS.App.EmulatedWebView.style.backgroundColor = 'transparent';
            CocoonJS.App.EmulatedWebView.style.border = "0px solid #000"; 
            CocoonJS.App.EmulatedWebViewIFrame = document.createElement("IFRAME"); 
            CocoonJS.App.EmulatedWebViewIFrame.setAttribute('id', 'CocoonJS_App_ForCocoonJS_WebViewIFrame');
            CocoonJS.App.EmulatedWebViewIFrame.setAttribute('name', 'CocoonJS_App_ForCocoonJS_WebViewIFrame');
            CocoonJS.App.EmulatedWebViewIFrame.style.width = 0; 
            CocoonJS.App.EmulatedWebViewIFrame.style.height = 0; 
            CocoonJS.App.EmulatedWebViewIFrame.frameBorder = 0;
            CocoonJS.App.EmulatedWebViewIFrame.allowtransparency = true;
            CocoonJS.App.EmulatedWebView.appendChild(CocoonJS.App.EmulatedWebViewIFrame);
            document.body.appendChild(CocoonJS.App.EmulatedWebView);
        })(); 
    }

    /**
    * Pauses the CocoonJS JavaScript execution loop.
    */
    CocoonJS.App.pause = function()
    {
        if (CocoonJS.App.nativeExtensionObjectAvailable)
        {
            return CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_APP", "pause", arguments);
        }
    };

    /**
    * Resumes the CocoonJS JavaScript execution loop.
    */
    CocoonJS.App.resume = function()
    {
        if (CocoonJS.App.nativeExtensionObjectAvailable)
        {
            return CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_APP", "resume", arguments);
        }
    };

    /**
    * Loads a resource in the WebView environment from the CocoonJS environment.
    * @param {string} path The path to the resource. It can be a remote URL or a path to a local file.
    * @param {CocoonJS.App.StorageType} [storageType] An optional parameter to specify at which storage in the device the file path is stored. By default, APP_STORAGE is used.
    * @see CocoonJS.App.load
    * @see CocoonJS.App.onLoadInTheWebViewSucceed
    * @see CocoonJS.App.onLoadInTheWebViewFailed
    */
    CocoonJS.App.loadInTheWebView = function(path, storageType)
    {
        if (CocoonJS.App.nativeExtensionObjectAvailable)
        {
            // TODO: All this code should be changed to a simple call makeNativeExtensionObjectFunctionCall when the native argument control is improved.
            var javaScriptCodeToForward = "ext.IDTK_APP.makeCall('loadPath'";
            if (typeof path !== 'undefined')
            {
                javaScriptCodeToForward += ", '" + path + "'";
                if (typeof storageType !== 'undefined')
                {
                    javaScriptCodeToForward += ", '" + storageType + "'";
                }
            }
            javaScriptCodeToForward += ");";

            return CocoonJS.App.forwardAsync(javaScriptCodeToForward);
        }
        else if (!navigator.isCocoonJS)
        {
            var xhr = new XMLHttpRequest();

            xhr.onreadystatechange = function(event) {
                if (xhr.readyState === 4)
                {
                    if (xhr.status === 200)
                    {
                        var callback= function(event){
                            CocoonJS.App.onLoadInTheWebViewSucceed.notifyEventListeners(path);
                            CocoonJS.App.EmulatedWebViewIFrame.removeEventListener("load", callback);
                        };

                        CocoonJS.App.EmulatedWebViewIFrame.addEventListener(
                            "load", 
                            callback
                        );
                        CocoonJS.App.EmulatedWebViewIFrame.contentWindow.location.href= path;
                    }
                    else if (xhr.status === 404)
                    {
                        this.onreadystatechange = null;
                        CocoonJS.App.onLoadInTheWebViewFailed.notifyEventListeners(path);
                    }
                }
            };
            xhr.open("GET", path, true);
            xhr.send();
        }
    };

    /**
    * Shows the webview.
    */
    CocoonJS.App.showTheWebView = function(x, y, width, height)
    {
        if (CocoonJS.App.nativeExtensionObjectAvailable)
        {
            var javaScriptCodeToForward = "ext.IDTK_APP.makeCall('show'";
            if (typeof x !== 'undefined' && typeof y !== 'undefined' && typeof width !== 'undefined' && typeof height !== 'undefined')
            {
                javaScriptCodeToForward += ", " + x + ", " + y + ", " + width + ", " + height;
            }
            javaScriptCodeToForward += ");";

            return CocoonJS.App.forwardAsync(javaScriptCodeToForward);
        }
        else if (!navigator.isCocoonJS)
        {
            CocoonJS.App.EmulatedWebViewIFrame.style.width = (width ? width : window.innerWidth)+'px';
            CocoonJS.App.EmulatedWebViewIFrame.style.height = (height ? height : window.innerHeight)+'px';
            CocoonJS.App.EmulatedWebView.style.left = (x ? x : 0)+'px';
            CocoonJS.App.EmulatedWebView.style.top = (y ? y : 0)+'px';
            CocoonJS.App.EmulatedWebView.style.width = (width ? width : window.innerWidth)+'px';
            CocoonJS.App.EmulatedWebView.style.height = (height ? height : window.innerHeight)+'px';
            CocoonJS.App.EmulatedWebView.style.display = "block";
        }
    };

    /**
    * Hides the webview.
    */
    CocoonJS.App.hideTheWebView = function()
    {
        if (CocoonJS.App.nativeExtensionObjectAvailable)
        {
            var javaScriptCodeToForward = "ext.IDTK_APP.makeCall('hide');";
            return CocoonJS.App.forwardAsync(javaScriptCodeToForward);
        }
        else if (!navigator.isCocoonJS)
        {
            CocoonJS.App.EmulatedWebView.style.display = "none";
        }
    };

    /**
    * Marks a audio file to be used as music by the system. CocoonJS, internally, differentiates among music files and sound files.
    * Music files are usually bigger in size and longer in duration that sound files. There can only be just one music file 
    * playing at a specific given time. The developer can mark as many files as he/she wants to be treated as music. When the corresponding
    * HTML5 audio object is used, the system will automatically know how to treat the audio resource as music or as sound.
    * Note that it is not mandatory to use this function. The system automatically tries to identify if a file is suitable to be treated as music
    * or as sound by checking file size and duration thresholds. It is recommended, though, that the developer specifies him/herself what he/she considers
    * to be music.
    * @param {string} audioFilePath The same audio file path that will be used to create HTML5 audio objects.
    */
    CocoonJS.App.markAsMusic = function(audioFilePath)
    {
        if (CocoonJS.App.nativeExtensionObjectAvailable)
        {
           return CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_APP", "addForceMusic", arguments);
        }
    };

    /**
    * Activates or deactivates the antialas functionality from the CocoonJS rendering.
    * @param {boolean} enable A flag that indicates if the antialas should be activated (true) or deactivated (false).
    */
    CocoonJS.App.setAntialias = function(enable)
    {
        if (CocoonJS.App.nativeExtensionObjectAvailable)
        {
           return CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_APP", "setDefaultAntialias", arguments);
        }
    };

    /**
    * Sets a callback function that will be called whenever the system tries to finish the app.
    * The developer can specify how the system will react to the finish of the app by returning a
    * boolean value in the callback function: true means, close the app, false means that the developer
    * will handle the app close.
    * A common example of this is the back button in Android devices. When the back button is pressed, this
    * callback will be called and the system will react depending on the developers choice finishing, or not,
    * the application.
    * @param {function} appShouldFinishCallback A function object that will be called when the system
    * determines that the app should be finished. This function must return a true or a false value
    * depending on what the developer wants: true === finish the app, false === do not close the app.
    */
    CocoonJS.App.setAppShouldFinishCallback = function(appShouldFinishCallback)
    {
        if (navigator.isCocoonJS)
        {
            window.onidtkappfinish = appShouldFinishCallback;
        }
    }

    /**
    * Sets the texture reduction options. The texture reduction is a process that allows big images to be reduced/scaled down when they are loaded.
    * Although the quality of the images may decrease, it can be very useful in low end devices or those with limited amount of memory.
    * The function sets the threshold on image size (width or height) that will be used in order to know if an image should be reduced or not.
    * It also allows to specify a list of strings to identify in which images file paths should be applied (when they meet the size threshold requirement) 
    * The developer will still think that the image is of the original size. CocoonJS handles all of the internals to be able to show the image correctly.
    * IMPORTANT NOTE: This function should be called when the application is initialized before any image is set to be loaded for obvious reasons ;).
    * and in which sould be forbid (even if they meet the threshold requirement).
    * @param {number} sizeThreshold This parameter specifies the minimun size (either width or height) that an image should have in order to be reduced.
    * @param {string or array} [applyTo] This parameter can either be a string or an array of strings. It's purpose is to specify one (the string) or more (the array) substring(s) 
    * that will be compared against the file path of an image to be loaded in order to know if the reduction should be applied or not. If the image meets the
    * threshold size requirement and it's file path contains this string (or strings), it will be reduced. This parameter can also be null.
    * @param {string or array} [forbidFor] This parameter can either be a string or an array of strings. It's purpose is to specify one (the string) or more (the array) substring(s) 
    * that will be compared against the file path of an image to be loaded in order to know if the reduction should be applied or not. If the image meets the
    * threshold size requirement and it's file path contains this string (or strings), it won't be reduced. This parameter should be used in order to mantain the 
    * quality of some images even they meet the size threshold requirement.
    */
    CocoonJS.App.setTextureReduction = function(sizeThreshold, applyTo, forbidFor)
    {
        if (CocoonJS.App.nativeExtensionObjectAvailable)
        {
            return CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_APP", "setDefaultTextureReducerThreshold", arguments);
        }
    };


    /**
    * Prints to the console the memory usage of the currently alive textures
    */
    CocoonJS.App.logMemoryInfo = function()
    {
        if (CocoonJS.App.nativeExtensionObjectAvailable)
        {
            return CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_APP", "logMemoryInfo", arguments);
        }
    };

    /**
    * Setups a CocoonJS to WebView proxy for a given typeName. What this means is that after calling this function the CocoonJS environment will suddenly
    * have a way of creating instances of the given typeName and those instances will act as a transparent proxy to counterpart instances in the webview.
    * Manipulating attributes, calling funcitions or handling events will all be performed in the webview but the developer will think they will be
    * happening in the CocoonJS environment.
    * IMPORTANT NOTE: These proxies only work with types that use attributes and function parameters and return types that are primitive like numbers, strings or arrays.
    * @param {string} typeName The name of the type to be proxified.
    * @param {array} [attributeNames] A list of the names of the attributes to be proxified.
    * @param {array} [functionNames] A list of the names of the functions to be proxified.
    * @param {array} [eventHandlerNames] A list of the names of the event handlers to be proxified (onXXXX like attributes that represent callbacks).
    * A valid typeName and at least one valid array for attribute, function or event handler names is mandatory.
    */
    CocoonJS.App.setupWebViewProxyType = function(typeName, attributeNames, functionNames, eventHandlerNames)
    {
        if (CocoonJS.App.nativeExtensionObjectAvailable)
        {
            // Control the parameters.
            if (!typeName) throw "The given typeName must be valid.";
            if (!attributeNames && !functionNames && !eventHandlerNames) throw "There is no point on setting up a proxy for no attributes, functions nor eventHandlers.";
            attributeNames = attributeNames ? attributeNames : [];
            functionNames = functionNames ? functionNames : [];
            eventHandlerNames = eventHandlerNames ? eventHandlerNames : [];

            // The parent object will be the window. It could another object but careful, the webview side should know about this.
            // TODO: Specify the parentObject as a parameter, obtain it's path to window and pass it to the webview so it knows.
            var parentObject = window;

            // Setup the webview side too.
            var jsCode = "CocoonJS.App.setupCocoonJSProxyType(" + JSON.stringify(typeName) + ", " + JSON.stringify(eventHandlerNames) + ");";
            CocoonJS.App.forward(jsCode);

            // The proxy type to the webview. Instances of this type will be created by the developer without knowing that they are
            // internally calling to their counterparts in the webview.
            parentObject[typeName] = function()
            {
                var _this = this;

                // Each proxy object will have a "cocoonjs" object inside with all the necessary information to be a proxy to the webview.
                this.cocoonjs = {};
                // The id is obtained calling to the webview side to create an instance of the type.
                var jsCode = "CocoonJS.App.newCocoonJSProxyObject(" + JSON.stringify(typeName) + ");";
                this.cocoonjs.id = CocoonJS.App.forward(jsCode);
                // The eventHandlers array contains objects of the type { eventHandlerName : string, eventHandler : function } to be able to make the callbacks when the 
                // webview makes the corresponding calls.
                this.cocoonjs.eventHandlers = [];
                // Also store the typename inside each instance.
                this.cocoonjs.typeName = typeName;

                // Store all the proxy instances in a list that belongs to the type itself.
                parentObject[typeName].cocoonjs.objects.push(this);

                /**
                * Performs a call to a function to the counterpart instance of this proxy object in the webview.
                * @param {string} functioName The name of the function to be called.
                * @apram {object} arguments The arguments object from the function that has been called in the CocoonJS (it contains all the arguments that have been passed to it).
                * @return Whatever the call to the webview counterpart returns.
                */
                this.cocoonjs.callCocoonJSProxyObjectFunctionInTheWebview = function(functionName, arguments)
                {
                    // Get the arguments as an array and add the typeName, the proxy id and the functionName before all the other arguments before making the call to the webview counterpart.
                    var argumentsArray = Array.prototype.slice.call(arguments);
                    argumentsArray.unshift(functionName);
                    argumentsArray.unshift(this.id);
                    argumentsArray.unshift(typeName);
                    // Use the array to create the correct function call.
                    var jsCode = "CocoonJS.App.callCocoonJSProxyObjectFunction(";
                    for (var i = 0; i < argumentsArray.length; i++)
                    {
                        jsCode += JSON.stringify(argumentsArray[i]) + (i < argumentsArray.length - 1 ? ", " : "");
                    }
                    jsCode += ");";
                    var ret = CocoonJS.App.forward(jsCode);
                    return ret;
                };

                /**
                * Find the corresponding event handler for the given eventHandlerName.
                * @param {string} eventHandlerName The name of the event handler to look for in the cocoonjs structure's event handler array.
                * @return The eventHandler structure { eventHandlerName : string, eventHandler : function } if it is found or null if not.
                */
                this.cocoonjs.findEventHandler = function(eventHandlerName)
                {
                    var eventHandler = null;
                    for (var i = 0; eventHandler == null && i < this.eventHandlers.length; i++)
                    {
                        eventHandler = this.eventHandlers[i].eventHandlerName === eventHandlerName ? this.eventHandlers[i] : null;
                    }
                    return eventHandler;
                };

                // Create a setter and a getter for all the attribute names that have been specified. When the attributes are accessed (set or get) a call to the webview counterpart will be performed.
                for (var i = 0; i < attributeNames.length; i++)
                {
                    (function(attributeName)
                    {
                        _this.__defineSetter__(attributeName, function(value)
                        {
                            var jsCode = "CocoonJS.App.setCocoonJSProxyObjectAttribute(" + JSON.stringify(typeName) + ", " + _this.cocoonjs.id + ", " + JSON.stringify(attributeName) + "', " + JSON.stringify(value) + ");";
                            return CocoonJS.App.forward(jsCode);
                        });
                        _this.__defineGetter__(attributeName, function()
                        {
                            var jsCode = "CocoonJS.App.getCocoonJSProxyObjectAttribute(" + JSON.stringify(typeName) + ", " + _this.cocoonjs.id + ", '" + attributeName + "');";
                            return CocoonJS.App.forward(jsCode);
                        });
                    })(attributeNames[i]);
                }

                // Create a function that performs a call to the webview counterpart for all the function names that have been specified.
                for (var i = 0; i < functionNames.length; i++)
                {
                    (function(functionName)
                    {
                        _this[functionName] = function()
                        {
                            return _this.cocoonjs.callCocoonJSProxyObjectFunctionInTheWebview(functionName, arguments);
                        };
                    })(functionNames[i]);
                }

                // Create a setter and getter for all the event handler names that have been specified. When the event handlers are accessed, store them inside the corresponding position on the eventHandlers
                // array so they can be called when the webview makes the corresponding callback call.
                for (var i = 0; i < eventHandlerNames.length; i++)
                {
                    (function(eventHandlerName)
                    {
                        _this.__defineSetter__(eventHandlerName, function(value)
                        {
                            // First of all look for the event handler. If it exists, reuse it (just change the callback reference) and if not, create a new one.
                            var eventHandler = _this.cocoonjs.findEventHandler(eventHandlerName);
                            if (eventHandler)
                            {
                                eventHandler.eventHandler = value;
                            }
                            else
                            {
                                _this.cocoonjs.eventHandlers.push( { eventHandlerName : eventHandlerName, eventHandler : value } );
                            }
                        });
                        _this.__defineGetter__(eventHandlerName, function()
                        {
                            var eventHandler = _this.cocoonjs.findEventHandler(eventHandlerName);
                            return eventHandler ? eventHandler.eventHandler : null;
                        });
                    })(eventHandlerNames[i]);
                }

                // Return the proxy instance.
                return this;
            };

            // The type will contain a cocoonjs structure to store all the instances that are created so they are available when the webview calls.
            parentObject[typeName].cocoonjs = 
            {
                objects : []
            };

            /**
            * Deletes a proxy instance from both the CocoonJS environment structures and also deleting it's webview environment counterpart.
            * This function should be manually called whenever a proxy instance won't be accessed anymore.
            * @param {object} object The proxy object to be deleted.
            */
            parentObject[typeName].cocoonjs.deleteObject = function(object)
            {
                var objectIndex = this.objects.indexOf(object);
                this.objects.splice(objectIndex, 1);
                var jsCode = "CocoonJS.App.deleteCocoonJSProxyObject(" + JSON.stringify(typeName) + ", " + object.cocoonjs.id + ");";
                CocoonJS.App.forward(jsCode);
                object.cocoonjs = null;
            };

            /**
            * Searchs for a proxy object using the given id.
            * @param {number} id The id to be used to look for the proxy object in the type's all the instances array.
            * @return The corresponding proxy object if it's found or null if not.
            */
            parentObject[typeName].cocoonjs.findObjectForId = function(id)
            {
                var object = null;
                for (var i = 0; object == null && i < this.objects.length; i++)
                {
                    object = this.objects[i].cocoonjs.id === id ? this.objects[i] : null;
                }
                return object;
            };

            /**
            * Calls a event handler for the given proxy object id and eventHandlerName.
            * @param {number} id The id to be used to look for the proxy object for which to make the call to it's event handler.
            * @param {string} eventHandlerName The name of the handler to be called.
            * NOTE: Events are a complex thing in the HTML specification. This function just performs a call but at least provides a 
            * structure to the event passing the target (the proxy object).
            * TODO: The webview should serialize the event object as far as it can so many parameters can be passed to the CocoonJS
            * side. Using JSON.stringify in the webview and parse in CocoonJS maybe? Still must add the target to the event structure though.
            */
            parentObject[typeName].cocoonjs.callEventHandler = function(id, eventHandlerName)
            {
                var object = this.findObjectForId(id);
                var eventHandler = object.cocoonjs.findEventHandler(eventHandlerName);
                if (eventHandler)
                {
                    eventHandler.eventHandler( { target : object } );
                }
            };
        }
    };

    CocoonJS.App.enableFPSInTheWebView = function(fpsLayout, textColor)
    {
        if (!CocoonJS.App.fpsInTheWebViewEnabled)
        {
            fpsLayout = fpsLayout ? fpsLayout : CocoonJS.App.FPSLayout.TOP_RIGHT;
            textColor = textColor ? textColor : "white";
            var jsCode = "" +
                "(function()" +
                "{" +
                    "var COCOONJS_WEBVIEW_EXTENSION_SCRIPT_FILES = ['js/CocoonJSExtensions/CocoonJS.js', 'js/CocoonJSExtensions/CocoonJS_App.js', 'js/CocoonJSExtensions/CocoonJS_App_ForWebView.js'];" +
                    "var loadedScriptCounter = 0;" + 
                    "var loadedScriptFunction = function() " +
                    "{ " +
                        "loadedScriptCounter++;"+
                        "if (loadedScriptCounter >= COCOONJS_WEBVIEW_EXTENSION_SCRIPT_FILES.length)"+
                        "{"+
                            "CocoonJS.App.enableFPS(" + JSON.stringify(fpsLayout) + ", " + JSON.stringify(textColor) + ");"+
                        "}"+
                    "};"+
                    "for (var i = 0; i < COCOONJS_WEBVIEW_EXTENSION_SCRIPT_FILES.length; i++)"+
                    "{"+
                        "var s = document.createElement('script');"+
                        "s.onload = loadedScriptFunction;"+
                        "s.src = COCOONJS_WEBVIEW_EXTENSION_SCRIPT_FILES[i];"+
                        "document.body.appendChild(s);"+
                    "}" +
                "})();";
            setTimeout(function()
            {
                CocoonJS.App.forward(jsCode);
            }, 3000);
            CocoonJS.App.fpsInTheWebViewEnabled = true;
        }
    };

    CocoonJS.App.disableFPSInTheWebView = function()
    {
        // TODO: Implement this function.
    };

    /**
    * FOR DOCUMENTATION PURPOSE ONLY! The documentation of the function callback for the {@link CocoonJS.App.onLoadInTheWebViewSucceed} event calls.
    * @name OnLoadInTheWebViewSucceedListener
    * @function
    * @static
    * @memberOf CocoonJS.App
    * @param {string} pageURL A string that represents the page URL loaded.
    */

    /**
    * This {@link CocoonJS.EventHandler} object allows listening to events called when the WebView load has completed successfully.
    * The callback function's documentation is represented by {@link CocoonJS.App.OnLoadInTheWebViewSucceedListener}
    * @static
    */
    CocoonJS.App.onLoadInTheWebViewSucceed = new CocoonJS.EventHandler("IDTK_APP", "App", "forwardpageload");

    /**
    * This {@link CocoonJS.EventHandler} object allows listening to events called when the WebView load fails.
    * The callback function does not receive any parameter.
    * @static
    */
    CocoonJS.App.onLoadInTheWebViewFailed = new CocoonJS.EventHandler("IDTK_APP", "App", "forwardpagefail");
    
})();

//////////////////////////////////////
// COCOONJS_AD.JS                    //
//////////////////////////////////////

(function()
{
    // The CocoonJS must exist before creating the extension.
    if (typeof window.CocoonJS === 'undefined' || window.CocoonJS === null) throw("The CocoonJS object must exist and be valid before creating any extension object.");

    /**
    * This namespace represents the CocoonJS Advertisment extension API.
    * @namespace
    */
    CocoonJS.Ad = {};

    CocoonJS.Ad.nativeExtensionObjectAvailable = CocoonJS.nativeExtensionObjectAvailable && typeof window.ext.IDTK_SRV_AD !== 'undefined';

    /**
    * The predefined possible layouts for a banner ad.
    * @namespace 
    */
    CocoonJS.Ad.BannerLayout = 
    {
        /**
        * Specifies that the banner must be shown in the top of the screen and vertically centered.
        */
        TOP_CENTER      : "TOP_CENTER",

        /**
        * Specifies that the banner must be shown in the bottom of the screen and vertically centered.
        */
        BOTTOM_CENTER   : "BOTTOM_CENTER"
    };

    /**
    * A rectangle object that contains the banner dimensions
    * @namespace 
    * @constructor
    */
    CocoonJS.Ad.Rectangle = function(x, y, width, height) 
    {
        /**
        * Origin x
        */
        this.x = x;

        /**
        * Origin y
        */
        this.y = y;

        /**
        * Rectangle width
        */
        this.width = width;

        /**
        * Rectangle height
        */
        this.height = height;
    };

    /**
    * Shows a banner ad if available.
    * @function
    * @see CocoonJS.Ad.setBannerLayout
    * @see CocoonJS.Ad.onBannerShown
    */
    CocoonJS.Ad.showBanner = function()
    {
        if (CocoonJS.Ad.nativeExtensionObjectAvailable)
        {
            return CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_AD", "showBanner", arguments);
        }
    };

    /**
    * Hides the banner ad if it was being shown.
    * @function
    */
    CocoonJS.Ad.hideBanner = function()
    {
        if (CocoonJS.Ad.nativeExtensionObjectAvailable)
        {
            return CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_AD", "hideBanner", arguments);
        }
    };

    /**
    * Shows a full screen ad if available.
    * @function
    * @see CocoonJS.Ad.onFullScreenShown
    * @see CocoonJS.Ad.onFullScreenHidden
    */
    CocoonJS.Ad.showFullScreen = function()
    {
        if (CocoonJS.Ad.nativeExtensionObjectAvailable)
        {
            return CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_AD", "showFullScreen", arguments);
        }
    };

    /**
    * Makes a request to preload a banner ad.
    * @function
    */
    CocoonJS.Ad.preloadBanner = function()
    {
        if (CocoonJS.Ad.nativeExtensionObjectAvailable)
        {
            return CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_AD", "preloadBanner", arguments);
        }
    };

    /**
    * Makes a request to preload a full screen ad.
    * @function
    */
    CocoonJS.Ad.preloadFullScreen = function()
    {
        if (CocoonJS.Ad.nativeExtensionObjectAvailable)
        {
            return CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_AD", "preloadFullScreen", arguments);
        }
    };

    /**
    * Sets the rectangle where the banner ad is going to be shown.
    * @function
    * @param {CocoonJS.Ad.Rectangle} rect The rectangle with the banner position and domensions.
    */
    CocoonJS.Ad.setRectangle = function()
    {
        if (CocoonJS.Ad.nativeExtensionObjectAvailable)
        {
            return CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_AD", "setRectangle", arguments);
        }
    };

    /**
    * Gets the rectangle representing the banner screen position.
    * @function
    * @return {CocoonJS.Ad.Rectangle} rectangle The rectangle height.
    */
    CocoonJS.Ad.getRectangle = function()
    {
        if (CocoonJS.Ad.nativeExtensionObjectAvailable)
        {
            return CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_AD", "getRectangle", arguments);
        }
    };

    /**
    * Sets the rectangle where the banner ad is going to be shown.
    * You can use this method if you want to have better control of the banner screen positioning.
    * @function
    * @param {CocoonJS.Ad.BannerLayout} bannerLayout The layout where to set the banner.
    */
    CocoonJS.Ad.setBannerLayout = function(bannerLayout)
    {
        if (CocoonJS.Ad.nativeExtensionObjectAvailable)
        {
            return CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_AD", "setBannerLayout", arguments);
        }
    };

    /**
    * This {@link CocoonJS.EventHandler} object allows listening to events called when a banner is shown.
    * The callback function does not receive any parameter.
    * @static
    * @event
    */
    CocoonJS.Ad.onBannerShown = new CocoonJS.EventHandler("IDTK_SRV_AD", "Ad", "onbannershow"); 

    /**
    * This {@link CocoonJS.EventHandler} object allows listening to events called when a full screen ad is shown.
    * The callback function does not receive any parameter.
    * @static
    * @event
    */
    CocoonJS.Ad.onFullScreenShown = new CocoonJS.EventHandler("IDTK_SRV_AD", "Ad", "onfullscreenshow"); 

    /**
    * This {@link CocoonJS.EventHandler} object allows listening to events called when a full screen ad is hidden.
    * The callback function does not receive any parameter.
    * @static
    * @event
    */
    CocoonJS.Ad.onFullScreenHidden = new CocoonJS.EventHandler("IDTK_SRV_AD", "Ad", "onfullscreenhide");

})();

//////////////////////////////////////
// COCOONJS_STORE.JS                //
//////////////////////////////////////

(function()
{
    // The CocoonJS must exist before creating the extension.
    if (typeof window.CocoonJS === 'undefined' || window.CocoonJS === null) throw("The CocoonJS object must exist and be valid before creating any extension object.");

    /**
    * This namespace represents the CocoonJS In-App Purchase extension.
    * @namespace
    */
    CocoonJS.Store = {};

    CocoonJS.Store.nativeExtensionObjectAvailable = CocoonJS.nativeExtensionObjectAvailable && typeof window.ext.IDTK_SRV_STORE !== 'undefined';

    /**
    * The data structure that represents the information of a product in the store.
    * @namespace
    * @constructor
    */
    CocoonJS.Store.ProductInfo = function(productAlias, productId, productType, title, description, price, localizedPrice, downloadURL)
    {
        /**
        * The id of the prodcut.
        * @field
        * @type string
        */
        this.productId = productId;

        /**
        * The product alias.
        * @field
        * @type string
        */
        this.productAlias = productAlias;

        /**
        * The product type @see CocoonJS.Store.ProductType
        * @field
        * @type CocoonJS.Store.ProductType
        */
        this.productType = productType;

        /**
        * The title of the product.
        * @field
        * @type string
        */
        this.title = title;

        /**
        * The description of the product.
        * @field
        * @type string
        */
        this.description = description;

        /**
        * The price of the product.
        * @field
        * @type string
        */
        this.price = price;

        /**
        * The price of the product.
        * @field
        * @type string
        */
        this.localizedPrice = localizedPrice;

        /**
        * The URL of the asset to be downloaded for this purchase.
        * @field
        * @type string
        */
        this.downloadURL = downloadURL;

        return this;
    };

    /**
    * The predefined possible states of a purchase.
    * @namespace 
    */
    CocoonJS.Store.ProductType = 
    {
        /**
        * A consumable product. See platform documentation for further information.
        */
        CONSUMABLE : 0,

        /**
        * A non-cunsumable product. . See platform documentation for further information.
        */
        NON_CONSUMABLE : 1,

        /**
        * An auto-renewable subscription. See platform documentation for further information.
        */
        AUTO_RENEWABLE_SUBSCRIPTION : 2,

        /**
        * A free subscription. See platform documentation for further information.
        */
        FREE_SUBSCRIPTION : 3,

        /**
        * A non-renewable subscription. See platform documentation for further information.
        */
        NON_RENEWABLE_SUBSCRIPTION : 4
    };

    /**
    * The data structure that represents the information of a purchase.
    * @namespace
    * @constructor
    */
    CocoonJS.Store.PurchaseInfo = function(transactionId, purchaseTime, purchaseState, productId, quantity)
    {
        /**
        * The transaction id of a purchase.
        * @field
        * @type string
        */
        this.transactionId = transactionId;

        /**
        * The time when the purchase was done in seconds since 1970.
        * @field
        * @type string
        */
        this.purchaseTime = purchaseTime;

        /**
        * The state of the purchase. @see CocoonJS.Store.PurchaseState
        * @field
        * @type CocoonJS.Store.PurchaseState
        */
        this.purchaseState = purchaseState;

        /**
        * The product id related to this purchase.
        * @field
        * @type string
        */
        this.productId = productId;

        /**
        * The number of products of the productId kind purchased in this transaction.
        * @field
        * @type int
        */
        this.quantity = quantity;

        return this;
    };

    /**
    * The predefined possible states of a purchase.
    * @namespace 
    */
    CocoonJS.Store.PurchaseState = 
    {
        /**
        * The product has been successfully purchased. The transaction has ended successfully.
        */
        PURCHASED : 0,

        /**
        * The purchase has been canceled.
        */
        CANCELED : 1,

        /**
        * The purchase has been refunded.
        */
        REFUNDED : 2,

        /**
        * The purchase (subscriptions only) has expired and is no longer valid.
        */
        EXPIRED : 3
    };

    /**
    * Starts the Store Service. 
    * This will make the system to initialize the Store Service and probably Store callbacks will start to be received after calling this method so you should have set your event handler before calling this method so don't lose any callback.
    * @function
    */ 
    CocoonJS.Store.start = function()
    {
        if (CocoonJS.Store.nativeExtensionObjectAvailable)
        {
            return CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_STORE", "start", arguments);
        }
    };

    /**
    * This method allows you to check is the  Store service is available in this platform. 
    * Not all iOS and Android devices will have the Store service available so you should check if it is before calling any other method.
    * @function
    * @return true if the service is available and false otherwise.
    */ 
    CocoonJS.Store.canPurchase = function()
    {
        if (CocoonJS.Store.nativeExtensionObjectAvailable)
        {
            return CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_STORE", "canPurchase", arguments);
        }
    };

    /**
    * Fetches the products from the CocoonJS Cloud Compiling service store configuration. 
    * The request is monitored using the {@link CocoonJS.Store.onProductsFetchStarted}, {@link CocoonJS.Store.onProductsFetchCompleted} and {@link CocoonJS.Store.onProductsFetchFailed} event handlers.
    * @function
    * @see CocoonJS.Store.onProductsFetchStarted
    * @see CocoonJS.Store.onProductsFetchCompleted
    * @see CocoonJS.Store.onProductsFetchFailed
    */ 
    CocoonJS.Store.fetchProductsFromServer = function()
    {
        if (CocoonJS.Store.nativeExtensionObjectAvailable)
        {
            return CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_STORE", "fetchProductsFromServer", arguments);
        }
    };

    /**
    * Removes a purchase from the local purchases database given it's transaction id. 
    * If the transaction id does not exist or cannot be removed from the local database this method will return false.
    * @function
    * @param {string} transactionId The id of the transaction to be removed.
    * @returns {boolean} A flag that indicates whether the purchase has been successfully removed from the local purchases database (true) or not (false).
    */ 
    CocoonJS.Store.removePurchase = function(transactionId)
    {
        if (CocoonJS.Store.nativeExtensionObjectAvailable)
        {
            return CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_STORE", "removePurchase", arguments);
        }
    };

    /**
    * Finish a purchase transaction and removes the transaction from the transaction queue. 
    * This method must be called after a purchase finishes successfully and the  {@link CocoonJS.Store.onProductPurchaseCompleted} callback has been received. 
    * If the purchase includes some asset to download from an external server this method must be called after the asset has been successfully downloaded. 
    * If you do not finish the transaction because the asset has not been correctly downloaded the {@link CocoonJS.Store.onProductPurchaseStarted} method will be called again later on.
    * @function
    * @param {string} transactionId The transactionId of the purchase to finish.
    */ 
    CocoonJS.Store.finishPurchase = function(productId)
    {
        if (CocoonJS.Store.nativeExtensionObjectAvailable)
        {
            return CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_STORE", "finishPurchase", arguments);
        }
    };

    /**
    * Request a product purchase given it's product id. 
    * The request is monitored using the {@link CocoonJS.Store.onPurchaseProductStarted}, {@link CocoonJS.Store.onProductPurchaseStarted} and {@link CocoonJS.Store.onProductPurchaseFailed} event handlers.
    * @function
    * @param {string} productId The id of the product to be purchased.
    * @see CocoonJS.Store.onProductPurchaseStarted
    * @see CocoonJS.Store.onProductPurchaseCompleted
    * @see CocoonJS.Store.onProductPurchaseFailed
    */ 
    CocoonJS.Store.purchaseProduct = function(productId)
    {
        if (CocoonJS.Store.nativeExtensionObjectAvailable)
        {
            return CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_STORE", "purchaseFeature", arguments);
        }
    };

    /**
    * Request a product purchase given it's product id showing a modal progress dialog. 
    * The request is monitored using the {@link CocoonJS.Store.onProductPurchaseStarted}, {@link CocoonJS.Store.onProductPurchaseCompleted} and {@link CocoonJS.Store.onProductPurchaseFailed} event handlers.
    * @function
    * @param {string} productId The id of the product to be purchased.
    * @see CocoonJS.Store.onProductPurchaseStarted
    * @see CocoonJS.Store.onProductPurchaseCompleted
    * @see CocoonJS.Store.onProductPurchaseFailed
    */ 
    CocoonJS.Store.puchaseProductModal = function(productId)
    {
        if (CocoonJS.Store.nativeExtensionObjectAvailable)
        {
            return CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_STORE", "purchaseFeatureModal", arguments);
        }
    };

    /**
    * Request the purchase of a product given it's product id showing a dialog with a preview of the product (title and description). 
    * The request is monitored using the {@link CocoonJS.Store.onProductPurchaseStarted}, {@link CocoonJS.Store.onProductPurchaseCompleted} and {@link CocoonJS.Store.onProductPurchaseFailed} event handlers.
    * @function
    * @param {string} productId The id of the product to be purchased.
    * @see CocoonJS.Store.onProductPurchaseStarted
    * @see CocoonJS.Store.onProductPurchaseCompleted
    * @see CocoonJS.Store.onProductPurchaseFailed
    */ 
    CocoonJS.Store.purchaseProductModalWithPreview = function(productId)
    {
        if (CocoonJS.Store.nativeExtensionObjectAvailable)
        {
            return CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_STORE", "purchaseFeatureModalWithPreview", arguments);
        }
    };

    /**
    * Returns if a product has been already purchased or not. 
    * @function
    * @param {string} productId The product id of the product to be checked.
    * @returns {boolean} A flag that indicates whether the product has been already purchased (true) or not (false).
    */
    CocoonJS.Store.isProductPurchased = function(productId)
    {
        if (CocoonJS.Store.nativeExtensionObjectAvailable)
        {
            return CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_STORE", "isFeaturePurchased", arguments);
        }
    };

    /**
    * Returns all the products available to be purchased.
    * @function
    * @returns {array} An array with  all the {@link CocoonJS.Store.ProductInfo} objects available for purchase.
    */
    CocoonJS.Store.getProducts = function()
    {
        if (CocoonJS.Store.nativeExtensionObjectAvailable)
        {
            return CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_STORE", "getProducts", arguments);
        }
    };

    /**
    * Returns all the locally stored purchases.
    * @function
    * @returns {array} An array with all the {@link CocoonJS.Store.PurchaseInfo} completed purchases.
    */
    CocoonJS.Store.getPurchases = function()
    {
        if (CocoonJS.Store.nativeExtensionObjectAvailable)
        {
            return CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_STORE", "getPurchases", arguments);
        }
    };

    /**
    * Restores all the purchases from the platform's market. 
    * For each already purchased product {@link CocoonJS.Store.onPurchaseProductStarted}, {@link CocoonJS.Store.onPurchaseProductCompleted} and {@link CocoonJS.Store.onPurchaseProductFailed} event handlers are called again
    * @function
    * @returns {boolean} 
    * @see CocoonJS.Store.onRestorePurchasesStarted
    * @see CocoonJS.Store.onRestorePurchasesCompleted
    * @see CocoonJS.Store.onRestorePurchasesFailed
    */
    CocoonJS.Store.restorePurchases = function()
    {
        if (CocoonJS.Store.nativeExtensionObjectAvailable)
        {
            return CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_STORE", "restorePurchases", arguments);
        }
    };

    /**
    * Restores all the purchases from the platform's market showing a modal progress dialog. 
    * For each already purchased product {@link CocoonJS.Store.onPurchaseProductStarted}, {@link CocoonJS.Store.onPurchaseProductCompleted} and {@link CocoonJS.Store.onPurchaseProductFailed} event handlers are called again
    * @function
    * @returns {boolean} 
    * @see CocoonJS.Store.onRestorePurchasesStarted
    * @see CocoonJS.Store.onRestorePurchasesCompleted
    * @see CocoonJS.Store.onRestorePurchasesFailed
    */
    CocoonJS.Store.restorePurchasesModal = function()
    {
        if (CocoonJS.Store.nativeExtensionObjectAvailable)
        {
            return CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_STORE", "restorePurchasesModal", arguments);
        }
    };

    /**
    * (TEST ONLY) Adds a product to the products local DB. 
    * This method is not allowed in production services and will only work in Mocks.
    * @function
    * @param {CocoonJS.Store.ProductInfo} product The product to be added to the local products DB.
    */
    CocoonJS.Store.addProduct = function(product)
    {
        if (CocoonJS.Store.nativeExtensionObjectAvailable)
        {
            return CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_STORE", "addProduct", arguments);
        }
    };

    /**
    * (TEST ONLY) Removes a product from the products local DB. 
    * This method is not allowed in production services and will only work in Mocks. 
    * The request is monitored using the {@link CocoonJS.Store.onPurchaseProductStarted}, {@link CocoonJS.Store.onProductPurchaseStarted} and {@link CocoonJS.Store.onProductPurchaseFailed} event handlers.
    * @function
    * @param {string} productId The productId of the product to be removed from the local products DB.
    */
    CocoonJS.Store.removeProduct = function(productId)
    {
        if (CocoonJS.Store.nativeExtensionObjectAvailable)
        {
            return CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_STORE", "removeProduct", arguments);
        }
    };

    /**
    * (TEST ONLY) Simulate a purchase cancel. 
    * This method is not allowed in production services and will only work in Mocks. 
    * The request is monitored using the {@link CocoonJS.Store.onPurchaseProductStarted}, {@link CocoonJS.Store.onProductPurchaseStarted} and {@link CocoonJS.Store.onProductPurchaseFailed} event handlers.
    * @function
    * @param {string} transactionId The transactionId of the purchase to be canceled.
    */
    CocoonJS.Store.cancelPurchase = function(transactionId)
    {
        if (CocoonJS.Store.nativeExtensionObjectAvailable)
        {
            return CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_STORE", "cancelPurchase", arguments);
        }
    };

    /**
    * (TEST ONLY) Simulate a purchase refundment. 
    * This method is not allowed in production services and will only work in Mocks. 
    * The request is monitored using the {@link CocoonJS.Store.onPurchaseProductStarted}, {@link CocoonJS.Store.onProductPurchaseStarted} and {@link CocoonJS.Store.onProductPurchaseFailed} event handlers.
    * @function
    * @param {string} transactionId The transactionId of the purchase to be refunded.
    */
    CocoonJS.Store.refundPurchase = function(transactionId)
    {
        if (CocoonJS.Store.nativeExtensionObjectAvailable)
        {
            return CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_STORE", "refundPurchase", arguments);
        }
    };

    /**
    * (TEST ONLY) Simulate a purchase expiration. 
    * This method is not allowed in production services and will only work in Mocks. 
    * The request is monitored using the {@link CocoonJS.Store.onPurchaseProductStarted}, {@link CocoonJS.Store.onProductPurchaseStarted} and {@link CocoonJS.Store.onProductPurchaseFailed} event handlers.
    * @function
    * @param {string} transactionId The transactionId of the purchase to be expired.
    */
    CocoonJS.Store.expirePurchase = function(transactionId)
    {
        if (CocoonJS.Store.nativeExtensionObjectAvailable)
        {
            return CocoonJS.makeNativeExtensionObjectFunctionCall("IDTK_SRV_STORE", "expirePurchase", arguments);
        }
    };

    /**
    * This {@link CocoonJS.EventHandler} object allows listening to events called when the purchase of a product starts.
    * The callback function receives a parameters with the information of the purchased product @see CocoonJS.Store.ProductInfo.
    * @static
    * @event
    * @param {CocoonJS.Store.ProductInfo} productInfo The product info.
    */
    CocoonJS.Store.onProductPurchaseStarted = new CocoonJS.EventHandler("IDTK_SRV_STORE", "Store", "onProductPurchaseStarted"); 

    /**
    * This {@link CocoonJS.EventHandler} object allows listening to events called when the purchase of a product succeeds.
    * The callback function receives two parameters, one with the product information of the purchased product {@see CocoonJS.Store.ProductInfo} and another one with the information of the purchase {@see CocoonJS.Store.PurchaseInfo}.
    * @static
    * @event
    * @param {CocoonJS.Store.ProductInfo} productInfo The product info.
    * @param {CocoonJS.Store.PurchaseInfo} purchaseInfo The purchase info.
    */
    CocoonJS.Store.onProductPurchaseCompleted = new CocoonJS.EventHandler("IDTK_SRV_STORE", "Store", "onProductPurchaseCompleted"); 

    /**
    * This {@link CocoonJS.EventHandler} object allows listening to events called when the purchase of a product fails.
    * The callback function receives a parameters with the product id and an error message.
    * @static
    * @event
    * @param {string} productID The product id.
    * @param {string} msg The error message.
    */
    CocoonJS.Store.onProductPurchaseFailed = new CocoonJS.EventHandler("IDTK_SRV_STORE", "Store", "onProductPurchaseFailed"); 

    /**
    * This {@link CocoonJS.EventHandler} object allows listening to events called when the products fetch has started.
    * The callback function receives no parameters.
    * @static
    * @event
    */
    CocoonJS.Store.onProductsFetchStarted = new CocoonJS.EventHandler("IDTK_SRV_STORE", "Store", "onProductsFetchStarted");

    /**
    * This {@link CocoonJS.EventHandler} object allows listening to events called when the products fetch has completed.
    * The callback function receives a parameter with an the valid products array.
    * @static
    * @event
    * @param {array} validProducts An array of {@link CocoonJS.Store.ProductInfo} objects representing all the valid fetched products.
    */
    CocoonJS.Store.onProductsFetchCompleted = new CocoonJS.EventHandler("IDTK_SRV_STORE", "Store", "onProductsFetchCompleted"); 

    /**
    * This {@link CocoonJS.EventHandler} object allows listening to events called when the products fetch has failed.
    * The callback function receives an error message as a parameter.
    * @static
    * @event
    * @param {string} errorMessage The error message.
    */
    CocoonJS.Store.onProductsFetchFailed = new CocoonJS.EventHandler("IDTK_SRV_STORE", "Store", "onProductsFetchFailed"); 

    /**
    * This {@link CocoonJS.EventHandler} object allows listening to events called when the restore purchases operation has started.
    * The callback function receives no parameters.
    * @static
    * @event
    */
    CocoonJS.Store.onRestorePurchasesStarted = new CocoonJS.EventHandler("IDTK_SRV_STORE", "Store", "onRestorePurchasesStarted"); 

    /**
    * This {@link CocoonJS.EventHandler} object allows listening to events called when the restore purchases operation has completed.
    * The callback function receives no parameters.
    * @static
    * @event
    */
    CocoonJS.Store.onRestorePurchasesCompleted = new CocoonJS.EventHandler("IDTK_SRV_STORE", "Store", "onRestorePurchasesCompleted"); 

    /**
    * This {@link CocoonJS.EventHandler} object allows listening to events called when the restore purchases operation has failed.
    * The callback function receives an error message as a parameter.
    * @static
    * @event
    * @param {string} errorMessage The error message.
    */
    CocoonJS.Store.onRestorePurchasesFailed = new CocoonJS.EventHandler("IDTK_SRV_STORE", "Store", "onRestorePurchasesFailed");

})();
(function() {
'use strict';var n=!0,q=null,r=!1;function A(){return function(){}}function aa(c){return function(){return this[c]}}function F(c){return function(){return c}}var K,ca,L,M,da,ea,N,O,fa,ha,ia,ja,ka,la,ma,na,oa,P,ra,ua,Q,va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,R,Fa,Ga,Ha,Ia,Ja,Ka,La,Ma,Na,Oa,Pa,Qa,Ra,Sa,Ta,Ua,Va,Wa,Xa,T,Ya,Za,$a,U,ab={};"function"!==typeof Object.getPrototypeOf&&(Object.getPrototypeOf="object"===typeof"test".__proto__?function(c){return c.__proto__}:function(c){return c.constructor.prototype});
(function(){function c(d,a,g,b){this.set(d,a,g,b)}function m(){this.Fa=this.Ea=this.Ha=this.Ga=this.Ka=this.Ja=this.ka=this.ja=0}function p(){this.Ic={};this.qf=0;this.Lf=[];this.Pe=n}function k(){this.rd=this.Vg=this.y=this.uh=0}function b(d){this.Sa=[];this.Ff(d)}K=function(d){window.console&&window.console.log&&window.console.log(d)};ca=function(d){return"undefined"===typeof d};L=function(d){return"number"===typeof d};M=function(d){return"string"===typeof d};da=function(d){return 0<d&&0===(d-1&
d)};ea=function(d){return 0>d?-d:d};N=function(d,a){return d>a?d:a};O=function(d,a){return d<a?d:a};fa=Math.PI;ha=function(d){return d|0};ia=function(d,a,g,b,h,c,x,w){if(N(d,g)<O(h,x)||O(d,g)>N(h,x)||N(a,b)<O(c,w)||O(a,b)>N(c,w))return r;var u=h-d+x-g,t=c-a+w-b;d=g-d;a=b-a;h=x-h;c=w-c;w=ea(a*h-c*d);return ea(h*t-c*u)<=w&&ea(d*t-a*u)<=w};c.prototype.set=function(d,a,g,b){this.left=d;this.top=a;this.right=g;this.bottom=b};c.prototype.width=function(){return this.right-this.left};c.prototype.height=
function(){return this.bottom-this.top};c.prototype.offset=function(d,a){this.left+=d;this.top+=a;this.right+=d;this.bottom+=a;return this};c.prototype.eo=function(d){return!(d.right<this.left||d.bottom<this.top||d.left>this.right||d.top>this.bottom)};c.prototype.Gb=function(d,a){return d>=this.left&&d<=this.right&&a>=this.top&&a<=this.bottom};ja=c;m.prototype.Yi=function(d){this.ja=d.left;this.ka=d.top;this.Ja=d.right;this.Ka=d.top;this.Ga=d.right;this.Ha=d.bottom;this.Ea=d.left;this.Fa=d.bottom};
m.prototype.ul=function(d,a){if(0===a)this.Yi(d);else{var g=Math.sin(a),b=Math.cos(a),h=d.left*g,c=d.top*g,x=d.right*g,g=d.bottom*g,w=d.left*b,u=d.top*b,t=d.right*b,b=d.bottom*b;this.ja=w-c;this.ka=u+h;this.Ja=t-c;this.Ka=u+x;this.Ga=t-g;this.Ha=b+x;this.Ea=w-g;this.Fa=b+h}};m.prototype.offset=function(d,a){this.ja+=d;this.ka+=a;this.Ja+=d;this.Ka+=a;this.Ga+=d;this.Ha+=a;this.Ea+=d;this.Fa+=a;return this};m.prototype.Pj=function(d){d.left=O(O(this.ja,this.Ja),O(this.Ga,this.Ea));d.top=O(O(this.ka,
this.Ka),O(this.Ha,this.Fa));d.right=N(N(this.ja,this.Ja),N(this.Ga,this.Ea));d.bottom=N(N(this.ka,this.Ka),N(this.Ha,this.Fa))};m.prototype.Gb=function(d,a){var g=this.Ja-this.ja,b=this.Ka-this.ka,h=this.Ga-this.ja,c=this.Ha-this.ka,x=d-this.ja,w=a-this.ka,u=g*g+b*b,t=g*h+b*c,b=g*x+b*w,s=h*h+c*c,y=h*x+c*w,C=1/(u*s-t*t),g=(s*b-t*y)*C,u=(u*y-t*b)*C;if(0<=g&&0<u&&1>g+u)return n;g=this.Ea-this.ja;b=this.Fa-this.ka;u=g*g+b*b;t=g*h+b*c;b=g*x+b*w;C=1/(u*s-t*t);g=(s*b-t*y)*C;u=(u*y-t*b)*C;return 0<=g&&0<
u&&1>g+u};m.prototype.Vc=function(d,a){switch(d){case 0:return a?this.ja:this.ka;case 1:return a?this.Ja:this.Ka;case 2:return a?this.Ga:this.Ha;case 3:return a?this.Ea:this.Fa;case 4:return a?this.ja:this.ka;default:return a?this.ja:this.ka}};m.prototype.Sk=function(){return(this.ja+this.Ja+this.Ga+this.Ea)/4};m.prototype.Tk=function(){return(this.ka+this.Ka+this.Ha+this.Fa)/4};m.prototype.co=function(d){var a=d.Sk(),g=d.Tk();if(this.Gb(a,g))return n;a=this.Sk();g=this.Tk();if(d.Gb(a,g))return n;
var b,h,c,x,w,u,t,s;for(t=0;4>t;t++)for(s=0;4>s;s++)if(a=this.Vc(t,n),g=this.Vc(t,r),b=this.Vc(t+1,n),h=this.Vc(t+1,r),c=d.Vc(s,n),x=d.Vc(s,r),w=d.Vc(s+1,n),u=d.Vc(s+1,r),ia(a,g,b,h,c,x,w,u))return n;return r};ka=m;la=function(d,a){for(var g in a)a.hasOwnProperty(g)&&(d[g]=a[g]);return d};ma=function(d,a){var g,b;a=ha(a);if(!(0>a||a>=d.length))if(0===a)d.shift();else if(a===d.length-1)d.pop();else{g=a;for(b=d.length-1;g<b;g++)d[g]=d[g+1];d.length=b}};na=function(d,a){d.length=a.length;var b,f;b=0;
for(f=a.length;b<f;b++)d[b]=a[b]};oa=function(d,a){var b=d.indexOf(a);-1!==b&&ma(d,b)};P=function(d){return d/(180/fa)};ra=function(d){return d*(180/fa)};ua=function(d){d%=360;0>d&&(d+=360);return d};Q=function(d){d%=2*fa;0>d&&(d+=2*fa);return d};va=function(d){return ua(ra(d))};wa=function(d){return Q(P(d))};xa=function(d,a,b,f){return Math.atan2(f-a,b-d)};ya=function(d,a){if(d===a)return 0;var b=Math.sin(d),f=Math.cos(d),h=Math.sin(a),c=Math.cos(a),b=b*h+f*c;return 1<=b?0:-1>=b?fa:Math.acos(b)};
za=function(d,a,b){var f=Math.sin(d),h=Math.cos(d),c=Math.sin(a),x=Math.cos(a);return Math.acos(f*c+h*x)>b?0<h*c-f*x?Q(d+b):Q(d-b):Q(a)};Aa=function(d,a){var b=Math.sin(d),f=Math.cos(d),h=Math.sin(a),c=Math.cos(a);return 0>=f*h-b*c};Ba=function(d,a,b,c){d=b-d;a=c-a;return Math.sqrt(d*d+a*a)};Ca=function(d,a){return!d!==!a};Da=function(d){for(var a in d)if(d.hasOwnProperty(a))return n;return r};Ea=function(a){for(var e in a)a.hasOwnProperty(e)&&delete a[e]};R=function(){if("undefined"!==typeof window.performance){var a=
window.performance;if("undefined"!==typeof a.now)return a.now();if("undefined"!==typeof a.webkitNow)return a.webkitNow();if("undefined"!==typeof a.msNow)return a.msNow()}return Date.now()};p.prototype.contains=function(a){return this.Ic.hasOwnProperty(a.toString())};p.prototype.add=function(a){var e=a.toString();this.Ic.hasOwnProperty(e)||(this.Ic[e]=a,this.qf++,this.Pe=r);return this};p.prototype.remove=function(a){a=a.toString();this.Ic.hasOwnProperty(a)&&(delete this.Ic[a],this.qf--,this.Pe=r);
return this};p.prototype.clear=function(){Ea(this.Ic);this.qf=0;this.Lf.length=0;this.Pe=n;return this};p.prototype.jf=function(){return 0===this.qf};p.prototype.Zo=function(){if(!this.Pe){this.Lf.length=this.qf;var a,e=0;for(a in this.Ic)this.Ic.hasOwnProperty(a)&&(this.Lf[e++]=this.Ic[a]);this.Pe=n}};p.prototype.Vd=function(){this.Zo();return this.Lf};Fa=p;k.prototype.add=function(a){this.y=a-this.uh;this.Vg=this.rd+this.y;this.uh=this.Vg-this.rd-this.y;this.rd=this.Vg};k.prototype.reset=function(){this.rd=
this.Vg=this.y=this.uh=0};Ga=k;Ha=function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};b.prototype.Ff=function(a){this.jl=a;this.Kc=a.length/2;this.Sa.length=a.length;this.Uf=this.Qe=-1;this.Qj=0};b.prototype.nf=function(){return!this.jl.length};b.prototype.Qg=function(a,e,b,c,h){this.Sa.length=8;this.Kc=4;var l=this.Sa;l[0]=a.ja-e;l[1]=a.ka-b;l[2]=a.Ja-e;l[3]=a.Ka-b;l[4]=a.Ga-e;l[5]=a.Ha-b;l[6]=a.Ea-e;l[7]=a.Fa-b;this.Qe=c;this.Uf=h};b.prototype.tl=function(a){this.Kc=a.Kc;na(this.Sa,
a.Sa)};b.prototype.Oe=function(a,e,b){if(!(this.Qe===a&&this.Uf===e&&this.Qj===b)){this.Qe=a;this.Uf=e;this.Qj=b;var c,h,l,x=0,w=1,u=this.jl,t=this.Sa;0!==b&&(x=Math.sin(b),w=Math.cos(b));b=0;for(c=this.Kc;b<c;b++)h=u[2*b]*a,l=u[2*b+1]*e,t[2*b]=h*w-l*x,t[2*b+1]=l*w+h*x}};b.prototype.Gb=function(a,e){var b=this.Sa;if(a===b[0]&&e===b[1])return n;var c=5*-this.Qe-1,h=5*-this.Uf-1,l=5*this.Qe+1,x,w,u,t,s,y,C=0,p=0;s=0;for(y=this.Kc;s<y;s++)x=b[2*s],w=b[2*s+1],u=b[2*((s+1)%y)],t=b[2*((s+1)%y)+1],ia(c,
h,a,e,x,w,u,t)&&C++,ia(l,-1,a,e,x,w,u,t)&&p++;return 1===C%2||1===p%2};b.prototype.wk=function(a,e,b){var c=a.Sa,h=this.Sa;if(this.Gb(c[0]+e,c[1]+b)||a.Gb(h[0]-e,h[1]-b))return n;var l,x,w,u,t,s,y,C,p,k,m,G;l=0;for(x=this.Kc;l<x;l++){t=h[2*l];s=h[2*l+1];y=h[2*((l+1)%x)];C=h[2*((l+1)%x)+1];w=0;for(u=a.Kc;w<u;w++)if(p=c[2*w]+e,k=c[2*w+1]+b,m=c[2*((w+1)%u)]+e,G=c[2*((w+1)%u)+1]+b,ia(t,s,y,C,p,k,m,G))return n}return r};Ia=b;var a="lighter xor copy destination-over source-in destination-in source-out destination-out source-atop destination-atop".split(" ");
Ja=function(d){return 0>=d||11<=d?"source-over":a[d-1]};Ka=function(a,e,b){if(b)switch(a.Ta=b.ONE,a.Oa=b.ONE_MINUS_SRC_ALPHA,e){case 1:a.Ta=b.ONE;a.Oa=b.ONE;break;case 3:a.Ta=b.ONE;a.Oa=b.ZERO;break;case 4:a.Ta=b.ONE_MINUS_DST_ALPHA;a.Oa=b.ONE;break;case 5:a.Ta=b.DST_ALPHA;a.Oa=b.ZERO;break;case 6:a.Ta=b.ZERO;a.Oa=b.SRC_ALPHA;break;case 7:a.Ta=b.ONE_MINUS_DST_ALPHA;a.Oa=b.ZERO;break;case 8:a.Ta=b.ZERO;a.Oa=b.ONE_MINUS_SRC_ALPHA;break;case 9:a.Ta=b.DST_ALPHA;a.Oa=b.ONE_MINUS_SRC_ALPHA;break;case 10:a.Ta=
b.ONE_MINUS_DST_ALPHA,a.Oa=b.SRC_ALPHA}};La=function(a){return Math.round(1E6*a)/1E6}})();var bb="undefined"!==typeof Float32Array?Float32Array:Array;function cb(c){var m=new bb(3);c&&(m[0]=c[0],m[1]=c[1],m[2]=c[2]);return m}function db(c){var m=new bb(16);c&&(m[0]=c[0],m[1]=c[1],m[2]=c[2],m[3]=c[3],m[4]=c[4],m[5]=c[5],m[6]=c[6],m[7]=c[7],m[8]=c[8],m[9]=c[9],m[10]=c[10],m[11]=c[11],m[12]=c[12],m[13]=c[13],m[14]=c[14],m[15]=c[15]);return m}
function eb(c,m){m[0]=c[0];m[1]=c[1];m[2]=c[2];m[3]=c[3];m[4]=c[4];m[5]=c[5];m[6]=c[6];m[7]=c[7];m[8]=c[8];m[9]=c[9];m[10]=c[10];m[11]=c[11];m[12]=c[12];m[13]=c[13];m[14]=c[14];m[15]=c[15]}function fb(c,m){var p=m[0],k=m[1];m=m[2];c[0]*=p;c[1]*=p;c[2]*=p;c[3]*=p;c[4]*=k;c[5]*=k;c[6]*=k;c[7]*=k;c[8]*=m;c[9]*=m;c[10]*=m;c[11]*=m}
function gb(c,m,p,k){k||(k=db());var b,a,d,e,g,f,h,l,x=c[0],w=c[1];c=c[2];a=p[0];d=p[1];b=p[2];p=m[1];f=m[2];x===m[0]&&w===p&&c===f?(c=k,c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1):(p=x-m[0],f=w-m[1],h=c-m[2],l=1/Math.sqrt(p*p+f*f+h*h),p*=l,f*=l,h*=l,m=d*h-b*f,b=b*p-a*h,a=a*f-d*p,(l=Math.sqrt(m*m+b*b+a*a))?(l=1/l,m*=l,b*=l,a*=l):a=b=m=0,d=f*a-h*b,e=h*m-p*a,g=p*b-f*m,(l=Math.sqrt(d*d+e*e+g*g))?(l=1/l,d*=l,e*=l,g*=l):g=e=d=0,
k[0]=m,k[1]=d,k[2]=p,k[3]=0,k[4]=b,k[5]=e,k[6]=f,k[7]=0,k[8]=a,k[9]=g,k[10]=h,k[11]=0,k[12]=-(m*x+b*w+a*c),k[13]=-(d*x+e*w+g*c),k[14]=-(p*x+f*w+h*c),k[15]=1)}
(function(){function c(a){this.height=this.width=0;this.Rj=cb([0,0,100]);this.Qk=cb([0,0,0]);this.Jl=cb([0,1,0]);this.tj=cb([1,1,1]);this.si=db();this.Nb=db();this.Hk=db();this.Bh=db();this.C=a;this.tk()}function m(a,d,e){this.C=a;this.Gf=d;this.name=e;this.Mb=a.getAttribLocation(d,"aPos");this.hd=a.getAttribLocation(d,"aTex");this.Ok=a.getUniformLocation(d,"matP");this.oe=a.getUniformLocation(d,"matMV");this.pe=a.getUniformLocation(d,"opacity");this.Pk=a.getUniformLocation(d,"samplerFront");this.Cg=
a.getUniformLocation(d,"samplerBack");this.ne=a.getUniformLocation(d,"destStart");this.me=a.getUniformLocation(d,"destEnd");this.qi=a.getUniformLocation(d,"seconds");this.pi=a.getUniformLocation(d,"pixelWidth");this.oi=a.getUniformLocation(d,"pixelHeight");this.ni=a.getUniformLocation(d,"layerScale");this.pe&&a.uniform1f(this.pe,1);this.Pk&&a.uniform1i(this.Pk,0);this.Cg&&a.uniform1i(this.Cg,1);this.ne&&a.uniform2f(this.ne,0,0);this.me&&a.uniform2f(this.me,1,1);this.Cd=r}function p(a,d){this.type=
a;this.A=d;this.C=d.C;this.hc=this.Pb=this.cl=0;this.G=this.Sd=q;this.Zi=[]}function k(a){--a;for(var d=1;32>d;d<<=1)a|=a>>d;return a+1}c.prototype.tk=function(){var a=this.C,d;this.Ik=1;this.Hd=q;this.Zj=1;a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT);a.enable(a.BLEND);a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA);a.disable(a.CULL_FACE);a.disable(a.DEPTH_TEST);this.uq=a.getParameter(a.MAX_TEXTURE_SIZE);this.Jk=a.ONE;this.Gk=a.ONE_MINUS_SRC_ALPHA;this.Ei=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,
this.Ei);this.Of=Array(4);this.Kf=Array(4);for(d=0;4>d;d++)this.Of[d]=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,this.Of[d]),this.Kf[d]=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,this.Kf[d]);this.zc=0;this.bo=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.bo);this.sj=new Float32Array(16E3);this.ej=new Float32Array(16E3);this.Bo=new Float32Array(32E3);for(var e=new Uint16Array(12E3),b=d=0;12E3>d;)e[d++]=b,e[d++]=b+1,e[d++]=b+2,e[d++]=b,e[d++]=b+2,e[d++]=b+3,b+=4;a.bufferData(a.ELEMENT_ARRAY_BUFFER,
e,a.STATIC_DRAW);this.Fi=this.tc=0;this.Aa=[];d=this.yh({src:"varying mediump vec2 vTex;\nuniform lowp float opacity;\nuniform lowp sampler2D samplerFront;\nvoid main(void) {\n\tgl_FragColor = texture2D(samplerFront, vTex);\n\tgl_FragColor *= opacity;\n}"},"attribute highp vec2 aPos;\nattribute mediump vec2 aTex;\nvarying mediump vec2 vTex;\nuniform highp mat4 matP;\nuniform highp mat4 matMV;\nvoid main(void) {\n\tgl_Position = matP * matMV * vec4(aPos.x, aPos.y, 0.0, 1.0);\n\tvTex = aTex;\n}","<default>");
this.Aa.push(d);d=this.yh({src:"uniform mediump sampler2D samplerFront;\nvarying lowp float opacity;\nvoid main(void) {\n\tgl_FragColor = texture2D(samplerFront, gl_PointCoord);\n\tgl_FragColor *= opacity;\n}"},"attribute vec4 aPos;\nvarying float opacity;\nuniform mat4 matP;\nuniform mat4 matMV;\nvoid main(void) {\n\tgl_Position = matP * matMV * vec4(aPos.x, aPos.y, 0.0, 1.0);\n\tgl_PointSize = aPos.z;\n\topacity = aPos.w;\n}","<point>");this.Aa.push(d);for(var c in hb)hb.hasOwnProperty(c)&&this.Aa.push(this.yh(hb[c],
"attribute highp vec2 aPos;\nattribute mediump vec2 aTex;\nvarying mediump vec2 vTex;\nuniform highp mat4 matP;\nuniform highp mat4 matMV;\nvoid main(void) {\n\tgl_Position = matP * matMV * vec4(aPos.x, aPos.y, 0.0, 1.0);\n\tvTex = aTex;\n}",c));a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,q);this.Xc=[];this.wc=0;this.Kb=this.ib=r;this.$j=this.sf=-1;this.Ve=q;this.vn=a.createFramebuffer();this.ol=q;this.sd=cb([0,0,0]);a=a.getParameter(a.ALIASED_POINT_SIZE_RANGE);this.vq=a[0];this.tq=a[1];
this.qc(0)};c.prototype.yh=function(a,d,b){var g=this.C,c=g.createShader(g.FRAGMENT_SHADER);g.shaderSource(c,a.src);g.compileShader(c);if(!g.getShaderParameter(c,g.COMPILE_STATUS))return g.deleteShader(c),q;var h=g.createShader(g.VERTEX_SHADER);g.shaderSource(h,d);g.compileShader(h);if(!g.getShaderParameter(h,g.COMPILE_STATUS))return g.deleteShader(c),g.deleteShader(h),q;d=g.createProgram();g.attachShader(d,c);g.attachShader(d,h);g.linkProgram(d);if(!g.getProgramParameter(d,g.LINK_STATUS))return g.deleteShader(c),
g.deleteShader(h),g.deleteProgram(d),q;g.useProgram(d);g.validateProgram(d);g.deleteShader(c);g.deleteShader(h);b=new m(g,d,b);b.Gh=a.Gh||0;b.Hh=a.Hh||0;b.Yj=!!a.Yj;b.Mj=!!a.Mj;b.D=a.D||[];a=0;for(c=b.D.length;a<c;a++)b.D[a][1]=g.getUniformLocation(d,b.D[a][0]),g.uniform1f(b.D[a][1],0);return b};c.prototype.Th=function(a){var d,b;d=0;for(b=this.Aa.length;d<b;d++)if(this.Aa[d].name===a)return d;return-1};c.prototype.il=function(a,d,b){var g=[0,0,this.width,this.height],c=this.Nb,h=this.si,l=[0,0,0,
0,0,0,0,0];l[0]=c[0]*a+c[4]*d+c[12];l[1]=c[1]*a+c[5]*d+c[13];l[2]=c[2]*a+c[6]*d+c[14];l[3]=c[3]*a+c[7]*d+c[15];l[4]=h[0]*l[0]+h[4]*l[1]+h[8]*l[2]+h[12]*l[3];l[5]=h[1]*l[0]+h[5]*l[1]+h[9]*l[2]+h[13]*l[3];l[6]=h[2]*l[0]+h[6]*l[1]+h[10]*l[2]+h[14]*l[3];l[7]=-l[2];0!==l[7]&&(l[7]=1/l[7],l[4]*=l[7],l[5]*=l[7],l[6]*=l[7],b[0]=(0.5*l[4]+0.5)*g[2]+g[0],b[1]=(0.5*l[5]+0.5)*g[3]+g[1])};c.prototype.Xi=function(a,d,b){if(!(this.width===a&&this.height===d&&!b)){this.ad();this.width=a;this.height=d;this.C.viewport(0,
0,a,d);d=a/d;var g=this.si,c;c=1*Math.tan(45*Math.PI/360);d*=c;a=-d;b=-c;g||(g=db());var h=d-a,l=c-b;g[0]=2/h;g[1]=0;g[2]=0;g[3]=0;g[4]=0;g[5]=2/l;g[6]=0;g[7]=0;g[8]=(d+a)/h;g[9]=(c+b)/l;g[10]=-1001/999;g[11]=-1;g[12]=0;g[13]=0;g[14]=-2E3/999;g[15]=0;gb(this.Rj,this.Qk,this.Jl,this.Nb);a=[0,0];d=[0,0];this.il(0,0,a);this.il(1,1,d);this.tj[0]=1/(d[0]-a[0]);this.tj[1]=-1/(d[1]-a[1]);a=0;for(d=this.Aa.length;a<d;a++)b=this.Aa[a],b.Cd=r,b.Ok&&(this.C.useProgram(b.Gf),this.C.uniformMatrix4fv(b.Ok,r,this.si));
this.C.useProgram(this.Aa[this.sf].Gf);this.C.bindTexture(this.C.TEXTURE_2D,q);this.Hd=q}};c.prototype.pc=function(){gb(this.Rj,this.Qk,this.Jl,this.Nb);fb(this.Nb,this.tj)};c.prototype.translate=function(a,d){if(!(0===a&&0===d)){this.sd[0]=a;this.sd[1]=d;this.sd[2]=0;var b=this.Nb,g=this.sd,c=g[0],h=g[1],g=g[2];b[12]=b[0]*c+b[4]*h+b[8]*g+b[12];b[13]=b[1]*c+b[5]*h+b[9]*g+b[13];b[14]=b[2]*c+b[6]*h+b[10]*g+b[14];b[15]=b[3]*c+b[7]*h+b[11]*g+b[15]}};c.prototype.scale=function(a,d){1===a&&1===d||(this.sd[0]=
a,this.sd[1]=d,this.sd[2]=1,fb(this.Nb,this.sd))};c.prototype.Ri=function(a){if(0!==a){var d=this.Nb,b,g=Math.sin(a);a=Math.cos(a);var c=d[0],h=d[1],l=d[2],x=d[3],w=d[4],u=d[5],t=d[6],s=d[7];b?d!==b&&(b[8]=d[8],b[9]=d[9],b[10]=d[10],b[11]=d[11],b[12]=d[12],b[13]=d[13],b[14]=d[14],b[15]=d[15]):b=d;b[0]=c*a+w*g;b[1]=h*a+u*g;b[2]=l*a+t*g;b[3]=x*a+s*g;b[4]=c*-g+w*a;b[5]=h*-g+u*a;b[6]=l*-g+t*a;b[7]=x*-g+s*a}};c.prototype.sc=function(){for(var a=r,d=0;16>d;d++)if(this.Hk[d]!==this.Nb[d]){a=n;break}a&&(a=
this.Yb(),a.type=5,a.G?eb(this.Nb,a.G):a.G=db(this.Nb),eb(this.Nb,this.Hk),this.Kb=this.ib=r)};p.prototype.Sm=function(){this.C.bindTexture(this.C.TEXTURE_2D,this.Sd)};p.prototype.Pm=function(){var a=this.cl,d=this.A;d.Zj=a;d=d.Ve;d.pe&&this.C.uniform1f(d.pe,a)};p.prototype.Mm=function(){this.C.drawElements(this.C.TRIANGLES,this.hc,this.C.UNSIGNED_SHORT,2*this.Pb)};p.prototype.Om=function(){this.C.blendFunc(this.Pb,this.hc)};p.prototype.Tm=function(){var a,d,b,c=this.A.Aa,f=this.A.$j;a=0;for(d=c.length;a<
d;a++)b=c[a],a===f&&b.oe?(this.C.uniformMatrix4fv(b.oe,r,this.G),b.Cd=n):b.Cd=r;eb(this.G,this.A.Bh)};p.prototype.Nm=function(){var a=this.C,d=this.A;this.Sd?(a.bindFramebuffer(a.FRAMEBUFFER,d.vn),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,this.Sd,0)):(a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,q,0),a.bindFramebuffer(a.FRAMEBUFFER,q))};p.prototype.Km=function(){var a=this.C;0===this.Pb?(a.clearColor(this.G[0],this.G[1],this.G[2],this.G[3]),a.clear(a.COLOR_BUFFER_BIT)):
(a.enable(a.SCISSOR_TEST),a.scissor(this.G[0],this.G[1],this.G[2],this.G[3]),a.clearColor(0,0,0,0),a.clear(this.C.COLOR_BUFFER_BIT),a.disable(a.SCISSOR_TEST))};p.prototype.Lm=function(){var a=this.C,d=this.A,b=d.Aa[1];a.useProgram(b.Gf);!b.Cd&&b.oe&&(a.uniformMatrix4fv(b.oe,r,d.Bh),b.Cd=n);a.enableVertexAttribArray(b.Mb);a.bindBuffer(a.ARRAY_BUFFER,d.Ei);a.vertexAttribPointer(b.Mb,4,a.FLOAT,r,0,0);a.drawArrays(a.POINTS,this.Pb/4,this.hc);b=d.Ve;a.useProgram(b.Gf);0<=b.Mb&&(a.enableVertexAttribArray(b.Mb),
a.bindBuffer(a.ARRAY_BUFFER,d.Of[d.zc]),a.vertexAttribPointer(b.Mb,2,a.FLOAT,r,0,0));0<=b.hd&&(a.enableVertexAttribArray(b.hd),a.bindBuffer(a.ARRAY_BUFFER,d.Kf[d.zc]),a.vertexAttribPointer(b.hd,2,a.FLOAT,r,0,0))};p.prototype.Qm=function(){var a=this.C,b=this.A,e=b.Aa[this.Pb];b.$j=this.Pb;b.Ve=e;a.useProgram(e.Gf);!e.Cd&&e.oe&&(a.uniformMatrix4fv(e.oe,r,b.Bh),e.Cd=n);e.pe&&a.uniform1f(e.pe,b.Zj);0<=e.Mb&&(a.enableVertexAttribArray(e.Mb),a.bindBuffer(a.ARRAY_BUFFER,b.Of[b.zc]),a.vertexAttribPointer(e.Mb,
2,a.FLOAT,r,0,0));0<=e.hd&&(a.enableVertexAttribArray(e.hd),a.bindBuffer(a.ARRAY_BUFFER,b.Kf[b.zc]),a.vertexAttribPointer(e.hd,2,a.FLOAT,r,0,0))};p.prototype.Rm=function(){var a,b,e=this.A.Ve,c=this.C;e.Cg&&(c.activeTexture(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,this.Sd),c.activeTexture(c.TEXTURE0));e.pi&&c.uniform1f(e.pi,this.G[0]);e.oi&&c.uniform1f(e.oi,this.G[1]);e.ne&&c.uniform2f(e.ne,this.G[2],this.G[3]);e.me&&c.uniform2f(e.me,this.G[4],this.G[5]);e.ni&&c.uniform1f(e.ni,this.G[6]);e.qi&&c.uniform1f(e.qi,
R()/1E3);if(e.D.length){a=0;for(b=e.D.length;a<b;a++)c.uniform1f(e.D[a][1],this.Zi[a])}};c.prototype.Yb=function(){this.wc===this.Xc.length&&this.Xc.push(new p(0,this));return this.Xc[this.wc++]};c.prototype.ad=function(){if(0!==this.wc&&!this.C.isContextLost()){var a=this.C;0<this.Fi&&(a.bindBuffer(a.ARRAY_BUFFER,this.Ei),a.bufferData(a.ARRAY_BUFFER,this.Bo.subarray(0,this.Fi),a.STREAM_DRAW),b&&(0<=b.Mb&&"<point>"===b.name)&&a.vertexAttribPointer(b.Mb,4,a.FLOAT,r,0,0));if(0<this.tc){var b=this.Ve;
a.bindBuffer(a.ARRAY_BUFFER,this.Of[this.zc]);a.bufferData(a.ARRAY_BUFFER,this.sj.subarray(0,this.tc),a.STREAM_DRAW);b&&(0<=b.Mb&&"<point>"!==b.name)&&a.vertexAttribPointer(b.Mb,2,a.FLOAT,r,0,0);a.bindBuffer(a.ARRAY_BUFFER,this.Kf[this.zc]);a.bufferData(a.ARRAY_BUFFER,this.ej.subarray(0,this.tc),a.STREAM_DRAW);b&&(0<=b.hd&&"<point>"!==b.name)&&a.vertexAttribPointer(b.hd,2,a.FLOAT,r,0,0)}for(var e,a=0,b=this.wc;a<b;a++)switch(e=this.Xc[a],e.type){case 1:e.Mm();break;case 2:e.Sm();break;case 3:e.Pm();
break;case 4:e.Om();break;case 5:e.Tm();break;case 6:e.Nm();break;case 7:e.Km();break;case 8:e.Lm();break;case 9:e.Qm();break;case 10:e.Rm()}this.Fi=this.tc=this.wc=0;this.Kb=this.ib=r;this.zc++;4<=this.zc&&(this.zc=0)}};c.prototype.Qd=function(a){if(a!==this.Ik){var b=this.Yb();b.type=3;this.Ik=b.cl=a;this.Kb=this.ib=r}};c.prototype.Cb=function(a){if(a!==this.Hd){var b=this.Yb();b.type=2;this.Hd=b.Sd=a;this.Kb=this.ib=r}};c.prototype.md=function(a,b){if(!(a===this.Jk&&b===this.Gk)){var e=this.Yb();
e.type=4;e.Pb=a;e.hc=b;this.Jk=a;this.Gk=b;this.Kb=this.ib=r}};c.prototype.sl=function(){this.md(this.C.ONE,this.C.ONE_MINUS_SRC_ALPHA)};c.prototype.Mg=function(a,b,e,c,f,h,l,x){15992<=this.tc&&this.ad();var w=this.tc,u=this.sj,t=this.ej;if(this.ib)this.Xc[this.wc-1].hc+=6;else{var s=this.Yb();s.type=1;s.Pb=3*(w/4);s.hc=6;this.ib=n;this.Kb=r}u[w]=a;t[w++]=0;u[w]=b;t[w++]=0;u[w]=e;t[w++]=1;u[w]=c;t[w++]=0;u[w]=f;t[w++]=1;u[w]=h;t[w++]=1;u[w]=l;t[w++]=0;u[w]=x;t[w++]=1;this.tc=w};c.prototype.oc=function(a,
b,e,c,f,h,l,x,w){15992<=this.tc&&this.ad();var u=this.tc,t=this.sj,s=this.ej;if(this.ib)this.Xc[this.wc-1].hc+=6;else{var y=this.Yb();y.type=1;y.Pb=3*(u/4);y.hc=6;this.ib=n;this.Kb=r}t[u]=a;s[u++]=w.left;t[u]=b;s[u++]=w.top;t[u]=e;s[u++]=w.right;t[u]=c;s[u++]=w.top;t[u]=f;s[u++]=w.right;t[u]=h;s[u++]=w.bottom;t[u]=l;s[u++]=w.left;t[u]=x;s[u++]=w.bottom;this.tc=u};c.prototype.qc=function(a){if(this.sf!==a){if(!this.Aa[a]){if(0===this.sf)return;a=0}var b=this.Yb();b.type=9;this.sf=b.Pb=a;this.Kb=this.ib=
r}};c.prototype.Bf=function(a){a=this.Aa[a];return!(!a.ne&&!a.me)};c.prototype.Hi=function(a){return this.Aa[a].Yj};c.prototype.Fo=function(a){a=this.Aa[a];return 0!==a.Gh||0!==a.Hh};c.prototype.In=function(a){return this.Aa[a].Gh};c.prototype.Jn=function(a){return this.Aa[a].Hh};c.prototype.Kn=function(a,b){return this.Aa[a].D[b][2]};c.prototype.Lg=function(a){return this.Aa[a].Mj};c.prototype.ze=function(a,b,e,c,f,h,l,x,w){var u=this.Aa[this.sf];if(u.pi||u.oi||u.qi||u.Cg||u.ne||u.me||u.ni||w.length){u=
this.Yb();u.type=10;u.G?eb(this.Nb,u.G):u.G=db();u.G[0]=b;u.G[1]=e;u.G[2]=c;u.G[3]=f;u.G[4]=h;u.G[5]=l;u.G[6]=x;u.Sd=a;if(w.length){u.Zi.length=w.length;a=0;for(b=w.length;a<b;a++)u.Zi[a]=w[a]}this.Kb=this.ib=r}};c.prototype.clear=function(a,b,e,c){var f=this.Yb();f.type=7;f.Pb=0;f.G||(f.G=db());f.G[0]=a;f.G[1]=b;f.G[2]=e;f.G[3]=c;this.Kb=this.ib=r};c.prototype.clearRect=function(a,b,e,c){var f=this.Yb();f.type=7;f.Pb=1;f.G||(f.G=db());f.G[0]=a;f.G[1]=b;f.G[2]=e;f.G[3]=c;this.Kb=this.ib=r};c.prototype.Eo=
function(){this.ad();this.C.flush()};var b=[];c.prototype.Ag=function(a,d,e,c){this.ad();var f=this.C,h=da(a.width)&&da(a.height),l=f.createTexture();f.bindTexture(f.TEXTURE_2D,l);f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n);var x=f.RGBA,w=f.RGBA,u=f.UNSIGNED_BYTE;if(c)switch(c){case 1:w=x=f.RGB;break;case 2:u=f.UNSIGNED_SHORT_4_4_4_4;break;case 3:u=f.UNSIGNED_SHORT_5_5_5_1;break;case 4:w=x=f.RGB,u=f.UNSIGNED_SHORT_5_6_5}!h&&d?(c=document.createElement("canvas"),c.width=k(a.width),c.height=k(a.height),
c.getContext("2d").drawImage(a,0,0,a.width,a.height,0,0,c.width,c.height),f.texImage2D(f.TEXTURE_2D,0,x,w,u,c)):f.texImage2D(f.TEXTURE_2D,0,x,w,u,a);d?(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.REPEAT),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.REPEAT)):(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE));e?(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR),h?(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,
f.LINEAR_MIPMAP_NEAREST),f.generateMipmap(f.TEXTURE_2D)):f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR)):(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST));f.bindTexture(f.TEXTURE_2D,q);this.Hd=q;l.Ne=a.width;l.Me=a.height;b.push(l);return l};c.prototype.yc=function(a,d,e,c){this.ad();var f=this.C,h=f.createTexture();f.bindTexture(f.TEXTURE_2D,h);f.texImage2D(f.TEXTURE_2D,0,f.RGBA,a,d,0,f.RGBA,c?f.UNSIGNED_SHORT_4_4_4_4:
f.UNSIGNED_BYTE,q);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,e?f.LINEAR:f.NEAREST);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,e?f.LINEAR:f.NEAREST);f.bindTexture(f.TEXTURE_2D,q);this.Hd=q;h.Ne=a;h.Me=d;b.push(h);return h};c.prototype.dp=function(a,b,e){this.ad();var c=this.C;c.bindTexture(c.TEXTURE_2D,b);c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,e?c.UNSIGNED_SHORT_4_4_4_4:
c.UNSIGNED_BYTE,a);c.bindTexture(c.TEXTURE_2D,q);this.Hd=q};c.prototype.deleteTexture=function(a){a&&(this.ad(),this.C.bindTexture(this.C.TEXTURE_2D,q),this.Hd=q,this.C.deleteTexture(a),oa(b,a))};c.prototype.Lc=function(a){if(a!==this.ol){var b=this.Yb();b.type=6;this.ol=b.Sd=a;this.Kb=this.ib=r}};Ma=c})();
(function(){function c(a){if(a&&(a.getContext||a.dc)&&!a.c2runtime){a.c2runtime=this;var b=this;this.fe="undefined"!==typeof window.device&&("undefined"!==typeof window.device.cordova||"undefined"!==typeof window.device.phonegap);this.Hc=!!a.dc;this.hf="undefined"!==typeof window.AppMobi||this.Hc;if(this.Gc=!!window.c2cocoonjs)CocoonJS.App.onSuspended.addEventListener(function(){b.setSuspended(n)}),CocoonJS.App.onActivated.addEventListener(function(){b.setSuspended(r)});this.Va=this.Hc||this.Gc;this.di=
/tizen/i.test(navigator.userAgent);this.xk=/android/i.test(navigator.userAgent)&&!this.di;this.nq=/msie/i.test(navigator.userAgent);this.ug=/iphone/i.test(navigator.userAgent)||/ipod/i.test(navigator.userAgent);this.Ek=/ipad/i.test(navigator.userAgent);this.Dk=this.ug||this.Ek;this.yk=/chrome/i.test(navigator.userAgent)||/chromium/i.test(navigator.userAgent);this.oq=!this.yk&&/safari/i.test(navigator.userAgent);this.io=/windows/i.test(navigator.userAgent);this.Ak="undefined"!==typeof window.c2nodewebkit;
this.fo="undefined"!==typeof window.is_scirra_arcade;this.ko=!!("undefined"!==typeof window.c2isWindows8&&window.c2isWindows8);this.lo=!!("undefined"!==typeof window.c2isWindowsPhone8&&window.c2isWindowsPhone8);this.ho=!!("undefined"!==typeof window.c2isBlackberry10&&window.c2isBlackberry10);this.devicePixelRatio=1;this.cd=this.fe||this.hf||this.Gc||this.xk||this.Dk||this.lo||this.ho||this.di;this.cd||(this.cd=/(blackberry|bb10|playbook|palm|symbian|nokia|windows\s+ce|phone|mobile|tablet)/i.test(navigator.userAgent));
this.canvas=a;this.Sj=document.getElementById("c2canvasdiv");this.U=this.A=this.C=q;this.canvas.oncontextmenu=function(a){a.preventDefault&&a.preventDefault();return r};this.canvas.onselectstart=function(a){a.preventDefault&&a.preventDefault();return r};this.Hc&&(window.c2runtime=this);this.width=a.width;this.height=a.height;this.Jd=this.width;this.Id=this.height;this.V=n;this.lf=r;Date.now||(Date.now=function(){return+new Date});this.plugins=[];this.types={};this.p=[];this.X=[];this.ji={};this.Xb=
[];this.Fh={};this.yd=[];this.Sc=[];this.$g=[];this.qh=[];this.cc=new Fa;this.$h=r;this.Vb=0;this.bi=r;this.ac=[];this.zk=r;this.Jc=this.Wa=this.zg=this.Vi="";this.Jf=this.xl=r;this.ep=this.xh=this.Eg=this.$c=this.Bc=0;this.Ce=1;this.ie=new Ga;this.vg=0;this.Rk=n;this.Hg=this.fg=this.ag=this.Pc=this.tf=this.Jh=0;this.Re=q;this.Xf=[];this.Eh=[];this.Zf=-1;this.ri=[[]];this.nj=this.Dg=0;this.Ji(q);this.qq=[];this.rq=-1;this.Xk=this.xf=0;this.Mk=n;this.Xe=0;this.Ug=[];this.kj=this.Mi=0;this.pf=n;this.Bg=
0;this.qg=r;this.Uo=0;this.kg=r;this.vi=new Fa;this.wi=new Fa;this.nl=[];this.Rd=new Ia([]);this.dj=new Ia([]);this.Uc=[];this.Rf={};this.Zd={};this.Yd={};this.Ee={};this.Oj={};this.Wb=this.Bb=this.Lk=this.xg=this.R=q;this.De=this.ei=r;this.Kh=[q,q];this.Ze=0;this.wn="";this.te={};this.Tg=this.le=q;this.So="";this.load();this.devicePixelRatio=(this.kf=!this.Va&&this.bp&&(this.Dk||this.di))?window.devicePixelRatio||1:1;this.La();var d;"undefined"!==typeof jQuery&&0<this.Jb&&this.setSize(jQuery(window).width(),
jQuery(window).height());try{if(this.Vm&&(this.Gc||!this.Va)){d={depth:r,antialias:!this.cd};var t=n;if(this.yk&&this.io){var s=document.createElement("canvas");if("OES_texture_float,OES_standard_derivatives,WEBKIT_WEBGL_lose_context"===(s.getContext("webgl",d)||s.getContext("experimental-webgl",d)).getSupportedExtensions().toString())t=r}t&&(this.C=a.getContext("webgl",d)||a.getContext("experimental-webgl",d))}}catch(e){}if(this.C){this.Va||(this.cb=document.createElement("canvas"),jQuery(this.cb).appendTo(this.canvas.parentNode),
this.cb.oncontextmenu=F(r),this.cb.onselectstart=F(r),this.cb.width=a.width,this.cb.height=a.height,this.gl(),this.Di=this.cb.getContext("2d"));this.A=new Ma(this.C,this.cd);this.A.Xi(a.width,a.height);this.U=q;this.canvas.addEventListener("webglcontextlost",function(a){a.preventDefault();b.ro();window.cr_setSuspended(n)},r);this.canvas.addEventListener("webglcontextrestored",function(){b.A.tk();b.A.Xi(b.A.width,b.A.height,n);b.Bb=q;b.Wb=q;b.Kh[0]=q;b.Kh[1]=q;b.so();b.V=n;window.cr_setSuspended(r)},
r);var h,c,g,f,l;a=0;for(d=this.p.length;a<d;a++){h=this.p[a];t=0;for(s=h.I.length;t<s;t++)g=h.I[t],g.Ia=this.A.Th(g.id),this.De=this.De||this.A.Bf(g.Ia)}a=0;for(d=this.Xb.length;a<d;a++){f=this.Xb[a];t=0;for(s=f.I.length;t<s;t++)g=f.I[t],g.Ia=this.A.Th(g.id);t=0;for(s=f.O.length;t<s;t++){l=f.O[t];h=0;for(c=l.I.length;h<c;h++)g=l.I[h],g.Ia=this.A.Th(g.id),this.De=this.De||this.A.Bf(g.Ia)}}}else{if(0<this.Jb&&this.Hc){this.canvas=q;document.oncontextmenu=F(r);document.onselectstart=F(r);this.U=AppMobi.canvas.getContext("2d");
try{this.U.samplingMode=this.na?"smooth":"sharp",this.U.globalScale=1,this.U.HTML5CompatibilityMode=n}catch(p){}0!==this.width&&0!==this.height&&(this.U.width=this.width,this.U.height=this.height)}this.U||(this.Gc?(d={antialias:!!this.na},this.U=a.getContext("2d",d)):this.U=a.getContext("2d"),this.U.webkitImageSmoothingEnabled=this.na,this.U.mozImageSmoothingEnabled=this.na,this.U.msImageSmoothingEnabled=this.na,this.U.imageSmoothingEnabled=this.na);this.Di=this.cb=q}this.Cl=function(){b.rc()};this.mg=
r;!this.Va&&!this.ko&&(document.addEventListener("mousedown",function(){b.mg||window.focus();b.mg=n},n),document.addEventListener("touchstart",function(){b.mg||window.focus();b.mg=n},n));"undefined"!==typeof cr_is_preview&&("?continuous"===window.location.search&&(K("Reloading for continuous preview"),this.zg="__c2_continuouspreview",this.Jf=n),this.Ao&&!this.cd&&(jQuery(window).focus(function(){b.setSuspended(r)}),jQuery(window).blur(function(){b.setSuspended(n)})));this.go();this.ea={}}}function m(a){a.target.result.createObjectStore("saves",
{keyPath:"slot"})}function p(a,b,d,t){var s=indexedDB.open("_C2SaveStates");s.onupgradeneeded=m;s.onerror=t;s.onsuccess=function(s){s=s.target.result;s.onerror=t;s.transaction(["saves"],"readwrite").objectStore("saves").put({slot:a,data:b}).onsuccess=d}}function k(a,b,d){var t=indexedDB.open("_C2SaveStates");t.onupgradeneeded=m;t.onerror=d;t.onsuccess=function(s){s=s.target.result;s.onerror=d;var t=s.transaction(["saves"]).objectStore("saves").get(a);t.onsuccess=function(){t.result?b(t.result.data):
b(q)}}}function b(){K("Reloading for continuous preview");"?continuous"===window.location.search?window.location.reload(n):window.location+="?continuous"}function a(a){var b,d={};for(b in a)a.hasOwnProperty(b)&&!(a[b]instanceof Fa)&&"undefined"===typeof a[b].hq&&(d[b]=a[b]);return d}c.prototype.setSize=function(a,b){var d=this.$n&&this.ug&&!navigator.standalone&&!this.Va&&!this.fe,t=0;d&&(this.ug?t=60:this.xk&&(t=56),b+=t);var s=0,e=0,h=0,c=0,g=0,g=this.Jb,f=document.mozFullScreen||document.webkitIsFullScreen||
document.fullScreen||this.qg;f&&0<this.Ze&&(g=this.Ze);4<=g?(h=this.mb/this.lb,a/b>h?(h*=b,5===g?(g=h/this.mb,1<g?g=Math.floor(g):1>g&&(g=1/Math.ceil(1/g)),h=this.mb*g,c=this.lb*g,s=(a-h)/2,e=(b-c)/2,a=h,b=c):(s=(a-h)/2,a=h)):(c=a/h,5===g?(g=c/this.lb,1<g?g=Math.floor(g):1>g&&(g=1/Math.ceil(1/g)),h=this.mb*g,c=this.lb*g,s=(a-h)/2,e=(b-c)/2,a=h):e=(b-c)/2,b=c),f&&!this.Ak&&(e=s=0),s=Math.floor(s),e=Math.floor(e),a=Math.floor(a),b=Math.floor(b)):this.Ak&&(this.qg&&0===this.jk)&&(s=Math.floor((a-this.mb)/
2),e=Math.floor((b-this.lb)/2),a=this.mb,b=this.lb);this.kf&&(this.Ek&&1<this.devicePixelRatio)&&(1024<=a&&(a=1023),1024<=b&&(b=1023));f=this.devicePixelRatio;this.width=a*f;this.height=b*f;this.V=n;this.Sj&&!this.Va&&(jQuery(this.Sj).css({width:a+"px",height:b+"px","margin-left":s,"margin-top":e}),"undefined"!==typeof cr_is_preview&&jQuery("#borderwrap").css({width:a+"px",height:b+"px"}));this.canvas&&(this.canvas.width=a*f,this.canvas.height=b*f,this.kf&&jQuery(this.canvas).css({width:a+"px",height:b+
"px"}));this.cb&&(this.cb.width=a,this.cb.height=b);this.A&&this.A.Xi(a,b);this.Hc&&this.U&&(this.U.width=a,this.U.height=b);this.U&&(this.U.webkitImageSmoothingEnabled=this.na,this.U.mozImageSmoothingEnabled=this.na,this.U.msImageSmoothingEnabled=this.na,this.U.imageSmoothingEnabled=this.na);d&&0<t&&window.setTimeout(function(){window.scrollTo(0,1)},100)};c.prototype.ro=function(){this.ei=n;var a,b,d;a=0;for(b=this.p.length;a<b;a++)d=this.p[a],d.Ig&&d.Ig()};c.prototype.so=function(){this.ei=r;var a,
b,d;a=0;for(b=this.p.length;a<b;a++)d=this.p[a],d.Bi&&d.Bi()};c.prototype.gl=function(){if(!this.Va){var a=document.mozFullScreen||document.webkitIsFullScreen||document.fullScreen||this.qg?jQuery(this.canvas).offset():jQuery(this.canvas).position();a.position="absolute";jQuery(this.cb).css(a)}};var d=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||window.oCancelAnimationFrame;c.prototype.setSuspended=function(a){var b;
if(a&&!this.lf){this.lf=n;0!==this.Mi&&d&&d(this.Mi);0!==this.kj&&clearTimeout(this.kj);a=0;for(b=this.Ug.length;a<b;a++)this.Ug[a](n)}else if(!a&&this.lf){this.lf=r;this.vg=R();this.tf=R();a=this.fg=0;for(b=this.Ug.length;a<b;a++)this.Ug[a](r);this.rc()}};c.prototype.load=function(){var a=ib();this.name=a[0];this.ik=a[1];this.Jb=a[11];this.jk=a[11];this.Va&&4<=a[11]&&(K("[Construct 2] Letterbox scale fullscreen modes are not supported on this platform - falling back to 'Scale outer'"),this.jk=this.Jb=
3);this.qj=a[17];this.vf=a[18];0===this.vf&&(this.le=new Image,this.le.src="logo.png");this.xf=a[20];this.Nc=new V(this);var b,d,t,s,e,h,c,g,f;b=0;for(d=a[2].length;b<d;b++)c=a[2][b],jb(c),f=new c[0](this),f.aj=c[1],f.dd=c[2],f.Uk=c[9],f.Z&&f.Z(),this.plugins.push(f);a=ib();b=0;for(d=a[3].length;b<d;b++){c=a[3][b];e=c[1];f=q;t=0;for(s=this.plugins.length;t<s;t++)if(this.plugins[t]instanceof e){f=this.plugins[t];break}var l=new f.Ma(f);l.name=c[0];l.J=c[2];l.Zh=c[3].slice(0);l.cp=c[3].length;l.Cm=
c[4];l.yn=c[5];l.L=c[11];l.J?(l.Gg=[],l.gc=this.Xe++,l.ba=q):(l.Gg=q,l.gc=-1,l.ba=[]);l.bg=q;l.be=q;l.ek=q;l.zb=r;l.$a=q;c[6]?(l.fj=c[6][0],l.gj=c[6][1],l.hj=c[6][2]):(l.fj=q,l.gj=0,l.hj=0);l.oa=c[7]?c[7]:q;l.index=b;l.i=[];l.Wf=[];l.pd=[new Na(l)];l.Ac=0;l.Hb=q;l.qd=n;l.ah=kb;l.Cn=lb;l.Hn=mb;l.ca=nb;l.Df=ob;l.Ii=pb;l.xe=qb;l.gg=rb;l.Mh=sb;l.Ph=tb;l.Ke=ub;l.ea={};l.toString=vb;l.X=[];t=0;for(s=c[8].length;t<s;t++){g=c[8][t];var p=g[1],k=q;e=0;for(h=this.X.length;e<h;e++)if(this.X[e]instanceof p){k=
this.X[e];break}k||(k=new p(this),k.wf=new Fa,k.Z&&k.Z(),this.X.push(k));e=new k.Ma(k,l);e.name=g[0];e.L=g[2];e.Z();l.X.push(e)}l.global=c[9];l.ai=c[10];l.I=[];t=0;for(s=c[12].length;t<s;t++)l.I.push({id:c[12][t][0],name:c[12][t][1],Ia:-1,uc:n,index:t});(!this.qj||l.J||l.ai||!f.dd)&&l.Z();l.name&&(this.types[l.name]=l);this.p.push(l);f.aj&&(t=new f.xa(l),t.uid=this.xf++,t.kl=this.Xk++,t.ef=0,t.cf=wb,t.toString=xb,t.T=c[13],t.Z(),l.i.push(t))}b=0;for(d=a[4].length;b<d;b++){e=a[4][b];h=this.p[e[0]];
t=1;for(s=e.length;t<s;t++)c=this.p[e[t]],c.ba.push(h),h.Gg.push(c)}b=0;for(d=a[22].length;b<d;b++){e=a[22][b];h=[];t=0;for(s=e.length;t<s;t++)h.push(this.p[e[t]]);t=0;for(s=h.length;t<s;t++)h[t].zb=n,h[t].$a=h}if(0<this.Xe){b=0;for(d=this.p.length;b<d;b++)if(c=this.p[b],!c.J&&c.ba.length){c.bg=Array(this.Xe);c.be=Array(this.Xe);c.ek=Array(this.Xe);l=[];t=k=p=g=0;for(s=c.ba.length;t<s;t++){f=c.ba[t];c.bg[f.gc]=g;g+=f.cp;c.be[f.gc]=p;p+=f.Cm;c.ek[f.gc]=k;k+=f.yn;e=0;for(h=f.I.length;e<h;e++)l.push(la({},
f.I[e]))}c.I=l.concat(c.I);t=0;for(s=c.I.length;t<s;t++)c.I[t].index=t}}b=0;for(d=a[5].length;b<d;b++)c=a[5][b],t=new Oa(this,c),this.ji[t.name]=t,this.Xb.push(t);b=0;for(d=a[6].length;b<d;b++)c=a[6][b],t=new Pa(this,c),this.Fh[t.name]=t,this.yd.push(t);b=0;for(d=this.yd.length;b<d;b++)this.yd[b].qa();b=0;for(d=this.$g.length;b<d;b++)this.$g[b].qa();this.$g.length=0;this.wn=a[7];this.mc=a[8];this.mb=a[9];this.lb=a[10];this.Sf=1;this.Vm=a[12];this.na=a[13];this.Uj=a[14];this.zq=a[15];b=a[16];2===b&&
(b=this.ug?1:0);this.bp=0!==b;this.$n=a[19];this.Ao=a[21];this.If=Date.now()};c.prototype.xn=function(a){var b,d;b=0;for(d=this.Sc.length;b<d;b++)if(this.Sc[b].Fm===a)return this.Sc[b];return q};c.prototype.Nj=function(){var a=0,b=0,d=n,c,s;c=0;for(s=this.Sc.length;c<s;c++){var e=this.Sc[c].Wj;if(!e||0>=e)e=5E4;a+=e;this.Sc[c].complete||this.Sc[c].loaded?b+=e:d=r}this.Nd=0==a?0:b/a;return d};c.prototype.go=function(){if(this.U||this.A){var a=this.U||this.Di;this.cb&&this.gl();this.Nd=0;this.Kk=-1;
if(this.Nj())this.Yn();else{var b=Date.now()-this.If;if(a){if(3!==this.vf&&500<=b&&this.Kk!=this.Nd){a.clearRect(0,0,this.width,this.height);var b=this.width/(2*this.devicePixelRatio),d=this.height/(2*this.devicePixelRatio),c=0===this.vf&&this.le.complete,s=40,e=0,h=80;c&&(h=this.le.width,s=h/2,e=this.le.height/2,a.drawImage(this.le,ha(b-s),ha(d-e)));1>=this.vf?(b=ha(b-s)+0.5,d=ha(d+(e+(c?12:0)))+0.5,a.fillStyle="DodgerBlue",a.fillRect(b,d,Math.floor(h*this.Nd),6),a.strokeStyle="black",a.strokeRect(b,
d,h,6),a.strokeStyle="white",a.strokeRect(b-1,d-1,h+2,8)):2===this.vf&&(a.font="12pt Arial",a.fillStyle="#999",a.wq="middle",c=Math.round(100*this.Nd)+"%",s=a.measureText?a.measureText(c):q,a.fillText(c,b-(s?s.width:0)/2,d))}this.Kk=this.Nd}setTimeout(function(a){return function(){a.go()}}(this),100)}}};c.prototype.Yn=function(){this.cb&&(this.canvas.parentNode.removeChild(this.cb),this.cb=this.Di=q);this.If=Date.now();this.tf=R();var a,b,d;if(this.qj){a=0;for(b=this.p.length;a<b;a++)d=this.p[a],
!d.J&&(!d.ai&&d.pa.dd)&&d.Z()}else this.pf=r;a=0;for(b=this.Xb.length;a<b;a++)this.Xb[a].Gm();2<=this.Jb&&(a=this.mb/this.lb,b=this.width/this.height,this.Sf=2!==this.Jb&&b>a||2===this.Jb&&b<a?this.height/this.lb:this.width/this.mb);this.ik?this.ji[this.ik].bj():this.Xb[0].bj();this.qj||(this.Bg=1,this.trigger(V.prototype.m.Aj,q));this.rc();this.Hc&&AppMobi.webview.execute("onGameReady();")};var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||
window.oRequestAnimationFrame;c.prototype.rc=function(){if(this.fo){var a=jQuery(window).width(),b=jQuery(window).height();if(this.Jd!==a||this.Id!==b)this.Jd=a,this.Id=b,this.setSize(a,b)}a=R();this.pf&&(b=this.Nj(),this.Bg=this.Nd,b&&(this.pf=r,this.Nd=1,this.trigger(V.prototype.m.Aj,q)));this.qo();if((this.V||this.Gc)&&!this.ei&&!this.Jf)this.V=r,this.A?this.Ib():this.ec(),this.Tg&&(this.canvas&&this.canvas.toDataURL&&(this.So=this.canvas.toDataURL(this.Tg[0],this.Tg[1]),this.trigger(V.prototype.m.Xl,
q)),this.Tg=q);this.Pc++;this.ag++;this.fg++;this.Eg+=R()-a;this.lf||(e?this.Mi=e(this.Cl,this.canvas):this.kj=setTimeout(this.Cl,this.cd?1:16))};c.prototype.qo=function(){var a,b,d,c,s,e,h,g,l;a=R();1E3<=a-this.tf&&(this.tf+=1E3,this.Jh=this.fg,this.fg=0,this.xh=this.Eg,this.Eg=0);this.Rk&&(0!==this.vg&&(b=a-this.vg,0===b?(this.ep++,10<=this.Aq&&(this.Rk=r),this.$c=1/60):(this.$c=b/1E3,0.5<this.$c?this.$c=0:0.1<this.$c&&(this.$c=0.1))),this.vg=a);this.Bc=this.$c*this.Ce;this.ie.add(this.Bc);a=document.mozFullScreen||
document.webkitIsFullScreen||document.fullScreen||this.qg;2<=this.Jb||a&&0<this.Ze?(b=this.mb/this.lb,d=this.width/this.height,c=this.Jb,a&&0<this.Ze&&(c=this.Ze),this.Sf=2!==c&&d>b||2===c&&d<b?this.height/this.lb:this.width/this.mb,this.R&&(this.R.Qo(this.R.scrollX),this.R.Ro(this.R.scrollY))):this.Sf=1;this.La();this.Vb++;this.Nc.Jo();this.Vb--;this.La();this.Vb++;a=0;for(b=this.p.length;a<b;a++)if(h=this.p[a],!(h.J||!h.X.length&&!h.ba.length)){d=0;for(c=h.i.length;d<c;d++){g=h.i[d];s=0;for(e=g.N.length;s<
e;s++)g.N[s].rc()}}a=0;for(b=this.p.length;a<b;a++)if(h=this.p[a],!(h.J||!h.X.length&&!h.ba.length)){d=0;for(c=h.i.length;d<c;d++){g=h.i[d];s=0;for(e=g.N.length;s<e;s++)l=g.N[s],l.hl&&l.hl()}}d=this.vi.Vd();a=0;for(b=d.length;a<b;a++)d[a].rc();this.Vb--;this.Zn();for(a=0;this.Re&&10>a++;)this.ck(this.Re);a=0;for(b=this.yd.length;a<b;a++)this.yd[a].Vh=r;this.R.Yf&&this.R.Yf.za();this.nl.length=0;this.Mk=r;this.Vb++;a=0;for(b=this.p.length;a<b;a++)if(h=this.p[a],!(h.J||!h.X.length&&!h.ba.length)){d=
0;for(c=h.i.length;d<c;d++){g=h.i[d];s=0;for(e=g.N.length;s<e;s++)l=g.N[s],l.ij&&l.ij()}}d=this.wi.Vd();a=0;for(b=d.length;a<b;a++)d[a].ij();this.Vb--};c.prototype.ck=function(a){this.R.Vo();var b,d,c,s,e,h,g,l;b=0;for(d=this.p.length;b<d;b++)h=this.p[b],h.pj&&-1===a.ff.indexOf(h)&&h.pj();a.bj();b=0;for(d=this.p.length;b<d;b++)if(h=this.p[b],h.global||h.pa.aj){a=0;for(c=h.i.length;a<c;a++)if(g=h.i[a],g.Ai&&g.Ai(),g.N){s=0;for(e=g.N.length;s<e;s++)l=g.N[s],l.Ai&&l.Ai()}}this.Mk=this.V=n;this.La()};
c.prototype.jj=function(a){this.vi.add(a)};c.prototype.Xo=function(a){this.wi.add(a)};c.prototype.Nh=function(a){return!a||-1===a.Ld?this.Bc:this.$c*a.Ld};c.prototype.ec=function(){this.R.ec(this.U);this.Hc&&this.U.present()};c.prototype.Ib=function(){this.R.Ib(this.A)};c.prototype.zm=function(a){a&&this.Xf.push(a)};c.prototype.Ho=function(a){oa(this.Xf,a)};c.prototype.Sh=function(a){return this.te[a.toString()]};c.prototype.Xd=function(a){var b,d;if(!this.cc.contains(a)){this.cc.add(a);if(a.zb){b=
0;for(d=a.siblings.length;b<d;b++)this.Xd(a.siblings[b])}this.$h&&this.cc.Lf.push(a);this.Vb++;this.trigger(Object.getPrototypeOf(a.type.pa).m.Yl,a);this.Vb--}};c.prototype.La=function(){var a,b,d,c,s,e,h,g,l,f;this.$h=n;c=0;for(e=this.ac.length;c<e;c++){a=this.ac[c];b=a.type;b.i.push(a);b.qd=n;s=0;for(h=b.ba.length;s<h;s++)b.ba[s].i.push(a),b.ba[s].qd=n}this.ac.length=0;e=this.cc.Vd();for(c=0;c<e.length;c++){a=e[c];b=a.type;d=b.i;s=0;for(h=this.Xf.length;s<h;s++)this.Xf[s](a);oa(d,a);a.j&&(ma(a.j.i,
a.yb()),a.j.ub=n);s=0;for(h=b.ba.length;s<h;s++)oa(b.ba[s].i,a),b.ba[s].qd=n;if(a.N){s=0;for(h=a.N.length;s<h;s++)d=a.N[s],d.we&&d.we(),d.Xa.wf.remove(a)}this.vi.remove(a);this.wi.remove(a);s=0;for(h=this.Nc.Db.length;s<h;s++)if(l=this.Nc.Db[s],l.ob.hasOwnProperty(b.index)&&oa(l.ob[b.index].Ed,a),!b.J){d=0;for(g=b.ba.length;d<g;d++)f=b.ba[d],l.ob.hasOwnProperty(f.index)&&oa(l.ob[f.index].Ed,a)}a.we&&a.we();this.te.hasOwnProperty(a.uid.toString())&&delete this.te[a.uid.toString()];this.Hg--;64>b.Wf.length&&
b.Wf.push(a);b.qd=n}this.cc.jf()||(this.V=n);this.cc.clear();this.$h=r};c.prototype.Xj=function(a,b,d,c){if(a.J){var s=ha(Math.random()*a.Gg.length);return this.Xj(a.Gg[s],b,d,c)}return!a.Hb?q:this.Zc(a.Hb,b,r,d,c,r)};var g=[];c.prototype.Zc=function(a,b,d,c,s,h){var e,l,f,p;if(!a)return q;var k=this.p[a[1]],m=k.pa.dd;if(this.pf&&m&&!k.ai||m&&!this.A&&11===a[0][11])return q;m||(b=q);var v;k.Wf.length?(v=k.Wf.pop(),v.Ob=n,k.pa.xa.call(v,k)):(v=new k.pa.xa(k),v.Ob=r);v.uid=d&&!h?a[2]:this.xf++;this.te[v.uid.toString()]=
v;v.kl=this.Xk++;v.ef=0;v.cf=wb;k.qd=n;f=a[3];if(v.Ob){e=0;for(l=f.length;e<l;e++)v.Ra[e]=f[e];Ea(v.ea)}else v.Ra=f.slice(0),v.ea={};if(m){var z=a[0];v.x=ca(c)?z[0]:c;v.y=ca(s)?z[1]:s;v.Ml=z[2];v.width=z[3];v.height=z[4];v.depth=z[5];v.k=z[6];v.opacity=z[7];v.ab=z[8];v.bb=z[9];v.Ya=z[10];e=z[11];!this.A&&k.I.length&&(v.Ya=e);v.Se=Ja(v.Ya);this.C&&Ka(v,v.Ya,this.C);if(v.Ob){e=0;for(l=z[12].length;e<l;e++){f=0;for(p=z[12][e].length;f<p;f++)v.ma[e][f]=z[12][e][f]}v.M.set(0,0,0,0);v.Na.Yi(v.M);v.Tf.length=
0}else{v.ma=z[12].slice(0);e=0;for(l=v.ma.length;e<l;e++)v.ma[e]=z[12][e].slice(0);v.Q=[];v.Tc=[];v.Tc.length=k.I.length;v.M=new ja(0,0,0,0);v.Na=new ka;v.Tf=[];v.r=yb;v.gq=zb;v.Gb=Ab;v.pb=Bb;v.yb=Cb}e=0;for(l=k.I.length;e<l;e++)v.Tc[e]=n;v.Rc=Db;v.Rc();v.Ll=!!v.Q.length;v.sh=n;v.visible=n;v.Ld=-1;v.j=b;v.Wd=b.i.length;"undefined"===typeof v.$&&(v.$=q);this.V=v.Yc=n}v.toString=xb;var B;e=g.length=0;for(l=k.ba.length;e<l;e++)g.push.apply(g,k.ba[e].X);g.push.apply(g,k.X);if(v.Ob){e=0;for(l=g.length;e<
l;e++){var I=g[e];B=v.N[e];B.Ob=n;I.Xa.xa.call(B,I,v);z=a[4][e];f=0;for(p=z.length;f<p;f++)B.T[f]=z[f];B.Z();I.Xa.wf.add(v)}}else{v.N=[];e=0;for(l=g.length;e<l;e++)I=g[e],B=new I.Xa.xa(I,v),B.Ob=r,B.T=a[4][e].slice(0),B.Z(),v.N.push(B),I.Xa.wf.add(v)}z=a[5];if(v.Ob){e=0;for(l=z.length;e<l;e++)v.T[e]=z[e]}else v.T=z.slice(0);this.ac.push(v);b&&b.i.push(v);this.Hg++;if(k.zb){if(v.zb=n,v.Ob?v.siblings.length=0:v.siblings=[],!d&&!h){e=0;for(l=k.$a.length;e<l;e++)if(k.$a[e]!==k){if(!k.$a[e].Hb)return q;
v.siblings.push(this.Zc(k.$a[e].Hb,b,r,m?v.x:c,m?v.y:s,n))}e=0;for(l=v.siblings.length;e<l;e++){v.siblings[e].siblings.push(v);for(f=0;f<l;f++)e!==f&&v.siblings[e].siblings.push(v.siblings[f])}}}else v.zb=r,v.siblings=q;v.Z();e=0;for(l=v.N.length;e<l;e++)v.N[e].Do&&v.N[e].Do();return v};c.prototype.Rh=function(a){var b,d;b=0;for(d=this.R.O.length;b<d;b++){var e=this.R.O[b];if(e.name.toLowerCase()===a.toLowerCase())return e}return q};c.prototype.$e=function(a){a=ha(a);0>a&&(a=0);a>=this.R.O.length&&
(a=this.R.O.length-1);return this.R.O[a]};c.prototype.wh=function(a){var b,d;b=0;for(d=a.length;b<d;b++)a[b].ca().ia=n};c.prototype.Df=function(a){var b,d;b=0;for(d=a.length;b<d;b++)a[b].Df()};c.prototype.Ii=function(a){var b,d;b=0;for(d=a.length;b<d;b++)a[b].Ii()};c.prototype.xe=function(a){var b,d;b=0;for(d=a.length;b<d;b++)a[b].xe()};c.prototype.Wo=function(a,b,d){var e=a.ca(),s,c,h,g,l,f;if(e.ia){e.ia=r;s=e.i.length=0;for(g=a.i.length;s<g;s++)h=a.i[s],h.pb(),l=h.j.fb(b,d,n),f=h.j.fb(b,d,r),h.Gb(l,
f)&&e.i.push(h)}else{s=c=0;for(g=e.i.length;s<g;s++)h=e.i[s],h.pb(),l=h.j.fb(b,d,n),f=h.j.fb(b,d,r),h.Gb(l,f)&&(e.i[c]=e.i[s],c++);e.i.length=c}a.Ke();return e.Uh()};c.prototype.eb=function(a,b){if(!a||!b||a===b||!a.Yc||!b.Yc)return r;a.pb();b.pb();var d=a.j,e=b.j,s,c,h,g,l,f;if(d!==e&&(d.kc!==e.kc||e.lc!==e.lc||d.scale!==e.scale||d.k!==e.k||d.$b!==e.$b)){l=a.$&&!a.$.nf();s=b.$&&!b.$.nf();l?(a.$.Oe(a.width,a.height,a.k),this.Rd.tl(a.$)):this.Rd.Qg(a.Na,a.x,a.y,a.width,a.height);l=this.Rd;s?(b.$.Oe(b.width,
b.height,b.k),this.dj.tl(b.$)):this.dj.Qg(b.Na,b.x,b.y,b.width,b.height);f=this.dj;s=0;for(c=l.Kc;s<c;s++)h=l.Sa[2*s],g=l.Sa[2*s+1],l.Sa[2*s]=d.fa(h+a.x,g+a.y,n),l.Sa[2*s+1]=d.fa(h+a.x,g+a.y,r);s=0;for(c=f.Kc;s<c;s++)h=f.Sa[2*s],g=f.Sa[2*s+1],f.Sa[2*s]=e.fa(h+b.x,g+b.y,n),f.Sa[2*s+1]=e.fa(h+b.x,g+b.y,r);return l.wk(f,0,0)}if(!a.M.eo(b.M)||!a.Na.co(b.Na))return r;l=a.$&&!a.$.nf();s=b.$&&!b.$.nf();if(!l&&!s)return n;l?(a.$.Oe(a.width,a.height,a.k),l=a.$):(this.Rd.Qg(a.Na,a.x,a.y,a.width,a.height),l=
this.Rd);s?(b.$.Oe(b.width,b.height,b.k),f=b.$):(this.Rd.Qg(b.Na,b.x,b.y,b.width,b.height),f=this.Rd);return l.wk(f,b.x-a.x,b.y-a.y)};new ka;c.prototype.Gl=function(a,b){if(!b)return r;var d,e,s,c,h;d=0;for(e=a.X.length;d<e;d++)if(a.X[d].Xa instanceof b)return n;if(!a.J){d=0;for(e=a.ba.length;d<e;d++){h=a.ba[d];s=0;for(c=h.X.length;s<c;s++)if(h.X[s].Xa instanceof b)return n}}return r};c.prototype.Hl=function(a){return this.Gl(a,ab.Gp)};c.prototype.oj=function(a){return this.Gl(a,ab.Hp)};c.prototype.Ln=
function(){if(!Eb)return q;var a,b;a=0;for(b=this.X.length;a<b;a++)if(this.X[a]instanceof Eb)return this.X[a];return q};c.prototype.Ua=function(a){var b=this.Ln();if(!b)return q;var d,e,s=b.wf.Vd(),b=0;for(d=s.length;b<d;++b)if(e=s[b],e.ea.To&&this.eb(a,e))return e;return q};var f=[];c.prototype.Oc=function(a,b){var d=q,e,s;if(!ab.no)return q;e=0;for(s=this.X.length;e<s;e++)if(this.X[e]instanceof ab.no){d=this.X[e];break}if(!d)return q;var c=q;b&&(c=f,c.length=0);var h=d.wf.Vd();e=0;for(s=h.length;e<
s;++e)if(d=h[e],d.ea.pq&&this.eb(a,d))if(b)c.push(d);else return d;return c};c.prototype.nc=function(a,b,d,e,c,h){e=e||50;var g=a.x,l=a.y,f,p=q,k=q;for(f=0;f<e;f++)if(a.x=g+b*f,a.y=l+d*f,a.r(),!this.eb(a,p)&&((p=this.Ua(a))&&(k=p),!p&&(c&&(p=h?this.eb(a,h)?h:q:this.Oc(a))&&(k=p),!p)))return k&&this.Ki(a,b,d,k),n;a.x=g;a.y=l;a.r();return r};c.prototype.Ki=function(a,b,d,e){var c=2,h,g=r;h=r;for(var l=a.x,f=a.y;16>=c;)h=1/c,c*=2,a.x+=b*h*(g?1:-1),a.y+=d*h*(g?1:-1),a.r(),this.eb(a,e)?h=g=n:(h=g=r,l=
a.x,f=a.y);h&&(a.x=l,a.y=f,a.r())};c.prototype.ll=function(a,b){for(var d=ca(b)?100:b,e=0,c=a.x,h=a.y,g=0,l=0,f=0,p=q;e<=d;){switch(g){case 0:l=0;f=-1;e++;break;case 1:l=1;f=-1;break;case 2:l=1;f=0;break;case 3:f=l=1;break;case 4:l=0;f=1;break;case 5:l=-1;f=1;break;case 6:l=-1;f=0;break;case 7:f=l=-1}g=(g+1)%8;a.x=ha(c+l*e);a.y=ha(h+f*e);a.r();if(!this.eb(a,p)&&(p=this.Ua(a),!p))return n}a.x=c;a.y=h;a.r();return r};c.prototype.ye=function(a,b){a.Yc&&b.Yc&&this.nl.push([a,b])};c.prototype.Em=function(a,
b,d){var e=a.x,c=a.y,h=N(10,Ba(b,d,e,c)),g=xa(b,d,e,c),l=this.Ua(a);if(!l)return Q(g+fa);var f=l,p,k,m,v,z=P(5);for(p=1;36>p;p++)if(k=g-p*z,a.x=b+Math.cos(k)*h,a.y=d+Math.sin(k)*h,a.r(),!this.eb(a,f)&&(f=this.Ua(a),!f)){m=k;break}36===p&&(m=Q(g+fa));f=l;for(p=1;36>p;p++)if(k=g+p*z,a.x=b+Math.cos(k)*h,a.y=d+Math.sin(k)*h,a.r(),!this.eb(a,f)&&(f=this.Ua(a),!f)){v=k;break}36===p&&(v=Q(g+fa));a.x=e;a.y=c;a.r();if(v===m)return v;a=ya(v,m)/2;a=Aa(v,m)?Q(m+a+fa):Q(v+a);m=Math.cos(g);g=Math.sin(g);v=Math.cos(a);
a=Math.sin(a);b=m*v+g*a;return xa(0,0,m-2*b*v,g-2*b*a)};var h=[],l=-1;c.prototype.trigger=function(a,b,d){if(!this.R)return r;var e=this.R.Yf;if(!e)return r;l++;l===h.length?h.push(new Fa):h[l].clear();a=this.El(a,b,e,d);l--;return a};c.prototype.El=function(a,b,d,e){var c=h[l];if(c.contains(d))return r;c.add(d);var c=d.sk.Vd(),g=r,f,p,k;f=0;for(p=c.length;f<p;f++)k=this.El(a,b,c[f],e),g=g||k;if(b){k=this.mj(a,b,b.type.name,d,e);g=g||k;f=0;for(p=b.type.ba.length;f<p;f++)k=this.mj(a,b,b.type.ba[f].name,
d,e),g=g||k}else k=this.mj(a,b,"system",d,e),g=g||k;return g};c.prototype.mj=function(a,b,d,e,c){var h,g=r,l=r,l="undefined"!==typeof c,f=(l?e.gk:e.Fl)[d];if(!f)return g;var p=q;e=0;for(h=f.length;e<h;e++)if(f[e].method==a){p=f[e].$f;break}if(!p)return g;a=l?p[c]:p;if(!a)return q;e=0;for(h=a.length;e<h;e++)c=a[e][0],l=a[e][1],l=this.un(b,d,c,l),g=g||l;return g};c.prototype.un=function(a,b,d,e){var c,h,g=r;this.nj++;var f=this.xb().Ub;f&&this.Df(f.nd);var p=1<this.nj;this.Df(d.nd);p&&this.Go();var k=
this.Ji(d);k.Ub=d;a&&(c=this.types[b].ca(),c.ia=r,c.i.length=1,c.i[0]=a,this.types[b].Ke());a=n;if(d.parent){b=k.zl;for(c=d.parent;c;)b.push(c),c=c.parent;b.reverse();c=0;for(h=b.length;c<h;c++)if(!b[c].Lo()){a=r;break}}a&&(this.ag++,d.jc?d.Ko(e):d.za(),g=g||k.ke);this.fl();p&&this.Co();this.xe(d.nd);f&&this.xe(f.nd);0===this.Vb&&(0===l&&!this.bi&&(!this.cc.jf()||this.ac.length))&&this.La();this.nj--;return g};c.prototype.Bn=function(){var a=this.xb();return a.Ub.ta[a.Za]};c.prototype.Go=function(){this.Dg++;
this.Dg>=this.ri.length&&this.ri.push([])};c.prototype.Co=function(){this.Dg--};c.prototype.lk=function(){return this.ri[this.Dg]};c.prototype.Ji=function(a){this.Zf++;this.Zf>=this.Eh.length&&this.Eh.push(new Qa);var b=this.xb();b.reset(a);return b};c.prototype.fl=function(){this.Zf--};c.prototype.xb=function(){return this.Eh[this.Zf]};c.prototype.mk=function(a,b){for(var d,e,c,h,g,l;b;){d=0;for(e=b.Qb.length;d<e;d++)if(l=b.Qb[d],l instanceof Ra&&a.toLowerCase()===l.name.toLowerCase())return l;b=
b.parent}d=0;for(e=this.yd.length;d<e;d++){g=this.yd[d];c=0;for(h=g.bd.length;c<h;c++)if(l=g.bd[c],l instanceof Ra&&a.toLowerCase()===l.name.toLowerCase())return l}return q};c.prototype.nk=function(a){var b,d;b=0;for(d=this.Xb.length;b<d;b++)if(this.Xb[b].L===a)return this.Xb[b];return q};c.prototype.jg=function(a){var b,d;b=0;for(d=this.p.length;b<d;b++)if(this.p[b].L===a)return this.p[b];return q};c.prototype.Dn=function(a){var b,d;b=0;for(d=this.Uc.length;b<d;b++)if(this.Uc[b].L===a)return this.Uc[b];
return q};c.prototype.Zn=function(){var a=this,d=this.Vi,e=this.Jc,c=this.zg,h=r;this.xl&&(h=n,d="__c2_continuouspreview",this.xl=r);if(d.length){this.La();e=this.Po();if(window.indexedDB&&!this.Gc)p(d,e,function(){K("Saved state to IndexedDB storage ("+e.length+" bytes)");a.Jc=e;a.trigger(V.prototype.m.kh,q);a.Jc="";h&&b()},function(c){try{localStorage.setItem("__c2save_"+d,e),K("Saved state to WebStorage ("+e.length+" bytes)"),a.Jc=e,a.trigger(V.prototype.m.kh,q),a.Jc="",h&&b()}catch(g){K("Failed to save game state: "+
c+"; "+g)}});else try{localStorage.setItem("__c2save_"+d,e),K("Saved state to WebStorage ("+e.length+" bytes)"),a.Jc=e,this.trigger(V.prototype.m.kh,q),a.Jc="",h&&b()}catch(g){K("Error saving to WebStorage: "+g)}this.Wa=this.zg=this.Vi=""}c.length&&(window.indexedDB&&!this.Gc?k(c,function(b){b?(a.Wa=b,K("Loaded state from IndexedDB storage ("+a.Wa.length+" bytes)")):(a.Wa=localStorage.getItem("__c2save_"+c)||"",K("Loaded state from WebStorage ("+a.Wa.length+" bytes)"));a.Jf=r;a.Wa.length||a.trigger(V.prototype.m.jh,
q)},function(){a.Wa=localStorage.getItem("__c2save_"+c)||"";K("Loaded state from WebStorage ("+a.Wa.length+" bytes)");a.Jf=r;a.Wa.length||a.trigger(V.prototype.m.jh,q)}):(this.Wa=localStorage.getItem("__c2save_"+c)||"",K("Loaded state from WebStorage ("+this.Wa.length+" bytes)"),this.Jf=r,a.Wa.length||a.trigger(V.prototype.m.jh,q)),this.Vi=this.zg="");this.Wa.length&&(this.La(),this.po(this.Wa),this.Jc=this.Wa,this.trigger(V.prototype.m.gm,q),this.Wa=this.Jc="")};c.prototype.Po=function(){var b,d,
e,c,h,g,l,f={c2save:n,version:1,rt:{time:this.ie.rd,timescale:this.Ce,tickcount:this.Pc,execcount:this.ag,next_uid:this.xf,running_layout:this.R.L,start_time_offset:Date.now()-this.If},types:{},layouts:{},events:{groups:{},cnds:{},acts:{},vars:{}}};b=0;for(d=this.p.length;b<d;b++)if(h=this.p[b],!h.J&&!this.Hl(h)){g={instances:[]};Da(h.ea)&&(g.ex=a(h.ea));e=0;for(c=h.i.length;e<c;e++)g.instances.push(this.rl(h.i[e]));f.types[h.L.toString()]=g}b=0;for(d=this.Xb.length;b<d;b++)e=this.Xb[b],f.layouts[e.L.toString()]=
e.nb();c=f.events.groups;b=0;for(d=this.Uc.length;b<d;b++)e=this.Uc[b],c[e.L.toString()]=!!this.Rf[e.df];d=f.events.cnds;for(l in this.Zd)this.Zd.hasOwnProperty(l)&&(b=this.Zd[l],Da(b.ea)&&(d[l]={ex:b.ea}));d=f.events.acts;for(l in this.Yd)this.Yd.hasOwnProperty(l)&&(b=this.Yd[l],Da(b.ea)&&(d[l]={ex:b.ea}));d=f.events.vars;for(l in this.Ee)if(this.Ee.hasOwnProperty(l)&&(b=this.Ee[l],!b.rg&&(!b.parent||b.of)))d[l]=b.data;f.system=this.Nc.nb();return JSON.stringify(f)};c.prototype.ml=function(){var a,
b,d,e,c,h;this.te={};a=0;for(b=this.p.length;a<b;a++)if(d=this.p[a],!d.J){e=0;for(c=d.i.length;e<c;e++)h=d.i[e],this.te[h.uid.toString()]=h}};c.prototype.po=function(a){a=JSON.parse(a);if(a.c2save&&!(1<a.version)){var b=a.rt;this.ie.reset();this.ie.rd=b.time;this.Ce=b.timescale;this.Pc=b.tickcount;this.ag=b.execcount;this.If=Date.now()-b.start_time_offset;var d=b.running_layout;if(d!==this.R.L)if(d=this.nk(d))this.ck(d);else return;this.zk=n;var e,c,h,g,l,f,p;f=a.types;for(c in f)if(f.hasOwnProperty(c)&&
(g=this.jg(parseInt(c,10)))&&!g.J&&!this.Hl(g)){f[c].ex?g.ea=f[c].ex:Ea(g.ea);l=g.i;h=f[c].instances;d=0;for(e=O(l.length,h.length);d<e;d++)this.mi(l[d],h[d]);d=h.length;for(e=l.length;d<e;d++)this.Xd(l[d]);d=l.length;for(e=h.length;d<e;d++){l=q;if(g.pa.dd&&(l=this.R.hg(h[d].w.l),!l))continue;l=this.Zc(g.Hb,l,r,0,0,n);this.mi(l,h[d])}g.qd=n}this.La();this.ml();e=a.layouts;for(c in e)e.hasOwnProperty(c)&&(d=this.nk(parseInt(c,10)))&&d.Lb(e[c]);e=a.events.groups;for(c in e)e.hasOwnProperty(c)&&(d=this.Dn(parseInt(c,
10)))&&(this.Rf[d.df]=e[c]);d=a.events.cnds;for(c in d)d.hasOwnProperty(c)&&this.Zd.hasOwnProperty(c)&&(this.Zd[c].ea=d[c].ex);d=a.events.acts;for(c in d)d.hasOwnProperty(c)&&this.Yd.hasOwnProperty(c)&&(this.Yd[c].ea=d[c].ex);d=a.events.vars;for(c in d)d.hasOwnProperty(c)&&this.Ee.hasOwnProperty(c)&&(this.Ee[c].data=d[c]);this.xf=b.next_uid;this.zk=r;this.Nc.Lb(a.system);d=0;for(e=this.p.length;d<e;d++)if(g=this.p[d],!g.J){c=0;for(a=g.i.length;c<a;c++){l=g.i[c];if(g.zb){f=l.cf();b=l.siblings.length=
0;for(h=g.$a.length;b<h;b++)p=g.$a[b],g!==p&&l.siblings.push(p.i[f])}l.Je&&l.Je();if(l.N){b=0;for(h=l.N.length;b<h;b++)f=l.N[b],f.Je&&f.Je()}}}this.V=n}};c.prototype.rl=function(b){var d,e,c,h,g;h=b.type;c=h.pa;var l={uid:b.uid};Da(b.ea)&&(l.ex=a(b.ea));if(b.Ra&&b.Ra.length){l.ivs={};d=0;for(e=b.Ra.length;d<e;d++)l.ivs[b.type.Zh[d].toString()]=b.Ra[d]}if(c.dd){c={x:b.x,y:b.y,w:b.width,h:b.height,l:b.j.L,zi:b.yb()};0!==b.k&&(c.a=b.k);1!==b.opacity&&(c.o=b.opacity);0.5!==b.ab&&(c.hX=b.ab);0.5!==b.bb&&
(c.hY=b.bb);0!==b.Ya&&(c.bm=b.Ya);b.visible||(c.v=b.visible);b.Yc||(c.ce=b.Yc);-1!==b.Ld&&(c.mts=b.Ld);if(h.I.length){c.fx=[];d=0;for(e=h.I.length;d<e;d++)g=h.I[d],c.fx.push({name:g.name,active:b.Tc[g.index],params:b.ma[g.index]})}l.w=c}if(b.N&&b.N.length){l.behs={};d=0;for(e=b.N.length;d<e;d++)h=b.N[d],h.nb&&(l.behs[h.type.L.toString()]=h.nb())}b.nb&&(l.data=b.nb());return l};c.prototype.Fn=function(a,b){var d,e;d=0;for(e=a.Zh.length;d<e;d++)if(a.Zh[d]===b)return d;return-1};c.prototype.An=function(a,
b){var d,e;d=0;for(e=a.N.length;d<e;d++)if(a.N[d].type.L===b)return d;return-1};c.prototype.mi=function(a,b){var d,e,c,h,g,l;l=a.type;c=l.pa;a.uid=b.uid;b.ex?a.ea=b.ex:Ea(a.ea);if(e=b.ivs)for(d in e)e.hasOwnProperty(d)&&(h=this.Fn(l,parseInt(d,10)),0>h||h>=a.Ra.length||(a.Ra[h]=e[d]));if(c.dd){h=b.w;a.j.L!==h.l&&(e=a.j,a.j=this.R.hg(h.l),a.j?(a.j.i.push(a),a.j.ub=n,oa(e.i,a),e.ub=n):(a.j=e,this.Xd(a)));a.x=h.x;a.y=h.y;a.width=h.w;a.height=h.h;a.Wd=h.zi;a.k=h.hasOwnProperty("a")?h.a:0;a.opacity=h.hasOwnProperty("o")?
h.o:1;a.ab=h.hasOwnProperty("hX")?h.hX:0.5;a.bb=h.hasOwnProperty("hY")?h.hY:0.5;a.visible=h.hasOwnProperty("v")?h.v:n;a.Yc=h.hasOwnProperty("ce")?h.ce:n;a.Ld=h.hasOwnProperty("mts")?h.mts:-1;a.Ya=h.hasOwnProperty("bm")?h.bm:0;a.Se=Ja(a.Ya);this.C&&Ka(a,a.Ya,this.C);a.r();if(h.hasOwnProperty("fx")){e=0;for(c=h.fx.length;e<c;e++)g=l.Ph(h.fx[e].name),0>g||(a.Tc[g]=h.fx[e].active,a.ma[g]=h.fx[e].params)}a.Rc()}if(l=b.behs)for(d in l)l.hasOwnProperty(d)&&(h=this.An(a,parseInt(d,10)),0>h||a.N[h].Lb(l[d]));
b.data&&a.Lb(b.data)};Sa=function(a){return new c(document.getElementById(a))};Ta=function(a,b){return new c({dc:n,width:a,height:b})};window.cr_createRuntime=Sa;window.cr_createDCRuntime=Ta;window.createCocoonJSRuntime=function(){window.c2cocoonjs=n;var a=document.createElement("screencanvas");document.body.appendChild(a);a=new c(a);window.c2runtime=a;window.addEventListener("orientationchange",function(){window.c2runtime.setSize(window.innerWidth,window.innerHeight)});return a}})();
window.cr_getC2Runtime=function(){var c=document.getElementById("c2canvas");return c?c.c2runtime:window.c2runtime?window.c2runtime:q};window.cr_sizeCanvas=function(c,m){if(!(0===c||0===m)){var p=window.cr_getC2Runtime();p&&p.setSize(c,m)}};window.cr_setSuspended=function(c){var m=window.cr_getC2Runtime();m&&m.setSuspended(c)};
(function(){function c(b,a){this.b=b;this.Yf=q;this.scrollX=this.b.mb/2;this.scrollY=this.b.lb/2;this.scale=1;this.k=0;this.Ye=n;this.name=a[0];this.width=a[1];this.height=a[2];this.Il=a[3];this.wl=a[4];this.L=a[5];var d=a[6],e,c;this.O=[];this.ff=[];e=0;for(c=d.length;e<c;e++){var f=new Ua(this,d[e]);f.Yk=e;this.O.push(f)}d=a[7];this.Dd=[];e=0;for(c=d.length;e<c;e++){var f=d[e],h=this.b.p[f[1]];h.Hb||(h.Hb=f);this.Dd.push(f);-1===this.ff.indexOf(h)&&this.ff.push(h)}this.I=[];this.Q=[];this.ma=[];
e=0;for(c=a[8].length;e<c;e++)this.I.push({id:a[8][e][0],name:a[8][e][1],Ia:-1,uc:n,index:e}),this.ma.push(a[8][e][2].slice(0));this.Rc();this.kd=new ja(0,0,1,1);this.Ni=new ja(0,0,1,1);this.jd={}}function m(b,a){this.Y=b;this.b=b.b;this.i=[];this.scale=1;this.k=0;this.xd=r;this.Qc=new ja(0,0,0,0);this.Dl=new ka;this.qb=this.tb=this.sb=this.rb=0;this.ub=r;this.name=a[0];this.index=a[1];this.L=a[2];this.visible=a[3];this.Wc=a[4];this.Ud=a[5];this.kc=a[6];this.lc=a[7];this.opacity=a[8];this.Ih=a[9];
this.$b=a[10];this.Ya=a[11];this.Um=a[12];this.Se="source-over";this.Oa=this.Ta=0;this.ld=r;var d=a[13],e,c;this.ee=[];e=0;for(c=d.length;e<c;e++){var f=d[e],h=this.b.p[f[1]];h.Hb||(h.Hb=f);this.ee.push(f);-1===this.Y.ff.indexOf(h)&&this.Y.ff.push(h)}this.I=[];this.Q=[];this.ma=[];e=0;for(c=a[14].length;e<c;e++)this.I.push({id:a[14][e][0],name:a[14][e][1],Ia:-1,uc:n,index:e}),this.ma.push(a[14][e][2].slice(0));this.Rc();this.kd=new ja(0,0,1,1);this.Ni=new ja(0,0,1,1)}function p(b,a){return b.Wd-a.Wd}
c.prototype.Oo=function(b){var a=b.type.L.toString();this.jd.hasOwnProperty(a)||(this.jd[a]=[]);this.jd[a].push(this.b.rl(b))};c.prototype.pk=function(){var b=this.O[0];return!b.Ud&&1===b.opacity&&!b.Ih&&b.visible};c.prototype.Rc=function(){this.Q.length=0;var b,a,d;b=0;for(a=this.I.length;b<a;b++)d=this.I[b],d.uc&&this.Q.push(d)};c.prototype.Oh=function(b){var a,d,e;a=0;for(d=this.I.length;a<d;a++)if(e=this.I[a],e.name===b)return e;return q};var k=[];c.prototype.bj=function(){this.wl&&(this.Yf=this.b.Fh[this.wl]);
this.b.R=this;this.scrollX=this.b.mb/2;this.scrollY=this.b.lb/2;var b,a,d,e,c,f,h;b=0;for(d=this.b.p.length;b<d;b++)if(a=this.b.p[b],!a.J){c=a.i;a=0;for(e=c.length;a<e;a++)if(f=c[a],f.j){var l=f.j.Yk;l>=this.O.length&&(l=this.O.length-1);f.j=this.O[l];f.j.i.push(f);f.j.ub=n}}b=k.length=0;for(d=this.O.length;b<d;b++)f=this.O[b],f.Hm(),f.xd=n,a=f.fb(0,0,n),e=f.fb(0,0,r),f.xd=r,this.b.mc&&(a=a+0.5|0,e=e+0.5|0),f.Qi(a,e,q);c=r;if(!this.Ye){for(h in this.jd)if(this.jd.hasOwnProperty(h)&&(a=this.b.jg(parseInt(h,
10)))&&!a.J&&this.b.oj(a)){e=this.jd[h];b=0;for(d=e.length;b<d;b++){f=q;if(a.pa.dd&&(f=this.hg(e[b].w.l),!f))continue;f=this.b.Zc(a.Hb,f,r,0,0,n);this.b.mi(f,e[b]);c=n;k.push(f)}e.length=0}b=0;for(d=this.O.length;b<d;b++)this.O[b].i.sort(p),this.O[b].ub=n}c&&(this.b.La(),this.b.ml());for(b=0;b<k.length;b++)if(f=k[b],f.type.zb){d=f.cf();a=0;for(e=f.type.$a.length;a<e;a++)h=f.type.$a[a],f.type!==h&&(h.i.length>d?f.siblings.push(h.i[d]):h.Hb&&(c=this.b.Zc(h.Hb,f.j,n,f.x,f.y,n),this.b.La(),h.ah(),f.siblings.push(c),
k.push(c)))}b=0;for(d=this.Dd.length;b<d;b++)this.b.Zc(this.Dd[b],q,n);this.b.Re=q;this.b.La();if(this.b.U&&!this.b.Va){b=0;for(d=this.b.p.length;b<d;b++)h=this.b.p[b],!h.J&&(h.i.length&&h.Gi)&&h.Gi(this.b.U)}b=0;for(d=k.length;b<d;b++)f=k[b],this.b.trigger(Object.getPrototypeOf(f.type.pa).m.ih,f);k.length=0;this.b.trigger(V.prototype.m.zj,q);this.Ye=r};c.prototype.Gm=function(){var b,a,d,e,c;a=b=0;for(d=this.Dd.length;b<d;b++)e=this.Dd[b],c=this.b.p[e[1]],c.global?this.b.Zc(e,q,n):(this.Dd[a]=e,
a++);this.Dd.length=a};c.prototype.Vo=function(){this.b.trigger(V.prototype.m.fm,q);this.b.Nc.Db.length=0;var b,a,d,e,c,f;b=0;for(a=this.O.length;b<a;b++){c=this.O[b].i;d=0;for(e=c.length;d<e;d++)f=c[d],f.type.global||(this.b.oj(f.type)&&this.Oo(f),this.b.Xd(f));this.b.La();c.length=0;this.O[b].ub=n}b=0;for(a=this.b.p.length;b<a;b++)if(c=this.b.p[b],!c.global&&!c.pa.dd&&!c.pa.aj&&!c.J){d=0;for(e=c.i.length;d<e;d++)this.b.Xd(c.i[d]);this.b.La()}};c.prototype.ec=function(b){b.globalAlpha=1;b.globalCompositeOperation=
"source-over";this.b.Uj&&!this.pk()&&b.clearRect(0,0,this.b.width,this.b.height);var a,d,e;a=0;for(d=this.O.length;a<d;a++)e=this.O[a],e.visible&&(0<e.opacity&&11!==e.Ya)&&e.ec(b)};c.prototype.Ib=function(b){var a=0<this.Q.length||this.b.De;if(a){this.b.Wb||(this.b.Wb=b.yc(this.b.width,this.b.height,this.b.na));if(this.b.Wb.Ne!==this.b.width||this.b.Wb.Me!==this.b.height)b.deleteTexture(this.b.Wb),this.b.Wb=b.yc(this.b.width,this.b.height,this.b.na);b.Lc(this.b.Wb)}this.b.Uj&&!this.pk()&&b.clear(0,
0,0,0);var d,e;d=0;for(e=this.O.length;d<e;d++)this.O[d].visible&&0<this.O[d].opacity&&this.O[d].Ib(b);a&&(1>=this.Q.length?(1===this.Q.length?(a=this.Q[0].index,b.qc(this.Q[0].Ia),b.ze(q,1/this.b.width,1/this.b.height,0,0,1,1,this.scale,this.ma[a]),b.Lg(this.Q[0].Ia)&&(this.b.V=n)):b.qc(0),b.Lc(q),b.Qd(1),b.Cb(this.b.Wb),b.sl(),b.pc(),b.sc(),a=this.b.width/2,d=this.b.height/2,b.Mg(-a,d,a,d,a,-d,-a,-d),b.Cb(q)):this.Oi(b,q,q,q));b.Eo()};c.prototype.bf=function(){return 0<this.Q.length||this.b.De?
this.b.Wb:q};c.prototype.ok=function(){var b=this.O[0].hb(),a,d,e;a=1;for(d=this.O.length;a<d;a++)e=this.O[a],0===e.kc&&0===e.lc||e.hb()<b&&(b=e.hb());return b};c.prototype.Qo=function(b){if(!this.Il){var a=this.b.width*(1/this.ok())/2;b>this.width-a&&(b=this.width-a);b<a&&(b=a)}this.scrollX!==b&&(this.scrollX=b,this.b.V=n)};c.prototype.Ro=function(b){if(!this.Il){var a=this.b.height*(1/this.ok())/2;b>this.height-a&&(b=this.height-a);b<a&&(b=a)}this.scrollY!==b&&(this.scrollY=b,this.b.V=n)};c.prototype.Oi=
function(b,a,d,e){var c=d?d.Q:a?a.Q:this.Q,f=d?d.j.hb():a?a.hb():1,h=this.b.Kh,l,p,w,k,t=0,s=1,y,m=this.b.width,E=this.b.height,S=m/2,ga=E/2,G=a?a.kd:this.kd,D=a?a.Ni:this.Ni,v=0,z=0,B=0,I=0,J=m,pa=m,H=E,qa=E,ba=w=0,sa=d?d.j.Dc():0;if(d){l=0;for(p=c.length;l<p;l++)w+=b.In(c[l].Ia),ba+=b.Jn(c[l].Ia);k=d.M;v=a.fa(k.left,k.top,n);B=a.fa(k.left,k.top,r);J=a.fa(k.right,k.bottom,n);H=a.fa(k.right,k.bottom,r);0!==sa&&(l=a.fa(k.right,k.top,n),p=a.fa(k.right,k.top,r),z=a.fa(k.left,k.bottom,n),I=a.fa(k.left,
k.bottom,r),k=Math.min(v,J,l,z),J=Math.max(v,J,l,z),v=k,k=Math.min(B,H,p,I),H=Math.max(B,H,p,I),B=k);v-=w;B-=ba;J+=w;H+=ba;D.left=v/m;D.top=1-B/E;D.right=J/m;D.bottom=1-H/E;z=v=Math.floor(v);I=B=Math.floor(B);pa=J=Math.ceil(J);qa=H=Math.ceil(H);z-=w;I-=ba;pa+=w;qa+=ba;0>v&&(v=0);0>B&&(B=0);J>m&&(J=m);H>E&&(H=E);0>z&&(z=0);0>I&&(I=0);pa>m&&(pa=m);qa>E&&(qa=E);G.left=v/m;G.top=1-B/E;G.right=J/m;G.bottom=1-H/E}else G.left=D.left=0,G.top=D.top=0,G.right=D.right=1,G.bottom=D.bottom=1;ba=d&&((d.k||sa)&&
b.Bf(c[0].Ia)||0!==w||0!==ba||1!==d.opacity||d.type.pa.Uk)||a&&!d&&1!==a.opacity;b.sl();if(ba){h[t]||(h[t]=b.yc(m,E,this.b.na));if(h[t].Ne!==m||h[t].Me!==E)b.deleteTexture(h[t]),h[t]=b.yc(m,E,this.b.na);b.qc(0);b.Lc(h[t]);y=qa-I;b.clearRect(z,E-I-y,pa-z,y);d?d.Ib(b):(b.Cb(this.b.Bb),b.Qd(a.opacity),b.pc(),b.translate(-S,-ga),b.sc(),b.oc(v,H,J,H,J,B,v,B,G));D.left=D.top=0;D.right=D.bottom=1;d&&(k=G.top,G.top=G.bottom,G.bottom=k);t=1;s=0}b.Qd(1);w=c.length-1;var sa=b.Hi(c[w].Ia),ta=0;l=0;for(p=c.length;l<
p;l++){h[t]||(h[t]=b.yc(m,E,this.b.na));if(h[t].Ne!==m||h[t].Me!==E)b.deleteTexture(h[t]),h[t]=b.yc(m,E,this.b.na);b.qc(c[l].Ia);ta=c[l].index;b.Lg(c[l].Ia)&&(this.b.V=n);0==l&&!ba?(b.Lc(h[t]),y=qa-I,k=E-I-y,b.clearRect(z,k,pa-z,y),d?(b.ze(e,1/d.width,1/d.height,D.left,D.top,D.right,D.bottom,f,d.ma[ta]),d.Ib(b)):(b.ze(e,1/m,1/E,0,0,1,1,f,a?a.ma[ta]:this.ma[ta]),b.Cb(a?this.b.Bb:this.b.Wb),b.pc(),b.translate(-S,-ga),b.sc(),b.oc(v,H,J,H,J,B,v,B,G)),D.left=D.top=0,D.right=D.bottom=1,d&&!sa&&(k=H,H=B,
B=k)):(b.ze(e,1/m,1/E,D.left,D.top,D.right,D.bottom,f,d?d.ma[ta]:a?a.ma[ta]:this.ma[ta]),l===w&&!sa?(d?b.md(d.Ta,d.Oa):a&&b.md(a.Ta,a.Oa),b.Lc(e)):(b.Lc(h[t]),y=qa-I,k=E-I-y,b.clearRect(z,k,pa-z,y)),b.Cb(h[s]),b.pc(),b.translate(-S,-ga),b.sc(),b.oc(v,H,J,H,J,B,v,B,G),l===w&&!sa&&b.Cb(q));t=0===t?1:0;s=0===t?1:0}sa&&(b.qc(0),d?b.md(d.Ta,d.Oa):a&&b.md(a.Ta,a.Oa),b.Lc(e),b.Cb(h[s]),b.pc(),b.translate(-S,-ga),b.sc(),d&&1===c.length&&!ba?b.oc(v,B,J,B,J,H,v,H,G):b.oc(v,H,J,H,J,B,v,B,G),b.Cb(q))};c.prototype.hg=
function(b){var a,d;a=0;for(d=this.O.length;a<d;a++)if(this.O[a].L===b)return this.O[a];return q};c.prototype.nb=function(){var b,a,d,e={sx:this.scrollX,sy:this.scrollY,s:this.scale,a:this.k,w:this.width,h:this.height,fv:this.Ye,persist:this.jd,fx:[],layers:{}};b=0;for(a=this.I.length;b<a;b++)d=this.I[b],e.fx.push({name:d.name,active:d.uc,params:this.ma[d.index]});b=0;for(a=this.O.length;b<a;b++)d=this.O[b],e.layers[d.L.toString()]=d.nb();return e};c.prototype.Lb=function(b){var a,d,e,c;this.scrollX=
b.sx;this.scrollY=b.sy;this.scale=b.s;this.k=b.a;this.width=b.w;this.height=b.h;this.jd=b.persist;"undefined"!==typeof b.fv&&(this.Ye=b.fv);var f=b.fx;a=0;for(d=f.length;a<d;a++)if(e=this.Oh(f[a].name))e.uc=f[a].active,this.ma[e.index]=f[a].params;this.Rc();a=b.layers;for(c in a)a.hasOwnProperty(c)&&(b=this.hg(parseInt(c,10)))&&b.Lb(a[c])};Oa=c;m.prototype.Rc=function(){this.Q.length=0;var b,a,d;b=0;for(a=this.I.length;b<a;b++)d=this.I[b],d.uc&&this.Q.push(d)};m.prototype.Oh=function(b){var a,d,e;
a=0;for(d=this.I.length;a<d;a++)if(e=this.I[a],e.name===b)return e;return q};m.prototype.Hm=function(){var b,a,d,e,c,f;a=b=0;for(d=this.ee.length;b<d;b++){e=this.ee[b];c=this.b.p[e[1]];f=this.b.oj(c);c=n;if(!f||this.Y.Ye)e=this.b.Zc(e,this,n),k.push(e),e.type.global&&(c=r);c&&(this.ee[a]=this.ee[b],a++)}this.ee.length=a;this.b.La();!this.b.A&&this.I.length&&(this.Ya=this.Um);this.Se=Ja(this.Ya);this.b.C&&Ka(this,this.Ya,this.b.C)};m.prototype.Yo=function(){if(this.ub){var b,a;b=0;for(a=this.i.length;b<
a;b++)this.i[b].Wd=b;this.ub=r}};m.prototype.hb=function(){return this.Gn()*this.b.Sf};m.prototype.Gn=function(){return(this.scale*this.Y.scale-1)*this.$b+1};m.prototype.Dc=function(){return this.xd?0:Q(this.Y.k+this.k)};m.prototype.ec=function(b){this.ld=this.Ih||1!==this.opacity||0!==this.Ya;var a=this.b.canvas,d=b;b.globalAlpha=1;b.globalCompositeOperation="source-over";this.ld&&(this.b.xg||(this.b.xg=document.createElement("canvas"),a=this.b.xg,a.width=this.b.width,a.height=this.b.height,this.b.Lk=
a.getContext("2d")),a=this.b.xg,d=this.b.Lk,a.width!==this.b.width&&(a.width=this.b.width),a.height!==this.b.height&&(a.height=this.b.height),this.Ud&&d.clearRect(0,0,this.b.width,this.b.height));this.Ud||(d.fillStyle="rgb("+this.Wc[0]+","+this.Wc[1]+","+this.Wc[2]+")",d.fillRect(0,0,this.b.width,this.b.height));d.save();this.xd=n;var e=this.fb(0,0,n),c=this.fb(0,0,r);this.xd=r;this.b.mc&&(e=e+0.5|0,c=c+0.5|0);this.Qi(e,c,d);var f=this.hb();d.scale(f,f);d.translate(-e,-c);for(var h,e=0,c=this.i.length;e<
c;e++)if(f=this.i[e],f.visible&&!(0===f.width||0===f.height))f.pb(),h=f.M,h.right<this.rb||(h.bottom<this.tb||h.left>this.sb||h.top>this.qb)||(d.globalCompositeOperation=f.Se,f.ec(d));d.restore();this.ld&&(b.globalCompositeOperation=this.Se,b.globalAlpha=this.opacity,b.drawImage(a,0,0))};m.prototype.Qi=function(b,a,d){var c=this.hb();this.rb=b;this.tb=a;this.sb=b+this.b.width*(1/c);this.qb=a+this.b.height*(1/c);b=this.Dc();0!==b&&(d&&(d.translate(this.b.width/2,this.b.height/2),d.rotate(-b),d.translate(this.b.width/
-2,this.b.height/-2)),this.Qc.set(this.rb,this.tb,this.sb,this.qb),this.Qc.offset((this.rb+this.sb)/-2,(this.tb+this.qb)/-2),this.Dl.ul(this.Qc,b),this.Dl.Pj(this.Qc),this.Qc.offset((this.rb+this.sb)/2,(this.tb+this.qb)/2),this.rb=this.Qc.left,this.tb=this.Qc.top,this.sb=this.Qc.right,this.qb=this.Qc.bottom)};m.prototype.Ib=function(b){var a=this.b.width,d=this.b.height,c=0,g=0;if(this.ld=this.Ih||1!==this.opacity||0<this.Q.length||0!==this.Ya){this.b.Bb||(this.b.Bb=b.yc(this.b.width,this.b.height,
this.b.na));if(this.b.Bb.Ne!==this.b.width||this.b.Bb.Me!==this.b.height)b.deleteTexture(this.b.Bb),this.b.Bb=b.yc(this.b.width,this.b.height,this.b.na);b.Lc(this.b.Bb);this.Ud&&b.clear(0,0,0,0)}this.Ud||b.clear(this.Wc[0]/255,this.Wc[1]/255,this.Wc[2]/255,1);this.xd=n;var g=this.fb(0,0,n),f=this.fb(0,0,r);this.xd=r;this.b.mc&&(g=g+0.5|0,f=f+0.5|0);this.Qi(g,f,q);f=this.hb();b.pc();b.scale(f,f);b.Ri(-this.Dc());b.translate((this.rb+this.sb)/-2,(this.tb+this.qb)/-2);b.sc();var h,l,p;h=0;for(l=this.i.length;h<
l;h++)if(p=this.i[h],p.visible&&!(0===p.width||0===p.height))if(p.pb(),c=p.M,!(c.right<this.rb||c.bottom<this.tb||c.left>this.sb||c.top>this.qb))if(p.Ll)if(c=p.Q[0].Ia,g=p.Q[0].index,1===p.Q.length&&!b.Hi(c)&&!b.Fo(c)&&(!p.k&&!p.j.Dc()||!b.Bf(c))&&1===p.opacity&&!p.type.pa.Uk){b.qc(c);b.md(p.Ta,p.Oa);b.Lg(c)&&(this.b.V=n);var w=0,k=0,t=0,s=0;b.Bf(c)&&(c=p.M,w=this.fa(c.left,c.top,n),k=this.fa(c.left,c.top,r),t=this.fa(c.right,c.bottom,n),c=this.fa(c.right,c.bottom,r),w/=a,k=1-k/d,t/=a,s=1-c/d);b.ze(this.ld?
this.b.Bb:this.Y.bf(),1/p.width,1/p.height,w,k,t,s,this.hb(),p.ma[g]);p.Ib(b)}else this.Y.Oi(b,this,p,this.ld?this.b.Bb:this.Y.bf()),b.pc(),b.scale(f,f),b.Ri(-this.Dc()),b.translate((this.rb+this.sb)/-2,(this.tb+this.qb)/-2),b.sc();else b.qc(0),b.md(p.Ta,p.Oa),p.Ib(b);this.ld&&(c=this.Q.length?this.Q[0].Ia:0,g=this.Q.length?this.Q[0].index:0,0===this.Q.length||1===this.Q.length&&!b.Hi(c)&&1===this.opacity?(1===this.Q.length?(b.qc(c),b.ze(this.Y.bf(),1/this.b.width,1/this.b.height,0,0,1,1,this.hb(),
this.ma[g]),b.Lg(c)&&(this.b.V=n)):b.qc(0),b.Lc(this.Y.bf()),b.Qd(this.opacity),b.Cb(this.b.Bb),b.md(this.Ta,this.Oa),b.pc(),b.sc(),a=this.b.width/2,d=this.b.height/2,b.Mg(-a,d,a,d,a,-d,-a,-d),b.Cb(q)):this.Y.Oi(b,this,q,this.Y.bf()))};m.prototype.fb=function(b,a,d){var c=this.b.devicePixelRatio;this.b.kf&&0<this.b.Jb&&(b*=c,a*=c);var c=this.b.mb/2,g=this.b.lb/2,c=(this.Y.scrollX-c)*this.kc+c,g=(this.Y.scrollY-g)*this.lc+g,f=1/this.hb(),c=c-this.b.width*f/2,g=g-this.b.height*f/2,c=c+b*f,g=g+a*f;a=
this.Dc();0!==a&&(c-=this.Y.scrollX,g-=this.Y.scrollY,b=Math.cos(a),a=Math.sin(a),f=c*b-g*a,g=g*b+c*a,c=f+this.Y.scrollX,g+=this.Y.scrollY);return d?c:g};m.prototype.fa=function(b,a,d){var c=this.Dc();if(0!==c){b-=this.Y.scrollX;a-=this.Y.scrollY;var g=Math.cos(-c),c=Math.sin(-c),f=b*g-a*c;a=a*g+b*c;b=f+this.Y.scrollX;a+=this.Y.scrollY}g=this.b.mb/2;c=this.b.lb/2;g=(this.Y.scrollX-g)*this.kc+g;c=(this.Y.scrollY-c)*this.lc+c;f=1/this.hb();g-=this.b.width*f/2;c-=this.b.height*f/2;g=(b-g)/f;c=(a-c)/
f;b=this.b.devicePixelRatio;this.b.kf&&0<this.b.Jb&&(g/=b,c/=b);return d?g:c};m.prototype.nb=function(){var b,a,d,c={s:this.scale,a:this.k,vl:this.rb,vt:this.tb,vr:this.sb,vb:this.qb,v:this.visible,bc:this.Wc,t:this.Ud,px:this.kc,py:this.lc,o:this.opacity,zr:this.$b,fx:[],instances:[]};b=0;for(a=this.I.length;b<a;b++)d=this.I[b],c.fx.push({name:d.name,active:d.uc,params:this.ma[d.index]});return c};m.prototype.Lb=function(b){var a,d;this.scale=b.s;this.k=b.a;this.rb=b.vl;this.tb=b.vt;this.sb=b.vr;
this.qb=b.vb;this.visible=b.v;this.Wc=b.bc;this.Ud=b.t;this.kc=b.px;this.lc=b.py;this.opacity=b.o;this.$b=b.zr;var c=b.fx;b=0;for(a=c.length;b<a;b++)if(d=this.Oh(c[b].name))d.uc=c[b].active,this.ma[d.index]=c[b].params;this.Rc();this.i.sort(p);this.ub=n};Ua=m})();
(function(){function c(a,b){var d,c=a.length;switch(c){case 0:return n;case 1:return a[0]===b[0];case 2:return a[0]===b[0]&&a[1]===b[1];default:for(d=0;d<c;d++)if(a[d]!==b[d])return r;return n}}function m(a,b){return a.index-b.index}function p(a){var b,d,e,h;2===a.length?a[0].index>a[1].index&&(b=a[0],a[0]=a[1],a[1]=b):2<a.length&&a.sort(m);a.length>=w.length&&(w.length=a.length+1);w[a.length]||(w[a.length]=[]);h=w[a.length];b=0;for(d=h.length;b<d;b++)if(e=h[b],c(a,e))return e;h.push(a);return a}
function k(a,b){this.b=a;this.Fl={};this.gk={};this.Vh=r;this.sk=new Fa;this.name=b[0];var d=b[1];this.bd=[];var c,e;c=0;for(e=d.length;c<e;c++)this.uk(d[c],q,this.bd)}function b(a){this.type=a;this.i=[];this.aa=[];this.ia=n}function a(a,b,d){this.sheet=a;this.parent=b;this.b=a.b;this.ra=[];this.nd=[];this.qk=this.Xg=this.lj=this.pg=this.group=this.yl=r;this.ta=[];this.Sb=[];this.Qb=[];d[1]?(this.df=d[1][1].toLowerCase(),this.group=n,this.pg=!!d[1][0],this.b.Uc.push(this),this.b.Rf[this.df.toLowerCase()]=
this.pg):(this.df="",this.pg=this.group=r);this.jc=d[2];this.L=d[3];this.group||(this.b.Oj[this.L.toString()]=this);var c=d[4];a=0;for(b=c.length;a<b;a++){var e=new Va(this,c[a]);this.ta.push(e);this.Kj(e.type)}c=d[5];a=0;for(b=c.length;a<b;a++)e=new Wa(this,c[a]),this.Sb.push(e);if(7===d.length){d=d[6];a=0;for(b=d.length;a<b;a++)this.sheet.uk(d[a],this,this.Qb)}this.sg=r;this.ta.length&&(this.sg=this.ta[0].type==q&&this.ta[0].ua==V.prototype.m.Rl)}function d(a,b){var d,c,e;if(a&&(-1===b.indexOf(a)&&
b.push(a),a.zb)){d=0;for(c=a.$a.length;d<c;d++)e=a.$a[d],a!==e&&-1===b.indexOf(e)&&b.push(e)}}function e(a,b){this.Fb=a;this.sheet=a.sheet;this.b=a.b;this.D=[];this.K=[];this.ea={};this.ua=b[1];this.trigger=0<b[3];this.fk=2===b[3];this.sq=b[4];this.gf=b[5];this.mo=b[6];this.L=b[7];this.b.Zd[this.L.toString()]=this;-1===b[0]?(this.type=q,this.za=this.Ui,this.Le=q,this.Da=-1):(this.type=this.b.p[b[0]],this.za=this.mo?this.Mo:this.Ti,b[2]?(this.Le=this.type.gg(b[2]),this.Da=this.type.Mh(b[2])):(this.Le=
q,this.Da=-1),this.Fb.parent&&this.Fb.parent.Pg());this.fk&&(this.za=this.No);if(9===b.length){var d,c,e=b[8];d=0;for(c=e.length;d<c;d++){var h=new Xa(this,e[d]);this.D.push(h)}this.K.length=e.length}}function g(a,b){this.Fb=a;this.sheet=a.sheet;this.b=a.b;this.D=[];this.K=[];this.ea={};this.ua=b[1];-1===b[0]?(this.type=q,this.za=this.Ui,this.Le=q,this.Da=-1):(this.type=this.b.p[b[0]],this.za=this.Ti,b[2]?(this.Le=this.type.gg(b[2]),this.Da=this.type.Mh(b[2])):(this.Le=q,this.Da=-1));this.L=b[3];
this.b.Yd[this.L.toString()]=this;if(5===b.length){var d,c,e=b[4];d=0;for(c=e.length;d<c;d++){var h=new Xa(this,e[d]);this.D.push(h)}this.K.length=e.length}}function f(a,b){this.F=a;this.Fb=a.Fb;this.sheet=a.sheet;this.b=a.b;this.type=b[0];this.fc=q;this.Vj=this.od=0;this.Y=q;this.key=0;this.object=q;this.index=0;this.eh=this.Be=this.hk=this.zd=this.Mf=q;var d,c,e;switch(b[0]){case 0:case 7:this.fc=new T(this,b[1]);this.od=0;this.get=this.Pn;break;case 1:this.fc=new T(this,b[1]);this.od=0;this.get=
this.Qn;break;case 5:this.fc=new T(this,b[1]);this.od=0;this.get=this.Un;break;case 3:case 8:this.Vj=b[1];this.get=this.Nn;break;case 6:this.Y=this.b.ji[b[1]];this.get=this.Vn;break;case 9:this.key=b[1];this.get=this.Tn;break;case 4:this.object=this.b.p[b[1]];this.get=this.Wn;this.Fb.Kj(this.object);this.F instanceof Wa?this.Fb.Pg():this.Fb.parent&&this.Fb.parent.Pg();break;case 10:this.index=b[1];this.get=a.type.J?this.Rn:this.Sn;break;case 11:this.Mf=b[1];this.zd=q;this.get=this.On;break;case 2:case 12:this.hk=
b[1];this.get=this.Mn;break;case 13:this.get=this.Xn;this.Be=[];this.eh=[];d=1;for(c=b.length;d<c;d++)e=new Xa(this.F,b[d]),this.Be.push(e),this.eh.push(0)}}function h(a,b,d){this.sheet=a;this.parent=b;this.b=a.b;this.ra=[];this.name=d[1];this.Nf=d[2];this.og=d[3];this.of=!!d[4];this.rg=!!d[5];this.L=d[6];this.b.Ee[this.L.toString()]=this;this.data=this.og;this.parent?this.Kd=this.of||this.rg?-1:this.b.Uo++:(this.Kd=-1,this.b.qh.push(this))}function l(a,b,d){this.sheet=a;this.parent=b;this.b=a.b;
this.ra=[];this.ng=q;this.ao=d[1]}function x(){this.zl=[];this.reset(q)}var w=[];k.prototype.toString=aa("name");k.prototype.uk=function(a,b,d){switch(a[0]){case 0:a=new Ya(this,b,a);if(a.jc){d.push(a);d=0;for(b=a.ta.length;d<b;d++)a.ta[d].trigger&&this.vk(a,d)}else a.Ck()?this.vk(a,0):d.push(a);break;case 1:a=new Ra(this,b,a);d.push(a);break;case 2:a=new Za(this,b,a),d.push(a)}};k.prototype.qa=function(){var a,b;a=0;for(b=this.bd.length;a<b;a++)this.bd[a].qa(a<b-1&&this.bd[a+1].sg)};k.prototype.za=
function(){this.Vh=n;this.b.bi=n;var a,b;a=0;for(b=this.bd.length;a<b;a++){var d=this.bd[a];d.za();this.b.wh(d.ra);(!this.b.cc.jf()||this.b.ac.length)&&this.b.La()}this.b.bi=r};k.prototype.vk=function(a,b){a.jc||this.b.$g.push(a);var d,c,e=a.ta[b],h;h=e.type?e.type.name:"system";var l=(d=e.fk)?this.gk:this.Fl;l[h]||(l[h]=[]);h=l[h];l=e.ua;if(d){if(e.D.length&&(e=e.D[0],!(1!==e.type||2!==e.fc.type))){e=e.fc.value.toLowerCase();d=0;for(c=h.length;d<c;d++)if(h[d].method==l){d=h[d].$f;d[e]?d[e].push([a,
b]):d[e]=[[a,b]];return}d={};d[e]=[[a,b]];h.push({method:l,$f:d})}}else{d=0;for(c=h.length;d<c;d++)if(h[d].method==l){h[d].$f.push([a,b]);return}h.push({method:l,$f:[[a,b]]})}};Pa=k;b.prototype.Uh=function(){return this.ia?this.type.i.length:this.i.length};b.prototype.Ec=function(){return this.ia?this.type.i:this.i};b.prototype.Jg=function(a){a&&(a.b.xb().Ub.jc?(this.ia&&(this.i.length=0,na(this.aa,a.type.i),this.ia=r),a=this.aa.indexOf(a),-1!==a&&(this.i.push(this.aa[a]),this.aa.splice(a,1))):(this.ia=
r,this.i.length=1,this.i[0]=a))};Na=b;a.prototype.qa=function(a){var b,d=this.parent;if(this.group)for(this.Xg=n;d;){if(!d.group){this.Xg=r;break}d=d.parent}this.lj=!this.Ck()&&(!this.parent||this.parent.group&&this.parent.Xg);this.qk=!!a;this.nd=this.ra.slice(0);for(d=this.parent;d;){a=0;for(b=d.ra.length;a<b;a++)this.Am(d.ra[a]);d=d.parent}this.ra=p(this.ra);this.nd=p(this.nd);a=0;for(b=this.ta.length;a<b;a++)this.ta[a].qa();a=0;for(b=this.Sb.length;a<b;a++)this.Sb[a].qa();a=0;for(b=this.Qb.length;a<
b;a++)this.Qb[a].qa(a<b-1&&this.Qb[a+1].sg)};a.prototype.Kj=function(a){d(a,this.ra)};a.prototype.Am=function(a){d(a,this.nd)};a.prototype.Pg=function(){this.yl=n;this.parent&&this.parent.Pg()};a.prototype.Ck=function(){return this.ta.length?this.ta[0].trigger:r};a.prototype.za=function(){var a,b=r,d=this.b.xb();d.Ub=this;this.sg||(d.Dh=r);if(this.jc){0===this.ta.length&&(b=n);d.Za=0;for(a=this.ta.length;d.Za<a;d.Za++)this.ta[d.Za].trigger||this.ta[d.Za].za()&&(b=n);(d.ke=b)&&this.Si()}else{d.Za=
0;for(a=this.ta.length;d.Za<a;d.Za++)if(!this.ta[d.Za].za()){d.ke=r;this.lj&&(!this.b.cc.jf()||this.b.ac.length)&&this.b.La();return}d.ke=n;this.Si()}d.ke&&this.qk&&(d.Dh=n);this.lj&&(!this.b.cc.jf()||this.b.ac.length)&&this.b.La()};a.prototype.Ko=function(a){this.b.xb().Ub=this;this.ta[a].za()&&this.Si()};a.prototype.Si=function(){var a=this.b.xb(),b;a.Eb=0;for(b=this.Sb.length;a.Eb<b;a.Eb++)if(this.Sb[a.Eb].za())return;this.pl()};a.prototype.Io=function(){var a=this.b.xb(),b;for(b=this.Sb.length;a.Eb<
b;a.Eb++)if(this.Sb[a.Eb].za())return;this.pl()};a.prototype.pl=function(){if(this.Qb.length){var a,b,d,c,e=this.Qb.length-1;this.b.Ji(this);if(this.yl){a=0;for(b=this.Qb.length;a<b;a++)d=this.Qb[a],(c=!this.Xg||!this.group&&a<e)&&this.b.Ii(d.ra),d.za(),c?this.b.xe(d.ra):this.b.wh(d.ra)}else{a=0;for(b=this.Qb.length;a<b;a++)this.Qb[a].za()}this.b.fl()}};a.prototype.Lo=function(){var a=this.b.xb();a.Ub=this;var b=r,d;a.Za=0;for(d=this.ta.length;a.Za<d;a.Za++)if(this.ta[a.Za].za())b=n;else if(!this.jc)return r;
return this.jc?b:n};Ya=a;e.prototype.qa=function(){var a,b;a=0;for(b=this.D.length;a<b;a++)this.D[a].qa()};e.prototype.No=F(n);e.prototype.Ui=function(){var a,b;a=0;for(b=this.D.length;a<b;a++)this.K[a]=this.D[a].get();return Ca(this.ua.apply(this.b.Nc,this.K),this.gf)};e.prototype.Mo=function(){var a,b;a=0;for(b=this.D.length;a<b;a++)this.K[a]=this.D[a].get();a=this.ua.apply(this.type,this.K);this.type.Ke();return a};e.prototype.Ti=function(){var a,b,d,c,e,h,l,g=this.type.ca(),f=this.Fb.jc&&!this.trigger,
p=0,t=this.type.zb;if(g.ia){g.i.length=0;a=g.aa.length=0;for(d=this.type.i.length;a<d;a++){h=this.type.i[a];b=0;for(c=this.D.length;b<c;b++)this.K[b]=this.D[b].get(a);-1<this.Da?(this.type.J&&(p=h.type.be[this.type.gc]),b=this.ua.apply(h.N[this.Da+p],this.K)):b=this.ua.apply(h,this.K);(e=Ca(b,this.gf))?g.i.push(h):f&&g.aa.push(h)}this.type.finish&&this.type.finish(n);g.ia=r;this.type.Ke();return g.Uh()}var k=0,w=f?g.aa:g.i;e=r;a=0;for(d=w.length;a<d;a++){h=w[a];b=0;for(c=this.D.length;b<c;b++)this.K[b]=
this.D[b].get(a);-1<this.Da?(this.type.J&&(p=h.type.be[this.type.gc]),b=this.ua.apply(h.N[this.Da+p],this.K)):b=this.ua.apply(h,this.K);if(Ca(b,this.gf))if(e=n,f){if(g.i.push(h),t){b=0;for(c=h.siblings.length;b<c;b++)l=h.siblings[b],l.type.ca().i.push(l)}}else{w[k]=h;if(t){b=0;for(c=h.siblings.length;b<c;b++)l=h.siblings[b],l.type.ca().i[k]=l}k++}else if(f){w[k]=h;if(t){b=0;for(c=h.siblings.length;b<c;b++)l=h.siblings[b],l.type.ca().aa[k]=l}k++}}w.length=k;if(t){a=0;for(d=this.type.$a.length;a<d;a++)h=
this.type.$a[a].ca(),f?h.aa.length=k:h.i.length=k}p=e;if(f&&!e){a=0;for(d=g.i.length;a<d;a++){h=g.i[a];b=0;for(c=this.D.length;b<c;b++)this.K[b]=this.D[b].get(a);b=-1<this.Da?this.ua.apply(h.N[this.Da],this.K):this.ua.apply(h,this.K);if(Ca(b,this.gf)){e=n;break}}}this.type.finish&&this.type.finish(p||f);return f?e:g.Uh()};Va=e;g.prototype.qa=function(){var a,b;a=0;for(b=this.D.length;a<b;a++)this.D[a].qa()};g.prototype.Ui=function(){var a,b;a=0;for(b=this.D.length;a<b;a++)this.K[a]=this.D[a].get();
return this.ua.apply(this.b.Nc,this.K)};g.prototype.Ti=function(){var a=this.type.ca().Ec(),b,d,c,e,h;b=0;for(c=a.length;b<c;b++){h=a[b];d=0;for(e=this.D.length;d<e;d++)this.K[d]=this.D[d].get(b);-1<this.Da?(d=0,this.type.J&&(d=h.type.be[this.type.gc]),this.ua.apply(h.N[this.Da+d],this.K)):this.ua.apply(h,this.K)}return r};Wa=g;var u=[],t=-1;f.prototype.qa=function(){var a,b;if(11===this.type)this.zd=this.b.mk(this.Mf,this.Fb.parent);else if(13===this.type){a=0;for(b=this.Be.length;a<b;a++)this.Be[a].qa()}this.fc&&
this.fc.qa()};f.prototype.ya=function(){t++;u.length===t&&u.push(new $a);return u[t]};f.prototype.wa=function(){t--};f.prototype.Pn=function(a){this.od=a||0;a=this.ya();this.fc.get(a);this.wa();return a.data};f.prototype.Qn=function(a){this.od=a||0;a=this.ya();this.fc.get(a);this.wa();return M(a.data)?a.data:""};f.prototype.Wn=aa("object");f.prototype.Nn=aa("Vj");f.prototype.Un=function(a){this.od=a||0;a=this.ya();this.fc.get(a);this.wa();return a.Ba()?this.b.$e(a.data):this.b.Rh(a.data)};f.prototype.Vn=
aa("Y");f.prototype.Tn=aa("key");f.prototype.Sn=aa("index");f.prototype.Rn=function(a){var b=this.F.type,d=q,d=b.ca(),c=d.Ec(),d=c.length?c[a%c.length].type:d.aa[a%d.aa.length].type;return this.index+d.bg[b.gc]};f.prototype.On=aa("zd");f.prototype.Mn=aa("hk");f.prototype.Xn=function(){var a,b;a=0;for(b=this.Be.length;a<b;a++)this.eh[a]=this.Be[a].get();return this.eh};Xa=f;h.prototype.qa=function(){this.ra=p(this.ra)};h.prototype.Mc=function(a){var b=this.b.lk();!this.parent||this.of||!b?this.data=
a:(this.Kd>=b.length&&(b.length=this.Kd+1),b[this.Kd]=a)};h.prototype.Bd=function(){var a=this.b.lk();return!this.parent||this.of||!a||this.rg?this.data:this.Kd>=a.length||"undefined"===typeof a[this.Kd]?this.og:a[this.Kd]};h.prototype.za=function(){this.parent&&(!this.of&&!this.rg)&&this.Mc(this.og)};Ra=h;l.prototype.qa=function(){this.ng=this.b.Fh[this.ao];this.sheet.sk.add(this.ng);this.ra=p(this.ra)};l.prototype.za=function(){this.parent&&this.b.Df(this.b.p);this.ng.Vh||this.ng.za();this.parent&&
this.b.xe(this.b.p)};Za=l;x.prototype.reset=function(a){this.Ub=a;this.Eb=this.Za=0;this.zl.length=0;this.Dh=this.ke=r};Qa=x})();
(function(){function c(c,k){this.F=c;this.b=c.b;this.type=k[0];this.get=[this.hn,this.bn,this.qn,this.tn,this.Wm,this.rn,this.mn,this.Zm,this.ln,this.pn,this.Xm,this.on,this.$m,this.nn,this.jn,this.kn,this.cn,this.dn,this.Ym,this.sn,this.dk,this.gn,this.dk,this.an][this.type];var b=q;this.kb=this.D=this.K=this.ua=this.Wg=this.Ca=this.first=this.value=q;this.Da=-1;this.Fc=q;this.rj=-1;this.zd=this.Mf=this.Bm=q;this.Ef=r;switch(this.type){case 0:case 1:case 2:this.value=k[1];break;case 3:this.first=
new T(c,k[1]);break;case 18:this.first=new T(c,k[1]);this.Ca=new T(c,k[2]);this.Wg=new T(c,k[3]);break;case 19:this.ua=k[1];this.K=[];this.D=[];3===k.length?(b=k[2],this.K.length=b.length+1):this.K.length=1;break;case 20:this.kb=this.b.p[k[1]];this.Da=-1;this.ua=k[2];this.Ef=k[3];this.Fc=k[4]?new T(c,k[4]):q;this.K=[];this.D=[];6===k.length?(b=k[5],this.K.length=b.length+1):this.K.length=1;break;case 21:this.kb=this.b.p[k[1]];this.Ef=k[2];this.Fc=k[3]?new T(c,k[3]):q;this.rj=k[4];break;case 22:this.kb=
this.b.p[k[1]];this.Bm=this.kb.gg(k[2]);this.Da=this.kb.Mh(k[2]);this.ua=k[3];this.Ef=k[4];this.Fc=k[5]?new T(c,k[5]):q;this.K=[];this.D=[];7===k.length?(b=k[6],this.K.length=b.length+1):this.K.length=1;break;case 23:this.Mf=k[1],this.zd=q}4<=this.type&&17>=this.type&&(this.first=new T(c,k[1]),this.Ca=new T(c,k[2]));if(b){var a,d;a=0;for(d=b.length;a<d;a++)this.D.push(new T(c,b[a]))}}function m(c,k){this.type=c||U.He;this.data=k||0;this.se=q;this.type==U.He&&(this.data=Math.floor(this.data))}c.prototype.qa=
function(){23===this.type&&(this.zd=this.F.b.mk(this.Mf,this.F.Fb.parent));this.first&&this.first.qa();this.Ca&&this.Ca.qa();this.Wg&&this.Wg.qa();this.Fc&&this.Fc.qa();if(this.D){var c,k;c=0;for(k=this.D.length;c<k;c++)this.D[c].qa()}};c.prototype.sn=function(c){this.K[0]=c;c=this.F.ya();var k,b;k=0;for(b=this.D.length;k<b;k++)this.D[k].get(c),this.K[k+1]=c.data;this.F.wa();this.ua.apply(this.b.Nc,this.K)};c.prototype.dk=function(c){var k=this.kb.ca(),b=k.Ec();if(!b.length)if(k.aa.length)b=k.aa;
else{this.Ef?c.Zb(""):c.W(0);return}this.K[0]=c;c.se=this.kb;c=this.F.ya();var a,k=0;for(a=this.D.length;k<a;k++)this.D[k].get(c),this.K[k+1]=c.data;k=this.F.od;this.Fc&&(this.Fc.get(c),c.Ba()&&(k=c.data,b=this.kb.i));this.F.wa();k%=b.length;0>k&&(k+=b.length);b=b[k];-1<this.Da?(c=0,this.kb.J&&(c=b.type.be[this.kb.gc]),this.ua.apply(b.N[this.Da+c],this.K)):this.ua.apply(b,this.K)};c.prototype.gn=function(c){var k=this.kb.ca(),b=k.Ec();if(!b.length)if(k.aa.length)b=k.aa;else{this.Ef?c.Zb(""):c.W(0);
return}k=this.F.od;if(this.Fc){var a=this.F.ya();this.Fc.get(a);if(a.Ba()){k=a.data;b=this.kb.i;k%=b.length;0>k&&(k+=b.length);b=b[k].Ra[this.rj];M(b)?c.Zb(b):c.H(b);this.F.wa();return}this.F.wa()}k%=b.length;0>k&&(k+=b.length);b=b[k];k=0;this.kb.J&&(k=b.type.bg[this.kb.gc]);b=b.Ra[this.rj+k];M(b)?c.Zb(b):c.H(b)};c.prototype.hn=function(c){c.type=U.He;c.data=this.value};c.prototype.bn=function(c){c.type=U.Ge;c.data=this.value};c.prototype.qn=function(c){c.type=U.ph;c.data=this.value};c.prototype.tn=
function(c){this.first.get(c);c.Ba()&&(c.data=-c.data)};c.prototype.Wm=function(c){this.first.get(c);var k=this.F.ya();this.Ca.get(k);c.Ba()&&k.Ba()&&(c.data+=k.data,k.ge()&&c.qe());this.F.wa()};c.prototype.rn=function(c){this.first.get(c);var k=this.F.ya();this.Ca.get(k);c.Ba()&&k.Ba()&&(c.data-=k.data,k.ge()&&c.qe());this.F.wa()};c.prototype.mn=function(c){this.first.get(c);var k=this.F.ya();this.Ca.get(k);c.Ba()&&k.Ba()&&(c.data*=k.data,k.ge()&&c.qe());this.F.wa()};c.prototype.Zm=function(c){this.first.get(c);
var k=this.F.ya();this.Ca.get(k);c.Ba()&&k.Ba()&&(c.data/=k.data,c.qe());this.F.wa()};c.prototype.ln=function(c){this.first.get(c);var k=this.F.ya();this.Ca.get(k);c.Ba()&&k.Ba()&&(c.data%=k.data,k.ge()&&c.qe());this.F.wa()};c.prototype.pn=function(c){this.first.get(c);var k=this.F.ya();this.Ca.get(k);c.Ba()&&k.Ba()&&(c.data=Math.pow(c.data,k.data),k.ge()&&c.qe());this.F.wa()};c.prototype.Xm=function(c){this.first.get(c);var k=this.F.ya();this.Ca.get(k);c.Ba()?k.tg()?c.Zb(c.data.toString()+k.data):
c.data&&k.data?c.W(1):c.W(0):c.tg()&&(c.data=k.tg()?c.data+k.data:c.data+(Math.round(1E10*k.data)/1E10).toString());this.F.wa()};c.prototype.on=function(c){this.first.get(c);var k=this.F.ya();this.Ca.get(k);c.Ba()&&k.Ba()&&(c.data||k.data?c.W(1):c.W(0));this.F.wa()};c.prototype.Ym=function(c){this.first.get(c);c.data?this.Ca.get(c):this.Wg.get(c)};c.prototype.$m=function(c){this.first.get(c);var k=this.F.ya();this.Ca.get(k);c.W(c.data===k.data?1:0);this.F.wa()};c.prototype.nn=function(c){this.first.get(c);
var k=this.F.ya();this.Ca.get(k);c.W(c.data!==k.data?1:0);this.F.wa()};c.prototype.jn=function(c){this.first.get(c);var k=this.F.ya();this.Ca.get(k);c.W(c.data<k.data?1:0);this.F.wa()};c.prototype.kn=function(c){this.first.get(c);var k=this.F.ya();this.Ca.get(k);c.W(c.data<=k.data?1:0);this.F.wa()};c.prototype.cn=function(c){this.first.get(c);var k=this.F.ya();this.Ca.get(k);c.W(c.data>k.data?1:0);this.F.wa()};c.prototype.dn=function(c){this.first.get(c);var k=this.F.ya();this.Ca.get(k);c.W(c.data>=
k.data?1:0);this.F.wa()};c.prototype.an=function(c){var k=this.zd.Bd();L(k)?c.H(k):c.Zb(k)};T=c;m.prototype.ge=function(){return this.type===U.Ge};m.prototype.Ba=function(){return this.type===U.He||this.type===U.Ge};m.prototype.tg=function(){return this.type===U.ph};m.prototype.qe=function(){this.ge()||(this.tg()&&(this.data=parseFloat(this.data)),this.type=U.Ge)};m.prototype.W=function(c){this.type=U.He;this.data=Math.floor(c)};m.prototype.H=function(c){this.type=U.Ge;this.data=c};m.prototype.Zb=
function(c){this.type=U.ph;this.data=c};$a=m;U={He:0,Ge:1,ph:2}})();function V(c){this.b=c;this.Db=[]}
V.prototype.nb=function(){var c={},m,p,k,b,a,d,e,g;c.waits=[];var f=c.waits,h;m=0;for(p=this.Db.length;m<p;m++){d=this.Db[m];h={t:d.time,ev:d.We.L,sm:[],sols:{}};d.We.Sb[d.Eb]&&(h.act=d.We.Sb[d.Eb].L);k=0;for(b=d.ra.length;k<b;k++)h.sm.push(d.ra[k].L);for(a in d.ob)if(d.ob.hasOwnProperty(a)){e=this.b.p[parseInt(a,10)];g={sa:d.ob[a].ql,insts:[]};k=0;for(b=d.ob[a].Ed.length;k<b;k++)g.insts.push(d.ob[a].Ed[k].uid);h.sols[e.L.toString()]=g}f.push(h)}return c};
V.prototype.Lb=function(c){c=c.waits;var m,p,k,b,a,d,e,g,f,h,l;m=this.Db.length=0;for(p=c.length;m<p;m++)if(d=c[m],g=this.b.Oj[d.ev.toString()]){f=-1;k=0;for(b=g.Sb.length;k<b;k++)if(g.Sb[k].L===d.act){f=k;break}if(-1!==f){e={ob:{},ra:[],ak:r};e.time=d.t;e.We=g;e.Eb=f;k=0;for(b=d.sm.length;k<b;k++)(g=this.b.jg(d.sm[k]))&&e.ra.push(g);for(a in d.sols)if(d.sols.hasOwnProperty(a)&&(g=this.b.jg(parseInt(a,10)))){f=d.sols[a];h={ql:f.sa,Ed:[]};k=0;for(b=f.insts.length;k<b;k++)(l=this.b.Sh(f.insts[k]))&&
h.Ed.push(l);e.ob[g.index.toString()]=h}this.Db.push(e)}}};
(function(){function c(){}function m(){}function p(){}var k=V.prototype;c.prototype.Sl=F(n);c.prototype.zj=F(n);c.prototype.fm=F(n);c.prototype.Nl=function(a,b,c){return Fb(a.Bd(),b,c)};c.prototype.Rl=function(){var a=this.b.xb();return a.Dh?r:!a.ke};c.prototype.Aj=F(n);c.prototype.Xl=F(n);c.prototype.kh=F(n);c.prototype.gm=F(n);c.prototype.jh=F(n);k.m=new c;m.prototype.Pl=function(a,b,c,f){if(b&&a&&(b=this.b.Xj(a,b,c,f))){this.b.Vb++;var h;this.b.trigger(Object.getPrototypeOf(a.pa).m.ih,b);if(b.zb){c=
0;for(f=b.siblings.length;c<f;c++)h=b.siblings[c],this.b.trigger(Object.getPrototypeOf(h.type.pa).m.ih,h)}this.b.Vb--;a=a.ca();a.ia=r;a.i.length=1;a.i[0]=b;if(b.zb){c=0;for(f=b.siblings.length;c<f;c++)h=b.siblings[c],a=h.type.ca(),a.ia=r,a.i.length=1,a.i[0]=h}}};m.prototype.om=function(a,b){0===a.Nf?L(b)?a.Mc(b):a.Mc(parseFloat(b)):1===a.Nf&&a.Mc(b.toString())};m.prototype.vj=function(a,b){0===a.Nf?L(b)?a.Mc(a.Bd()+b):a.Mc(a.Bd()+parseFloat(b)):1===a.Nf&&a.Mc(a.Bd()+b.toString())};m.prototype.qm=
function(a,b){0===a.Nf&&(L(b)?a.Mc(a.Bd()-b):a.Mc(a.Bd()-parseFloat(b)))};var b=[],a=[];m.prototype.jm=function(){var a,b,c;a=0;for(b=this.b.qh.length;a<b;a++)c=this.b.qh[a],c.data=c.og};m.prototype.km=function(){if(!this.b.pf&&!this.b.Re&&this.b.R){this.b.Re=this.b.R;var a,b,c;a=0;for(b=this.b.Uc.length;a<b;a++)c=this.b.Uc[a],this.b.Rf[c.df.toLowerCase()]=c.pg}};k.P=new m;p.prototype["int"]=function(a,b){M(b)?(a.W(parseInt(b,10)),isNaN(a.data)&&(a.data=0)):a.W(b)};p.prototype["float"]=function(a,
b){M(b)?(a.H(parseFloat(b)),isNaN(a.data)&&(a.data=0)):a.H(b)};p.prototype.random=function(a,b,c){void 0===c?a.H(Math.random()*b):a.H(Math.random()*(c-b)+b)};p.prototype.sqrt=function(a,b){a.H(Math.sqrt(b))};p.prototype.abs=function(a,b){a.H(Math.abs(b))};p.prototype.round=function(a,b){a.W(Math.round(b))};p.prototype.floor=function(a,b){a.W(Math.floor(b))};p.prototype.ceil=function(a,b){a.W(Math.ceil(b))};p.prototype.sin=function(a,b){a.H(Math.sin(P(b)))};p.prototype.cos=function(a,b){a.H(Math.cos(P(b)))};
p.prototype.tan=function(a,b){a.H(Math.tan(P(b)))};p.prototype.acos=function(a,b){a.H(ra(Math.acos(b)))};p.prototype.max=function(a){var b=arguments[1],c,f;c=2;for(f=arguments.length;c<f;c++)b<arguments[c]&&(b=arguments[c]);a.H(b)};p.prototype.min=function(a){var b=arguments[1],c,f;c=2;for(f=arguments.length;c<f;c++)b>arguments[c]&&(b=arguments[c]);a.H(b)};p.prototype.Bc=function(a){a.H(this.b.Bc)};p.prototype.Ce=function(a){a.H(this.b.Ce)};p.prototype.time=function(a){a.H(this.b.ie.rd)};p.prototype.Pc=
function(a){a.W(this.b.Pc)};p.prototype.Hg=function(a){a.W(this.b.Hg)};p.prototype.Jh=function(a){a.W(this.b.Jh)};p.prototype.k=function(a,b,c,f,h){a.H(ra(xa(b,c,f,h)))};p.prototype.oo=function(a){a.W(this.b.R.width)};p.prototype.Nk=function(a){a.W(this.b.R.height)};p.prototype.left=function(a,b,c){a.Zb(M(b)?b.substr(0,c):"")};p.prototype.right=function(a,b,c){a.Zb(M(b)?b.substr(b.length-c):"")};p.prototype.replace=function(a,b,c,f){M(b)&&M(c)&&M(f)?a.Zb(b.replace(RegExp(Ha(c),"gi"),f)):a.Zb(M(b)?
b:"")};p.prototype.xh=function(a){a.H(this.b.xh/1E3)};p.prototype.Bg=function(a){a.H(this.b.Bg)};k.S=new p;k.Jo=function(){var c,e,g,f,h,l,k=this.b.xb();c=0;for(g=this.Db.length;c<g;c++)if(f=this.Db[c],!(f.time>this.b.ie.rd)){k.Ub=f.We;k.Eb=f.Eb;k.Za=0;for(e in f.ob)f.ob.hasOwnProperty(e)&&(h=this.b.p[parseInt(e,10)].ca(),l=f.ob[e],h.ia=l.ql,na(h.i,l.Ed),h=l,h.Ed.length=0,a.push(h));f.We.Io();this.b.wh(f.ra);f.ak=n}e=c=0;for(g=this.Db.length;c<g;c++)f=this.Db[c],this.Db[e]=f,f.ak?(Ea(f.ob),f.ra.length=
0,b.push(f)):e++;this.Db.length=e}})();
function jb(c){var m=c[0].prototype,p=c[1],k=c[3],b=c[4],a=c[5],d=c[6],e=c[7];c=c[8];m.m||(m.m={});m.P||(m.P={});m.S||(m.S={});var g=m.m,f=m.P,m=m.S;k&&(g.gh=function(a,b){return Fb(this.x,a,b)},g.Ol=function(a,b){return Fb(this.y,a,b)},g.wp=function(){var a=this.j;this.pb();var b=this.M;return!(b.right<a.rb||b.bottom<a.tb||b.left>a.sb||b.top>a.qb)},g.xp=function(){this.pb();var a=this.M,b=this.b.R;return 0>a.right||0>a.bottom||a.left>b.width||a.top>b.height},g.Jp=function(a,b,c){var d=this.ca(),
e=d.Ec();if(!e.length)return r;var f=e[0],g=f,k=Ba(f.x,f.y,b,c),m,p,S;m=1;for(p=e.length;m<p;m++)if(f=e[m],S=Ba(f.x,f.y,b,c),0===a&&S<k||1===a&&S>k)k=S,g=f;d.Jg(g);return n},f.nh=function(a){this.x!==a&&(this.x=a,this.r())},f.$p=function(a){this.y!==a&&(this.y=a,this.r())},f.lm=function(a,b){if(this.x!==a||this.y!==b)this.x=a,this.y=b,this.r()},f.Xp=function(a,b){var c=a.Hn(this);if(c){var d;c.Qh?(d=c.Qh(b,n),c=c.Qh(b,r)):(d=c.x,c=c.y);if(this.x!==d||this.y!==c)this.x=d,this.y=c,this.r()}},f.Cp=function(a){0!==
a&&(this.x+=Math.cos(this.k)*a,this.y+=Math.sin(this.k)*a,this.r())},f.Bp=function(a,b){0!==b&&(this.x+=Math.cos(P(a))*b,this.y+=Math.sin(P(a))*b,this.r())},m.Qf=function(a){a.H(this.x)},m.vm=function(a){a.H(this.y)},m.Bc=function(a){a.H(this.b.Nh(this))});b&&(g.pp=function(a,b){return Fb(this.width,a,b)},g.mp=function(a,b){return Fb(this.height,a,b)},f.pm=function(a){this.width!==a&&(this.width=a,this.r())},f.Up=function(a){this.height!==a&&(this.height=a,this.r())},f.mm=function(a,b){if(this.width!==
a||this.height!==b)this.width=a,this.height=b,this.r()},m.Pf=function(a){a.H(this.width)},m.Tl=function(a){a.H(this.height)},m.jp=function(a){this.pb();a.H(this.M.left)},m.lp=function(a){this.pb();a.H(this.M.top)},m.kp=function(a){this.pb();a.H(this.M.right)},m.ip=function(a){this.pb();a.H(this.M.bottom)});a&&(g.hp=function(a,b){return ya(this.k,P(b))<=P(a)},g.up=function(a){return Aa(this.k,P(a))},g.sp=function(a,b){var c=wa(a),d=wa(b),e=Q(this.k);return Aa(d,c)?Aa(e,c)&&!Aa(e,d):!(!Aa(e,c)&&Aa(e,
d))},f.Qp=function(a){a=P(ua(a));!isNaN(a)&&this.k!==a&&(this.k=a,this.r())},f.Mp=function(a){0!==a&&!isNaN(a)&&(this.k+=P(a),this.k=Q(this.k),this.r())},f.Np=function(a){0!==a&&!isNaN(a)&&(this.k-=P(a),this.k=Q(this.k),this.r())},f.Op=function(a,b){var c=za(this.k,P(b),P(a));!isNaN(c)&&this.k!==c&&(this.k=c,this.r())},f.Pp=function(a,b,c){a=za(this.k,Math.atan2(c-this.y,b-this.x),P(a));!isNaN(a)&&this.k!==a&&(this.k=a,this.r())},f.Yp=function(a,b){var c=Math.atan2(b-this.y,a-this.x);!isNaN(c)&&this.k!==
c&&(this.k=c,this.r())},m.gp=function(a){a.H(va(this.k))});p||(g.np=function(a,b,c){return Fb(this.Ra[a],b,c)},g.tp=function(a){return this.Ra[a]},g.Ip=function(a){var b,c,d,e,f;if(this.b.Bn().gf){f=this.ca();if(f.ia){f.ia=r;f.i.length=0;f.aa.length=0;d=this.i;b=0;for(c=d.length;b<c;b++)e=d[b],e.uid===a?f.aa.push(e):f.i.push(e)}else{d=b=0;for(c=f.i.length;b<c;b++)e=f.i[b],f.i[d]=e,e.uid===a?f.aa.push(e):d++;f.i.length=d}return!!f.i.length}e=this.b.Sh(a);if(!e)return r;if(this.J){a=e.type.ba;b=0;for(c=
a.length;b<c;b++)if(a[b]===this)return f=this.ca(),f.Jg(e),n}else if(e.type===this)return f=this.ca(),f.Jg(e),n;return r},g.ih=F(n),g.Yl=F(n),f.Vp=function(a,b){var c=this.Ra;L(c[a])?c[a]=L(b)?b:parseFloat(b):M(c[a])&&(c[a]=M(b)?b:b.toString())},f.fp=function(a,b){var c=this.Ra;L(c[a])?c[a]=L(b)?c[a]+b:c[a]+parseFloat(b):M(c[a])&&(c[a]=M(b)?c[a]+b:c[a]+b.toString())},f.aq=function(a,b){var c=this.Ra;L(c[a])&&(c[a]=L(b)?c[a]-b:c[a]-parseFloat(b))},f.Rp=function(a,b){this.Ra[a]=b?1:0},f.bq=function(a){this.Ra[a]=
1-this.Ra[a]},f.Ql=function(){this.b.Xd(this)},m.qp=function(a){var b=a.se.i.length,c,d,e;c=0;for(d=this.b.ac.length;c<d;c++)e=this.b.ac[c],a.se.J?0<=e.type.ba.indexOf(a.se)&&b++:e.type===a.se&&b++;a.W(b)},m.Lp=function(a){a.W(a.se.ca().Ec().length)},m.cq=function(a){a.W(this.uid)},m.rp=function(a){a.W(this.cf())});d&&(g.yp=aa("visible"),f.Zp=function(a){!a!==!this.visible&&(this.visible=a,this.b.V=n)},g.op=function(a,b){return Fb(La(100*this.opacity),a,b)},f.Wp=function(a){a/=100;0>a?a=0:1<a&&(a=
1);a!==this.opacity&&(this.opacity=a,this.b.V=n)},m.Opacity=function(a){a.H(La(100*this.opacity))});e&&(g.vp=function(a){return!a?r:this.j===a},g.Kp=function(a){var b=this.ca(),c=b.Ec();if(!c.length)return r;var d=c[0],e=d,f,g;f=1;for(g=c.length;f<g;f++)if(d=c[f],0===a){if(d.j.index>e.j.index||d.j.index===e.j.index&&d.yb()>e.yb())e=d}else if(d.j.index<e.j.index||d.j.index===e.j.index&&d.yb()<e.yb())e=d;b.Jg(e);return n},f.Fp=function(){var a=this.yb();a!==this.j.i.length-1&&(ma(this.j.i,a),this.j.i.push(this),
this.b.V=n,this.j.ub=n)},f.Dp=function(){var a=this.yb();0!==a&&(ma(this.j.i,a),this.j.i.unshift(this),this.b.V=n,this.j.ub=n)},f.Ep=function(a){a&&a!=this.j&&(ma(this.j.i,this.yb()),this.j.ub=n,this.j=a,this.Wd=a.i.length,a.i.push(this),this.b.V=n)},f.fq=function(a,b){var c=0===a;if(b){var d=b.Cn(this);if(d&&d.uid!==this.uid){this.j.index!==d.j.index&&(ma(this.j.i,this.yb()),this.j.ub=n,this.j=d.j,this.Wd=d.j.i.length,d.j.i.push(this));var e=this.yb(),d=d.yb();ma(this.j.i,e);e<d&&d--;c&&d++;d===
this.j.i.length?this.j.i.push(this):this.j.i.splice(d,0,this);this.j.ub=n;this.b.V=n}}},m.Ap=function(a){a.W(this.j.Yk)},m.zp=function(a){a.Zb(this.j.name)},m.dq=function(a){a.W(this.yb())});c&&(f.Sp=function(a,b){if(this.b.A){var c=this.type.Ph(b);if(!(0>c)){var d=1===a;this.Tc[c]!==d&&(this.Tc[c]=d,this.Rc(),this.b.V=n)}}},f.Tp=function(a,b,c){if(this.b.A){var d=this.type.Ph(a);0>d||(a=this.type.I[d],d=this.ma[d],b=Math.floor(b),0>b||b>=d.length||(1===this.b.A.Kn(a.Ia,b)&&(c/=100),d[b]!==c&&(d[b]=
c,a.uc&&(this.b.V=n))))}})}function yb(){this.sh=n;this.b.V=n;var c,m;c=0;for(m=this.Tf.length;c<m;c++)this.Tf[c](this)}function zb(c){c&&this.Tf.push(c)}
function Bb(){if(this.sh){this.M.set(this.x,this.y,this.x+this.width,this.y+this.height);this.M.offset(-this.ab*this.width,-this.bb*this.height);this.k?(this.M.offset(-this.x,-this.y),this.Na.ul(this.M,this.k),this.Na.offset(this.x,this.y),this.Na.Pj(this.M)):this.Na.Yi(this.M);var c=0;this.M.left>this.M.right&&(c=this.M.left,this.M.left=this.M.right,this.M.right=c);this.M.top>this.M.bottom&&(c=this.M.top,this.M.top=this.M.bottom,this.M.bottom=c);this.sh=r}}
function Ab(c,m){return!this.M.Gb(c,m)||!this.Na.Gb(c,m)?r:this.$&&!this.$.nf()?(this.$.Oe(this.width,this.height,this.k),this.$.Gb(c-this.x,m-this.y)):n}function wb(){this.type.ah();return this.ef}function Cb(){this.j.Yo();return this.Wd}function Db(){this.Q.length=0;var c,m;c=0;for(m=this.Tc.length;c<m;c++)this.Tc[c]&&this.Q.push(this.type.I[c]);this.Ll=!!this.Q.length}function xb(){return"Inst"+this.kl}
function lb(c){if(c&&c.zb&&c.type!=this){var m,p,k;m=0;for(p=c.siblings.length;m<p;m++)if(k=c.siblings[m],k.type==this)return k}c=this.ca().Ec();return c.length?c[0]:q}function mb(c){var m=this.ca().Ec();return m.length?m[c.cf()%m.length]:q}function kb(){if(this.qd&&!this.J){var c,m;c=0;for(m=this.i.length;c<m;c++)this.i[c].ef=c;this.qd=r}}function nb(){return this.pd[this.Ac]}function ob(){this.Ac++;this.Ac===this.pd.length?this.pd.push(new Na(this)):this.pd[this.Ac].ia=n}
function pb(){this.Ac++;this.Ac===this.pd.length&&this.pd.push(new Na(this));var c=this.pd[this.Ac],m=this.pd[this.Ac-1];m.ia?c.ia=n:(c.ia=r,na(c.i,m.i))}function qb(){this.Ac--}function rb(c){var m,p,k,b,a,d=0;if(!this.J){m=0;for(p=this.ba.length;m<p;m++){a=this.ba[m];k=0;for(b=a.X.length;k<b;k++){if(c===a.X[k].name)return this.ea.Fk=d,a.X[k];d++}}}m=0;for(p=this.X.length;m<p;m++){if(c===this.X[m].name)return this.ea.Fk=d,this.X[m];d++}return q}function sb(c){return this.gg(c)?this.ea.Fk:-1}
function tb(c){var m,p;m=0;for(p=this.I.length;m<p;m++)if(this.I[m].name===c)return m;return-1}function ub(){if(this.zb&&!this.J){var c,m,p,k,b,a,d;this.ah();a=this.ca();var e=a.ia,g=(c=this.b.xb())&&c.Ub&&c.Ub.jc;c=0;for(m=this.$a.length;c<m;c++)if(b=this.$a[c],b!==this&&(b.ah(),d=b.ca(),d.ia=e,!e)){d.i.length=a.i.length;p=0;for(k=a.i.length;p<k;p++)d.i[p]=b.i[a.i[p].ef];if(g){d.aa.length=a.aa.length;p=0;for(k=a.aa.length;p<k;p++)d.aa[p]=b.i[a.aa[p].ef]}}}}function vb(){return"Type"+this.L}
function Fb(c,m,p){if("undefined"===typeof c||"undefined"===typeof p)return r;switch(m){case 0:return c===p;case 1:return c!==p;case 2:return c<p;case 3:return c<=p;case 4:return c>p;case 5:return c>=p;default:return r}}var hb={};function Gb(c){this.b=c}
(function(){function c(){}var m=Gb.prototype;m.Ma=function(b){this.pa=b;this.b=b.b};m.Ma.prototype.Z=A();m.xa=function(b){this.type=b;this.b=b.b;this.gi=Array(256);this.bh=Array(256);this.td=0};var p=m.xa.prototype;p.Z=function(){var b=this;this.b.Va||(jQuery(document).keydown(function(a){b.xi(a)}),jQuery(document).keyup(function(a){b.yi(a)}))};var k=[32,33,34,35,36,37,38,39,40,44];p.xi=function(b){var a=r;window!=window.top&&-1<k.indexOf(b.which)&&(b.preventDefault(),a=n,b.stopPropagation());if(this.gi[b.which])this.bh[b.which]&&
!a&&b.preventDefault();else{this.gi[b.which]=n;this.td=b.which;this.b.trigger(Gb.prototype.m.wj,this);var c=this.b.trigger(Gb.prototype.m.xj,this),e=this.b.trigger(Gb.prototype.m.cm,this);if(c||e)this.bh[b.which]=n,a||b.preventDefault()}};p.yi=function(b){this.gi[b.which]=r;this.td=b.which;this.b.trigger(Gb.prototype.m.Wl,this);var a=this.b.trigger(Gb.prototype.m.em,this),c=this.b.trigger(Gb.prototype.m.dm,this);if(a||c||this.bh[b.which])this.bh[b.which]=n,b.preventDefault()};p.nb=function(){return{triggerKey:this.td}};
p.Lb=function(b){this.td=b.triggerKey};c.prototype.xj=function(b){return b===this.td};c.prototype.wj=F(n);c.prototype.Wl=F(n);c.prototype.em=function(b){return b===this.td};c.prototype.cm=function(b){return b===this.td};c.prototype.dm=function(b){return b===this.td};m.m=new c;m.P=new (A());m.S=new (A())})();function W(c){this.b=c}
(function(){function c(){if(0===this.Ch.length){var a=document.createElement("canvas");a.width=this.width;a.height=this.height;var b=a.getContext("2d");this.Ae?b.drawImage(this.u,this.ue,this.ve,this.width,this.height,0,0,this.width,this.height):b.drawImage(this.u,0,0,this.width,this.height);this.Ch=a.toDataURL("image/png")}return this.Ch}function m(){}function p(){}var k=W.prototype;k.Ma=function(a){this.pa=a;this.b=a.b};var b=k.Ma.prototype;b.Z=function(){if(!this.J){var a,b,d,e,f,g,k,m,p;a=0;for(b=
this.oa.length;a<b;a++){f=this.oa[a];k={};k.name=f[0];k.speed=f[1];k.loop=f[2];k.Pi=f[3];k.Ng=f[4];k.dl=f[5];k.L=f[6];k.frames=[];d=0;for(e=f[7].length;d<e;d++)g=f[7][d],m={},m.fj=g[0],m.gj=g[1],m.ue=g[2],m.ve=g[3],m.width=g[4],m.height=g[5],m.duration=g[6],m.ab=g[7],m.bb=g[8],m.Xh=g[9],m.Kg=g[10],m.el=g[11],m.Ae=0!==m.width,m.Ch="",m.kq=c,p={left:0,top:0,right:1,bottom:1},m.$i=p,m.da=q,(p=this.b.xn(g[0]))?m.u=p:(m.u=new Image,m.u.src=g[0],m.u.Fm=g[0],m.u.Wj=g[1],m.u.xc=q,this.b.Sc.push(m.u)),k.frames.push(m);
this.oa[a]=k}}};b.xq=function(){var a,b,c;a=0;for(b=this.i.length;a<b;a++)c=this.i[a],c.Te=c.wb.da};b.Ig=function(){if(!this.J){var a,b,c,d,e,f;a=0;for(b=this.oa.length;a<b;a++){e=this.oa[a];c=0;for(d=e.frames.length;c<d;c++)f=e.frames[c],f.u.xc=q,f.da=q}}};b.Bi=function(){if(!this.J&&this.i.length){var a,b,c,d,e,f;a=0;for(b=this.oa.length;a<b;a++){e=this.oa[a];c=0;for(d=e.frames.length;c<d;c++)f=e.frames[c],f.u.xc||(f.u.xc=this.b.A.Ag(f.u,r,this.b.na,f.el)),f.da=f.u.xc}a=0;for(b=this.i.length;a<
b;a++)c=this.i[a],c.Te=c.wb.da}};var a=[];b.pj=function(){if(!this.J&&!this.i.length){var b=!!this.b.A,c,d,e,f,g,k,m,p;c=a.length=0;for(d=this.oa.length;c<d;c++){k=this.oa[c];e=0;for(f=k.frames.length;e<f;e++)if(m=k.frames[e],p=b?m.u.xc:m.u)g=a.indexOf(p),-1===g&&a.push(p),m.u.xc=q,m.da=q}c=0;for(d=a.length;c<d;c++)p=a[c],b?this.b.A.deleteTexture(p):p.hintUnload&&p.hintUnload();a.length=0}};var d=[];b.Gi=function(a){var b,c,e,f,g,k;b=d.length=0;for(c=this.oa.length;b<c;b++){g=this.oa[b];e=0;for(f=
g.frames.length;e<f;e++)k=g.frames[e].u,-1===d.indexOf(k)&&(a.drawImage(k,0,0),d.push(k))}};k.xa=function(a){this.type=a;this.b=a.b;a=this.type.oa[0].frames[0].Kg;this.Ob?this.$.Ff(a):this.$=new Ia(a)};var e=k.xa.prototype;e.Z=function(){this.visible=0===this.T[0];this.Yh=this.ci=r;this.Yc=0!==this.T[3];!(1===this.type.oa.length&&1===this.type.oa[0].frames.length)&&0!==this.type.oa[0].speed&&(this.b.jj(this),this.ci=n);this.la=this.kk(this.T[1])||this.type.oa[0];this.B=this.T[2];0>this.B&&(this.B=
0);this.B>=this.la.frames.length&&(this.B=this.la.frames.length-1);var a=this.la.frames[this.B];this.$.Ff(a.Kg);this.ab=a.ab;this.bb=a.bb;this.Ue=this.la.speed;this.Cc=this.ig();this.wd=n;this.vc=0;this.vd=n;this.Vf=this.Lj="";this.Tj=0;this.vh=-1;var b,c,d,e,f,g,k,a=0;for(b=this.type.oa.length;a<b;a++){e=this.type.oa[a];c=0;for(d=e.frames.length;c<d;c++)f=e.frames[c],f.u.hintLoad&&f.u.hintLoad(),0===f.width&&(f.width=f.u.width,f.height=f.u.height),f.Ae&&(k=f.u,g=f.$i,g.left=f.ue/k.width,g.top=f.ve/
k.height,g.right=(f.ue+f.width)/k.width,g.bottom=(f.ve+f.height)/k.height,0===f.ue&&(0===f.ve&&f.width===k.width&&f.height===k.height)&&(f.Ae=r)),this.b.A&&(f.u.xc||(f.u.xc=this.b.A.Ag(f.u,r,this.b.na,f.el)),f.da=f.u.xc)}this.wb=this.la.frames[this.B];this.Te=this.wb.da};e.nb=function(){var a={a:this.la.L,f:this.B,cas:this.Ue,fs:this.Cc,ar:this.vc};this.wd||(a.ap=this.wd);this.vd||(a.af=this.vd);return a};e.Lb=function(a){var b=this.zn(a.a);b&&(this.la=b);this.B=a.f;0>this.B&&(this.B=0);this.B>=this.la.frames.length&&
(this.B=this.la.frames.length-1);this.Ue=a.cas;this.Cc=a.fs;this.vc=a.ar;this.wd=a.hasOwnProperty("ap")?a.ap:n;this.vd=a.hasOwnProperty("af")?a.af:n;this.wb=this.la.frames[this.B];this.Te=this.wb.da;this.$.Ff(this.wb.Kg);this.ab=this.wb.ab;this.bb=this.wb.bb};e.rh=function(a){this.B=a?0:this.la.frames.length-1;this.wd=r;this.Lj=this.la.name;this.Yh=n;this.b.trigger(W.prototype.m.Vl,this);this.b.trigger(W.prototype.m.Ul,this);this.Yh=r;this.vc=0};e.ig=function(){return(Date.now()-this.b.If)/1E3};e.rc=
function(){this.Vf.length&&this.bk();0<=this.vh&&this.Jm();var a=this.ig(),b=this.la,c=b.frames[this.B],d=c.duration/this.Ue,e=this.b.Ce;-1!==this.Ld&&(e=this.Ld);d/=0===e?1E-9:e;if(this.wd&&a>=this.Cc+d){this.vd?this.B++:this.B--;this.Cc+=d;this.B>=b.frames.length&&(b.dl?(this.vd=r,this.B=b.frames.length-2):b.loop?this.B=b.Ng:(this.vc++,this.vc>=b.Pi?this.rh(r):this.B=b.Ng));0>this.B&&(b.dl?(this.B=1,this.vd=n,b.loop||(this.vc++,this.vc>=b.Pi&&this.rh(n))):b.loop?this.B=b.Ng:(this.vc++,this.vc>=
b.Pi?this.rh(n):this.B=b.Ng));0>this.B?this.B=0:this.B>=b.frames.length&&(this.B=b.frames.length-1);if(a>this.Cc+b.frames[this.B].duration/this.Ue/(0===e?1E-9:e))this.Cc=a;a=b.frames[this.B];this.Ie(c,a);this.b.V=n}};e.kk=function(a){var b,c,d=a.toLowerCase();a=0;for(b=this.type.oa.length;a<b;a++)if(c=this.type.oa[a],c.name.toLowerCase()===d)return c;return q};e.zn=function(a){var b,c,d;b=0;for(c=this.type.oa.length;b<c;b++)if(d=this.type.oa[b],d.L===a)return d;return q};e.bk=function(){var a=this.la.frames[this.B],
b=this.kk(this.Vf);this.Vf="";b&&!(b.name.toLowerCase()===this.la.name.toLowerCase()&&this.wd)&&(this.la=b,this.Ue=b.speed,0>this.B&&(this.B=0),this.B>=this.la.frames.length&&(this.B=this.la.frames.length-1),1===this.Tj&&(this.B=0),this.wd=n,this.Cc=this.ig(),this.vd=n,this.Ie(a,this.la.frames[this.B]),this.b.V=n)};e.Jm=function(){var a=this.la.frames[this.B],b=this.B;this.B=ha(this.vh);0>this.B&&(this.B=0);this.B>=this.la.frames.length&&(this.B=this.la.frames.length-1);b!==this.B&&(this.Ie(a,this.la.frames[this.B]),
this.Cc=this.ig(),this.b.V=n);this.vh=-1};e.Ie=function(a,b){var c=a.width,d=a.height,e=b.width,f=b.height;c!=e&&(this.width*=e/c);d!=f&&(this.height*=f/d);this.ab=b.ab;this.bb=b.bb;this.$.Ff(b.Kg);this.r();this.wb=b;this.Te=b.da;c=0;for(d=this.N.length;c<d;c++)e=this.N[c],e.zo&&e.zo(a,b);this.b.trigger(W.prototype.m.Ie,this)};e.ec=function(a){a.globalAlpha=this.opacity;var b=this.wb,c=b.Ae,d=b.u,e=this.x,f=this.y,g=this.width,k=this.height;if(0===this.k&&0<=g&&0<=k)e-=this.ab*g,f-=this.bb*k,this.b.mc&&
(e=e+0.5|0,f=f+0.5|0),c?a.drawImage(d,b.ue,b.ve,b.width,b.height,e,f,g,k):a.drawImage(d,e,f,g,k);else{this.b.mc&&(e=e+0.5|0,f=f+0.5|0);a.save();var m=0<g?1:-1,p=0<k?1:-1;a.translate(e,f);(1!==m||1!==p)&&a.scale(m,p);a.rotate(this.k*m*p);e=0-this.ab*ea(g);f=0-this.bb*ea(k);c?a.drawImage(d,b.ue,b.ve,b.width,b.height,e,f,ea(g),ea(k)):a.drawImage(d,e,f,ea(g),ea(k));a.restore()}};e.Ib=function(a){a.Cb(this.Te);a.Qd(this.opacity);var b=this.wb,c=this.Na;if(this.b.mc){var d=(this.x+0.5|0)-this.x,e=(this.y+
0.5|0)-this.y;b.Ae?a.oc(c.ja+d,c.ka+e,c.Ja+d,c.Ka+e,c.Ga+d,c.Ha+e,c.Ea+d,c.Fa+e,b.$i):a.Mg(c.ja+d,c.ka+e,c.Ja+d,c.Ka+e,c.Ga+d,c.Ha+e,c.Ea+d,c.Fa+e)}else b.Ae?a.oc(c.ja,c.ka,c.Ja,c.Ka,c.Ga,c.Ha,c.Ea,c.Fa,b.$i):a.Mg(c.ja,c.ka,c.Ja,c.Ka,c.Ga,c.Ha,c.Ea,c.Fa)};e.En=function(a){var b=this.wb,c,d;c=0;for(d=b.Xh.length;c<d;c++)if(a.toLowerCase()===b.Xh[c][0].toLowerCase())return c;return-1};e.Qh=function(a,b){var c=this.wb,d=c.Xh,e;e=M(a)?this.En(a):a-1;e=ha(e);if(0>e||e>=d.length)return b?this.x:this.y;
var f=(d[e][1]-c.ab)*this.width,d=d[e][2],d=(d-c.bb)*this.height,c=Math.cos(this.k);e=Math.sin(this.k);var g=f*c-d*e,d=d*c+f*e,f=g+this.x,d=d+this.y;return b?f:d};var g=new Fa,f=r;b.finish=function(a){if(f){if(a){var b=this.b.xb().Ub.jc;a=q.ca();var c=g.Vd(),d,e;if(a.ia){a.ia=r;a.i.length=c.length;d=0;for(e=c.length;d<e;d++)a.i[d]=c[d];if(b){d=a.aa.length=0;for(e=q.i.length;d<e;d++)b=q.i[d],g.contains(b)||a.aa.push(b)}}else{var k=a.i.length;a.i.length=k+c.length;d=0;for(e=c.length;d<e;d++)a.i[k+d]=
c[d],b&&oa(a.aa,c[d])}q.Ke()}g.clear();f=r}};m.prototype.Ul=function(a){return this.Lj.toLowerCase()===a.toLowerCase()};m.prototype.Vl=F(n);m.prototype.Ie=F(n);k.m=new m;p.prototype.Fj=function(a,b){this.Vf=a;this.Tj=b;this.ci||(this.b.jj(this),this.ci=n);this.Yh||this.bk()};k.P=new p;k.S=new (A())})();function Hb(c){this.b=c}
(function(){function c(){return d.length?d.pop():{}}function m(a){var b,c;b=0;for(c=a.length;b<c;b++)d.push(a[b]);a.length=0}function p(){}var k=Hb.prototype;k.Z=function(){k.P.pm=function(a){this.width!==a&&(this.width=a,this.Td=n,this.r())}};k.Ma=function(a){this.pa=a;this.b=a.b};var b=k.Ma.prototype;b.Z=A();b.Ig=function(){if(!this.J){var a,b,c;a=0;for(b=this.i.length;a<b;a++)c=this.i[a],c.ic=q,c.Md=q,c.jb=q}};k.xa=function(a){this.type=a;this.b=a.b;this.Ob?this.gd.length=0:this.gd=[];this.Td=
n};b=k.xa.prototype;b.Z=function(){this.text=this.T[0];this.visible=0===this.T[1];this.font=this.T[2];this.color=this.T[3];this.lg=this.T[4];this.dh=this.T[5];this.uj=0===this.T[7];this.hi=this.Jd=this.width;this.Id=this.height;this.ki=this.T[8];this.eg=this.ae="";var a=this.font.split(" ");this.Al=this.Bl=this.Cf=0;var b;for(b=0;b<a.length;b++)if("pt"===a[b].substr(a[b].length-2,2)){this.Cf=parseInt(a[b].substr(0,a[b].length-2));this.Li=Math.ceil(96*(this.Cf/72))+4;0<b&&(this.eg=a[b-1]);this.ae=
a[b+1];for(b+=2;b<a.length;b++)this.ae+=" "+a[b];break}this.jb=this.Md=this.ic=q;this.Wk=r;this.uf=this.b.Pc;this.Ob?this.kd.set(0,0,1,1):this.kd=new ja(0,0,1,1);this.b.A&&this.b.jj(this)};b.nb=function(){return{t:this.text,f:this.font,c:this.color,ha:this.lg,va:this.dh,wr:this.uj,lho:this.ki,fn:this.ae,fs:this.eg,ps:this.Cf,pxh:this.Li,tw:this.Bl,th:this.Al,lrt:this.uf}};b.Lb=function(a){this.text=a.t;this.font=a.f;this.color=a.c;this.lg=a.ha;this.dh=a.va;this.uj=a.wr;this.ki=a.lho;this.ae=a.fn;
this.eg=a.fs;this.Cf=a.ps;this.Li=a.pxh;this.Bl=a.tw;this.Al=a.th;this.uf=a.lrt;this.Td=n;this.hi=this.Jd=this.width;this.Id=this.height};b.rc=function(){if(this.b.A&&this.jb&&300<=this.b.Pc-this.uf){var a=this.j;this.pb();var b=this.M;if(b.right<a.rb||b.bottom<a.tb||b.left>a.sb||b.top>a.qb)this.b.A.deleteTexture(this.jb),this.ic=this.Md=this.jb=q}};b.we=function(){this.ic=this.Md=q;this.b.A&&this.jb&&this.b.A.deleteTexture(this.jb);this.jb=q};b.yq=function(){this.font=this.eg+" "+this.Cf.toString()+
"pt "+this.ae;this.Td=n;this.b.V=n};b.ec=function(a,b){a.font=this.font;a.textBaseline="top";a.fillStyle=this.color;a.globalAlpha=b?1:this.opacity;var c=1;b&&(c=this.j.hb(),a.save(),a.scale(c,c));if(this.Td||this.width!==this.hi)this.type.pa.tm(this.text,this.gd,a,this.width,this.uj),this.Td=r,this.hi=this.width;this.pb();var c=b?0:this.Na.ja,d=b?0:this.Na.ka;this.b.mc&&(c=c+0.5|0,d=d+0.5|0);0!==this.k&&!b&&(a.save(),a.translate(c,d),a.rotate(this.k),d=c=0);var k=d+this.height,m=this.Li,m=m+this.ki*
this.b.devicePixelRatio,p,u;1===this.dh?d+=Math.max(this.height/2-this.gd.length*m/2,0):2===this.dh&&(d+=Math.max(this.height-this.gd.length*m-2,0));for(u=0;u<this.gd.length&&!(p=c,1===this.lg?p=c+(this.width-this.gd[u].width)/2:2===this.lg&&(p=c+(this.width-this.gd[u].width)),a.fillText(this.gd[u].text,p,d),d+=m,d>=k-m);u++);(0!==this.k||b)&&a.restore();this.uf=this.b.Pc};b.Ib=function(a){if(!(1>this.width||1>this.height)){var b=this.Td||this.Wk;this.Wk=r;var c=this.j.hb(),d=this.j.Dc(),k=this.kd,
m=c*this.width,p=c*this.height,u=Math.ceil(m),t=Math.ceil(p),s=this.b.width/2,y=this.b.height/2;this.Md||(this.ic=document.createElement("canvas"),this.ic.width=u,this.ic.height=t,this.Jd=u,this.Id=t,b=n,this.Md=this.ic.getContext("2d"));if(u!==this.Jd||t!==this.Id)this.ic.width=u,this.ic.height=t,this.jb&&(a.deleteTexture(this.jb),this.jb=q),b=n;b&&(this.Md.clearRect(0,0,u,t),this.ec(this.Md,n),this.jb||(this.jb=a.yc(u,t,this.b.na,this.b.cd)),a.dp(this.ic,this.jb,this.b.cd));this.Jd=u;this.Id=t;
a.Cb(this.jb);a.Qd(this.opacity);a.pc();a.translate(-s,-y);a.sc();var C=this.Na,b=this.j.fa(C.ja,C.ka,n),s=this.j.fa(C.ja,C.ka,r),y=this.j.fa(C.Ja,C.Ka,n),E=this.j.fa(C.Ja,C.Ka,r),S=this.j.fa(C.Ga,C.Ha,n),ga=this.j.fa(C.Ga,C.Ha,r),G=this.j.fa(C.Ea,C.Fa,n),C=this.j.fa(C.Ea,C.Fa,r);if(this.b.mc||0===this.k&&0===d)var D=(b+0.5|0)-b,v=(s+0.5|0)-s,b=b+D,s=s+v,y=y+D,E=E+v,S=S+D,ga=ga+v,G=G+D,C=C+v;0===this.k&&0===d?(y=b+u,E=s,S=y,ga=s+t,G=b,C=ga,k.right=1,k.bottom=1):(k.right=m/u,k.bottom=p/t);a.oc(b,s,
y,E,S,ga,G,C,k);a.pc();a.scale(c,c);a.Ri(-this.j.Dc());a.translate((this.j.rb+this.j.sb)/-2,(this.j.tb+this.j.qb)/-2);a.sc();this.uf=this.b.Pc}};var a=[];k.rm=function(b){a.length=0;for(var c="",d,h=0;h<b.length;)if(d=b.charAt(h),"\n"===d)c.length&&(a.push(c),c=""),a.push("\n"),++h;else if(" "===d||"\t"===d||"-"===d){do c+=b.charAt(h),h++;while(h<b.length&&(" "===b.charAt(h)||"\t"===b.charAt(h)));a.push(c);c=""}else h<b.length&&(c+=d,h++);c.length&&a.push(c)};var d=[];k.tm=function(a,b,d,h,k){if(!a||
!a.length)m(b);else if(2>=h)m(b);else{if(100>=a.length&&-1===a.indexOf("\n")){var p=d.measureText(a).width;if(p<=h){m(b);b.push(c());b[0].text=a;b[0].width=p;return}}this.um(a,b,d,h,k)}};k.um=function(b,g,f,h,k){k&&(this.rm(b),b=a);var m="",p,u,t,s=0;for(t=0;t<b.length;t++)"\n"===b[t]?(s>=g.length&&g.push(c()),u=g[s],u.text=m,u.width=f.measureText(m).width,s++,m=""):(p=m,m+=b[t],u=f.measureText(m).width,u>=h&&(s>=g.length&&g.push(c()),u=g[s],u.text=p,u.width=f.measureText(p).width,s++,m=b[t],!k&&
" "===m&&(m="")));m.length&&(s>=g.length&&g.push(c()),u=g[s],u.text=m,u.width=f.measureText(m).width,s++);for(t=s;t<g.length;t++)d.push(g[t]);g.length=s};k.m=new (A());p.prototype.nm=function(a){L(a)&&1E9>a&&(a=Math.round(1E10*a)/1E10);a=a.toString();this.text!==a&&(this.text=a,this.Td=n,this.b.V=n)};k.P=new p;k.S=new (A())})();function X(c){this.b=c}
(function(){var c=X.prototype;c.Ma=function(c){this.pa=c;this.b=c.b};var m=c.Ma.prototype;m.Z=function(){this.J||(this.u=new Image,this.u.src=this.fj,this.u.Wj=this.gj,this.b.Sc.push(this.u),this.da=this.pattern=q)};m.Ig=function(){this.J||(this.da=q)};m.Bi=function(){if(!this.J&&this.i.length){this.da||(this.da=this.b.A.Ag(this.u,n,this.b.na,this.hj));var c,k;c=0;for(k=this.i.length;c<k;c++)this.i[c].da=this.da}};m.pj=function(){!this.J&&!this.i.length&&(this.b.A?this.da&&(this.b.A.deleteTexture(this.da),
this.da=q):this.u.hintUnload&&this.u.hintUnload())};m.Gi=function(c){c.drawImage(this.u,0,0)};c.xa=function(c){this.type=c;this.b=c.b};m=c.xa.prototype;m.Z=function(){this.visible=0===this.T[0];this.kd=new ja(0,0,0,0);this.rk=r;this.u=this.type.u;this.b.A?(this.type.da||(this.type.da=this.b.A.Ag(this.type.u,n,this.b.na,this.type.hj)),this.da=this.type.da):(this.u.hintLoad&&this.u.hintLoad(),this.type.pattern||(this.type.pattern=this.b.U.createPattern(this.type.u,"repeat")),this.pattern=this.type.pattern)};
m.Je=function(){this.rk=r;this.u=this.type.u};m.we=function(){this.b.A&&(this.rk&&this.da)&&(this.b.A.deleteTexture(this.da),this.da=q)};m.ec=function(c){c.globalAlpha=this.opacity;c.save();c.fillStyle=this.pattern;var k=this.x,b=this.y;this.b.mc&&(k=k+0.5|0,b=b+0.5|0);var a=-(this.ab*this.width),d=-(this.bb*this.height),e=a%this.u.width,g=d%this.u.height;0>e&&(e+=this.u.width);0>g&&(g+=this.u.height);c.translate(k,b);c.rotate(this.k);c.translate(e,g);c.fillRect(a-e,d-g,this.width,this.height);c.restore()};
m.Ib=function(c){c.Cb(this.da);c.Qd(this.opacity);var k=this.kd;k.right=this.width/this.u.width;k.bottom=this.height/this.u.height;var b=this.Na;if(this.b.mc){var a=(this.x+0.5|0)-this.x,d=(this.y+0.5|0)-this.y;c.oc(b.ja+a,b.ka+d,b.Ja+a,b.Ka+d,b.Ga+a,b.Ha+d,b.Ea+a,b.Fa+d,k)}else c.oc(b.ja,b.ka,b.Ja,b.Ka,b.Ga,b.Ha,b.Ea,b.Fa,k)};c.m=new (A());c.P=new (A());c.S=new (A())})();function Y(c){this.b=c}
(function(){function c(a){e=a.x;g=a.y;f=a.Ml}function m(a){h=a.x;l=a.y;x=a.Ml}function p(){}function k(){}var b=Y.prototype;b.Ma=function(a){this.pa=a;this.b=a.b};b.Ma.prototype.Z=A();b.xa=function(a){this.type=a;this.b=a.b;this.touches=[];this.ti=r};var a=b.xa.prototype,d={left:0,top:0};a.cg=function(a){var b,c;b=0;for(c=this.touches.length;b<c;b++)if(this.touches[b].id===a)return b;return-1};var e=0,g=0,f=0,h=0,l=0,x=0;a.Z=function(){this.jo=!!("undefined"!==typeof window.c2isWindows8&&window.c2isWindows8);
this.Zg=this.ud=this.Ah=this.zh=this.Jj=this.Ij=this.Hj=this.ym=this.xm=this.wm=this.Af=this.zf=this.yf=0;this.$o=0!==this.T[0];var a=0<this.b.Jb?document:this.b.canvas,b=document;this.b.Hc?b=a=window.Canvas:this.b.Gc&&(b=a=window);var d=this;window.navigator.msPointerEnabled?(a.addEventListener("MSPointerDown",function(a){d.yo(a)},r),a.addEventListener("MSPointerMove",function(a){d.xo(a)},r),b.addEventListener("MSPointerUp",function(a){d.$k(a)},r),b.addEventListener("MSPointerCancel",function(a){d.$k(a)},
r),this.b.canvas&&(this.b.canvas.addEventListener("MSGestureHold",function(a){a.preventDefault()},r),document.addEventListener("MSGestureHold",function(a){a.preventDefault()},r))):(a.addEventListener("touchstart",function(a){d.bl(a)},r),a.addEventListener("touchmove",function(a){d.al(a)},r),b.addEventListener("touchend",function(a){d.Ci(a)},r),b.addEventListener("touchcancel",function(a){d.Ci(a)},r));if(this.jo){var e=function(a){a=a.reading;d.Hj=a.accelerationX;d.Ij=a.accelerationY;d.Jj=a.accelerationZ},
f=function(a){a=a.reading;d.yf=a.yawDegrees;d.zf=a.pitchDegrees;d.Af=a.rollDegrees},g=Windows.Devices.Sensors.Accelerometer.getDefault();g&&(g.reportInterval=Math.max(g.minimumReportInterval,16),g.addEventListener("readingchanged",e));var h=Windows.Devices.Sensors.Inclinometer.getDefault();h&&(h.reportInterval=Math.max(h.minimumReportInterval,16),h.addEventListener("readingchanged",f));document.addEventListener("visibilitychange",function(){document.hidden||document.msHidden?(g&&g.removeEventListener("readingchanged",
e),h&&h.removeEventListener("readingchanged",f)):(g&&g.addEventListener("readingchanged",e),h&&h.addEventListener("readingchanged",f))},r)}else window.addEventListener("deviceorientation",function(a){d.yf=a.alpha||0;d.zf=a.beta||0;d.Af=a.gamma||0},r),window.addEventListener("devicemotion",function(a){a.accelerationIncludingGravity&&(d.wm=a.accelerationIncludingGravity.x,d.xm=a.accelerationIncludingGravity.y,d.ym=a.accelerationIncludingGravity.z);a.acceleration&&(d.Hj=a.acceleration.x,d.Ij=a.acceleration.y,
d.Jj=a.acceleration.z)},r);this.$o&&!this.b.Va&&(jQuery(document).mousemove(function(a){d.vo(a)}),jQuery(document).mousedown(function(a){d.uo(a)}),jQuery(document).mouseup(function(a){d.wo(a)}));this.b.hf&&!this.b.Hc&&AppMobi.accelerometer.watchAcceleration(c,{frequency:40,adjustForRotation:n});this.b.fe&&navigator.accelerometer.watchAcceleration(m,q,{frequency:40});this.b.Xo(this)};a.xo=function(a){if(a.pointerType!==a.MSPOINTER_TYPE_MOUSE){a.preventDefault&&a.preventDefault();var b=this.cg(a.pointerId),
c=R();if(0<=b){var e=this.b.Va?d:jQuery(this.b.canvas).offset(),b=this.touches[b];2>c-b.time||(b.wg=b.time,b.ed=b.x,b.fd=b.y,b.time=c,b.x=a.pageX-e.left,b.y=a.pageY-e.top)}}};a.yo=function(a){if(a.pointerType!==a.MSPOINTER_TYPE_MOUSE){a.preventDefault&&a.preventDefault();var b=this.b.Va?d:jQuery(this.b.canvas).offset(),c=a.pageX-b.left,b=a.pageY-b.top,e=R();this.ud=this.touches.length;this.Zg=a.pointerId;this.touches.push({time:e,x:c,y:b,wg:e,ed:c,fd:b,id:a.pointerId,cj:this.ud});this.b.trigger(Y.prototype.m.Cj,
this);this.b.trigger(Y.prototype.m.lh,this);this.zh=c;this.Ah=b;this.b.trigger(Y.prototype.m.Ej,this)}};a.$k=function(a){a.pointerType!==a.MSPOINTER_TYPE_MOUSE&&(a.preventDefault&&a.preventDefault(),a=this.cg(a.pointerId),this.ud=0<=a?this.touches[a].cj:-1,this.Zg=0<=a?this.touches[a].id:-1,this.b.trigger(Y.prototype.m.Bj,this),this.b.trigger(Y.prototype.m.Dj,this),0<=a&&this.touches.splice(a,1))};a.al=function(a){a.preventDefault&&a.preventDefault();var b=R(),c,e,f,g;c=0;for(e=a.changedTouches.length;c<
e;c++)if(f=a.changedTouches[c],g=this.cg(f.identifier),0<=g){var h=this.b.Va?d:jQuery(this.b.canvas).offset();g=this.touches[g];2>b-g.time||(g.wg=g.time,g.ed=g.x,g.fd=g.y,g.time=b,g.x=f.pageX-h.left,g.y=f.pageY-h.top)}};a.bl=function(a){a.preventDefault&&a.preventDefault();var b=this.b.Va?d:jQuery(this.b.canvas).offset(),c=R(),e,f,g;e=0;for(f=a.changedTouches.length;e<f;e++){g=a.changedTouches[e];var h=g.pageX-b.left,k=g.pageY-b.top;this.ud=this.touches.length;this.Zg=g.identifier;this.touches.push({time:c,
x:h,y:k,wg:c,ed:h,fd:k,id:g.identifier,cj:this.ud});this.b.trigger(Y.prototype.m.Cj,this);this.b.trigger(Y.prototype.m.lh,this);this.zh=h;this.Ah=k;this.b.trigger(Y.prototype.m.Ej,this)}};a.Ci=function(a){a.preventDefault&&a.preventDefault();var b,c,d;b=0;for(c=a.changedTouches.length;b<c;b++)d=a.changedTouches[b],d=this.cg(d.identifier),this.ud=0<=d?this.touches[d].cj:-1,this.Zg=0<=d?this.touches[d].id:-1,this.b.trigger(Y.prototype.m.Bj,this),this.b.trigger(Y.prototype.m.Dj,this),0<=d&&this.touches.splice(d,
1)};a.iq=function(){return this.b.hf&&0===this.yf&&0!==f?90*f:this.b.fe&&0===this.yf&&0!==x?90*x:this.yf};a.jq=function(){return this.b.hf&&0===this.zf&&0!==g?-90*g:this.b.fe&&0===this.zf&&0!==l?-90*l:this.zf};a.mq=function(){return this.b.hf&&0===this.Af&&0!==e?90*e:this.b.fe&&0===this.Af&&0!==h?90*h:this.Af};a.uo=function(a){a.preventDefault&&this.b.kg&&a.preventDefault();this.bl({changedTouches:[{pageX:a.pageX,pageY:a.pageY,identifier:0}]});this.ti=n};a.vo=function(a){a.preventDefault&&this.b.kg&&
a.preventDefault();this.ti&&this.al({changedTouches:[{pageX:a.pageX,pageY:a.pageY,identifier:0}]})};a.wo=function(a){a.preventDefault&&this.b.kg&&a.preventDefault();this.b.kg=n;this.Ci({changedTouches:[{pageX:a.pageX,pageY:a.pageY,identifier:0}]});this.ti=r};a.ij=function(){var a,b,c,d=R();a=0;for(b=this.touches.length;a<b;a++)c=this.touches[a],c.time<=d-50&&(c.wg=d)};p.prototype.lh=F(n);p.prototype.Dj=F(n);p.prototype.Ej=function(a){return!a?r:this.b.Wo(a,this.zh,this.Ah)};p.prototype.Cj=function(a){a=
Math.floor(a);return a===this.ud};p.prototype.Bj=function(a){a=Math.floor(a);return a===this.ud};b.m=new p;k.prototype.Qf=function(a,b){if(this.touches.length){var c,d,e,f,g;ca(b)?(c=this.b.$e(0),d=c.scale,e=c.$b,f=c.kc,g=c.k,c.scale=this.b.R.scale,c.$b=1,c.kc=1,c.k=this.b.R.k,a.H(c.fb(this.touches[0].x,this.touches[0].y,n)),c.scale=d,c.$b=e,c.kc=f,c.k=g):(c=L(b)?this.b.$e(b):this.b.Rh(b))?a.H(c.fb(this.touches[0].x,this.touches[0].y,n)):a.H(0)}else a.H(0)};k.prototype.vm=function(a,b){if(this.touches.length){var c,
d,e,f,g;ca(b)?(c=this.b.$e(0),d=c.scale,e=c.$b,f=c.lc,g=c.k,c.scale=this.b.R.scale,c.$b=1,c.lc=1,c.k=this.b.R.k,a.H(c.fb(this.touches[0].x,this.touches[0].y,r)),c.scale=d,c.$b=e,c.lc=f,c.k=g):(c=L(b)?this.b.$e(b):this.b.Rh(b))?a.H(c.fb(this.touches[0].x,this.touches[0].y,r)):a.H(0)}else a.H(0)};b.S=new k})();function Ib(c){this.b=c}
(function(){function c(){}function m(){}var p=Ib.prototype;p.Ma=function(b,a){this.Xa=b;this.Zk=a;this.b=b.b};p.Ma.prototype.Z=A();p.xa=function(b,a){this.type=b;this.Xa=b.Xa;this.d=a;this.b=b.b};var k=p.xa.prototype;k.Z=function(){var b=this.T[0];this.Rb=this.T[1];this.gb=this.T[2];this.Dm=0!==this.T[3];this.Wi=0!==this.T[4];this.n=Math.cos(this.d.k)*b;this.q=Math.sin(this.d.k)*b;this.ed=this.d.x;this.fd=this.d.y;this.je=this.d.k;this.Yg=0;this.enabled=n};k.nb=function(){return{acc:this.Rb,g:this.gb,
dx:this.n,dy:this.q,lx:this.ed,ly:this.fd,lka:this.je,t:this.Yg,e:this.enabled}};k.Lb=function(b){this.Rb=b.acc;this.gb=b.g;this.n=b.dx;this.q=b.dy;this.ed=b.lx;this.fd=b.ly;this.je=b.lka;this.Yg=b.t;this.enabled=b.e};k.rc=function(){if(this.enabled){var b=this.b.Nh(this.d),a,c;this.d.k!==this.je&&(this.Wi&&(a=Ba(0,0,this.n,this.q),this.n=Math.cos(this.d.k)*a,this.q=Math.sin(this.d.k)*a),this.je=this.d.k);0!==this.Rb&&(a=Ba(0,0,this.n,this.q),c=0===this.n&&0===this.q?this.d.k:xa(0,0,this.n,this.q),
a+=this.Rb*b,0>a&&(a=0),this.n=Math.cos(c)*a,this.q=Math.sin(c)*a);0!==this.gb&&(this.q+=this.gb*b);this.ed=this.d.x;this.fd=this.d.y;if(0!==this.n||0!==this.q)if(this.d.x+=this.n*b,this.d.y+=this.q*b,this.Yg+=Ba(0,0,this.n*b,this.q*b),this.Wi&&(this.d.k=xa(0,0,this.n,this.q),this.d.r(),this.je=this.d.k),this.d.r(),this.Dm&&(a=this.b.Ua(this.d)))this.b.ye(this.d,a),a=Ba(0,0,this.n,this.q),c=this.b.Em(this.d,this.ed,this.fd),this.n=Math.cos(c)*a,this.q=Math.sin(c)*a,this.d.x+=this.n*b,this.d.y+=this.q*
b,this.d.r(),this.Wi&&(this.je=this.d.k=c,this.d.r()),this.b.nc(this.d,this.n/a,this.q/a,Math.max(2.5*a*b,30))||this.b.ll(this.d,100)}};p.m=new (A());c.prototype.mh=function(b){b=P(b);var a=Ba(0,0,this.n,this.q);this.n=Math.cos(b)*a;this.q=Math.sin(b)*a};p.P=new c;m.prototype.oh=function(b){var a=Ba(0,0,this.n,this.q),a=La(a);b.H(a)};p.S=new m})();function Z(c){this.b=c}
(function(){function c(){}function m(){}function p(){}var k=Z.prototype;k.Ma=function(a,b){this.Xa=a;this.Zk=b;this.b=a.b};k.Ma.prototype.Z=A();k.xa=function(a,b){this.type=a;this.Xa=a.Xa;this.d=b;this.b=a.b;this.Hf=this.Sg=this.Rg=this.Wh=this.he=this.rf=this.Og=this.yg=r;this.Ab=q;this.li=-1;this.Tb=this.Gd=this.Fd=0;this.enabled=n;this.Ad=0;this.dg=n;this.q=this.n=0};var b=k.xa.prototype;b.Kl=function(){this.Pa=Math.cos(this.de);this.Qa=Math.sin(this.de);this.Od=Math.cos(this.de-Math.PI/2);this.Pd=
Math.sin(this.de-Math.PI/2);this.Pa=La(this.Pa);this.Qa=La(this.Qa);this.Od=La(this.Od);this.Pd=La(this.Pd);this.Lh=this.gb;0>this.gb&&(this.Pa*=-1,this.Qa*=-1,this.gb=Math.abs(this.gb))};b.Z=function(){this.re=this.T[0];this.Rb=this.T[1];this.$d=this.T[2];this.fi=this.T[3];this.Lh=this.gb=this.T[4];this.Fg=this.T[5];this.Im=1===this.T[6];this.Fe=r;this.fh=this.b.Oc(this.d);this.de=P(90);this.Kl();var a=this;this.Im&&!this.b.Va&&(jQuery(document).keydown(function(b){a.xi(b)}),jQuery(document).keyup(function(b){a.yi(b)}));
this.Ob||(this.Vk=function(b){a.to(b)});this.b.zm(this.Vk)};b.nb=function(){return{ii:this.Wh,lfx:this.Fd,lfy:this.Gd,lfo:this.Ab?this.Ab.uid:-1,am:this.Tb,en:this.enabled,fall:this.Ad,ft:this.dg,dx:this.n,dy:this.q,ms:this.re,acc:this.Rb,dec:this.$d,js:this.fi,g:this.gb,g1:this.Lh,mf:this.Fg,wof:this.Fe,woj:this.fh,ga:this.de}};b.Lb=function(a){this.Wh=a.ii;this.Fd=a.lfx;this.Gd=a.lfy;this.li=a.lfo;this.Tb=a.am;this.enabled=a.en;this.Ad=a.fall;this.dg=a.ft;this.n=a.dx;this.q=a.dy;this.re=a.ms;this.Rb=
a.acc;this.$d=a.dec;this.fi=a.js;this.gb=a.g;this.Lh=a.g1;this.Fg=a.mf;this.Fe=a.wof;this.fh=a.woj;this.de=a.ga;this.Hf=this.Sg=this.Rg=this.he=this.rf=this.Og=this.yg=r;this.Kl()};b.Je=function(){this.Ab=-1===this.li?q:this.b.Sh(this.li)};b.to=function(a){this.Ab==a&&(this.Ab=q)};b.we=function(){this.Ab=q;this.b.Ho(this.Vk)};b.xi=function(a){switch(a.which){case 38:a.preventDefault();this.rf=n;break;case 37:a.preventDefault();this.yg=n;break;case 39:a.preventDefault(),this.Og=n}};b.yi=function(a){switch(a.which){case 38:a.preventDefault();
this.he=this.rf=r;break;case 37:a.preventDefault();this.yg=r;break;case 39:a.preventDefault(),this.Og=r}};b.lq=function(){return 0>this.gb?-1:1};b.Bk=function(){var a=q,b=q,c,g;c=this.d.x;g=this.d.y;this.d.x+=this.Pa;this.d.y+=this.Qa;this.d.r();if(this.Ab&&this.b.eb(this.d,this.Ab))return this.d.x=c,this.d.y=g,this.d.r(),this.Ab;a=this.b.Ua(this.d);!a&&0===this.Ad&&(b=this.b.Oc(this.d,n));this.d.x=c;this.d.y=g;this.d.r();if(a)return this.b.eb(this.d,a)?q:a;if(b&&b.length){g=a=0;for(c=b.length;a<
c;a++)b[g]=b[a],this.b.eb(this.d,b[a])||g++;if(1<=g)return b[0]}return q};b.rc=A();b.hl=function(){var a=this.b.Nh(this.d),b,c,g,f,h,k,m,p,u;!this.rf&&!this.Hf&&(this.he=r);var t=this.yg||this.Rg;g=this.Og||this.Sg;var s=(this.rf||this.Hf)&&!this.he;this.Hf=this.Sg=this.Rg=r;if(this.enabled){this.Wh&&(s=g=t=r);p=this.Ab;u=r;this.dg&&((this.b.Ua(this.d)||this.b.Oc(this.d))&&this.b.nc(this.d,-this.Pa,-this.Qa,4,n),this.dg=r);if(p&&0===this.q&&(p.y!==this.Gd||p.x!==this.Fd))b=p.x-this.Fd,c=p.y-this.Gd,
this.d.x+=b,this.d.y+=c,this.d.r(),this.Fd=p.x,this.Gd=p.y,u=n,this.b.Ua(this.d)&&this.b.nc(this.d,-b,-c,2.5*Math.sqrt(b*b+c*c));var y=this.Bk();if(c=this.b.Ua(this.d))if(this.b.ll(this.d,Math.max(this.d.width,this.d.height)/2))this.b.ye(this.d,c);else return;if(y){0<this.q&&(this.Fe||(this.b.Ki(this.d,-this.Pa,-this.Qa,y),this.Fe=n),this.q=0);if(p!=y)this.Ab=y,this.Fd=y.x,this.Gd=y.y,this.b.ye(this.d,y);else if(u&&(c=this.b.Ua(this.d)))this.b.ye(this.d,c),0!==b&&(0<b?this.b.nc(this.d,-this.Od,-this.Pd):
this.b.nc(this.d,this.Od,this.Pd)),this.b.nc(this.d,-this.Pa,-this.Qa);s&&(p=this.d.x,u=this.d.y,this.d.x-=this.Pa,this.d.y-=this.Qa,this.d.r(),this.b.Ua(this.d)?s=r:(this.q=-this.fi,this.b.trigger(Z.prototype.m.$l,this.d),this.Tb=2,this.he=n),this.d.x=p,this.d.y=u,this.d.r())}else this.Ab=q,this.q+=this.gb*a,this.q>this.Fg&&(this.q=this.Fg),s&&(this.he=n);this.Fe=!!y;t==g&&(0>this.n?(this.n+=this.$d*a,0<this.n&&(this.n=0)):0<this.n&&(this.n-=this.$d*a,0>this.n&&(this.n=0)));t&&!g&&(this.n=0<this.n?
this.n-(this.Rb+this.$d)*a:this.n-this.Rb*a);g&&!t&&(this.n=0>this.n?this.n+(this.Rb+this.$d)*a:this.n+this.Rb*a);this.n>this.re?this.n=this.re:this.n<-this.re&&(this.n=-this.re);t=r;if(0!==this.n){p=this.d.x;u=this.d.y;b=this.n*a*this.Od;c=this.n*a*this.Pd;this.d.x+=this.Od*(1<this.n?1:-1)-this.Pa;this.d.y+=this.Pd*(1<this.n?1:-1)-this.Qa;this.d.r();f=r;h=this.b.Ua(this.d);this.d.x=p+b;this.d.y=u+c;this.d.r();g=this.b.Ua(this.d);if(!g&&y&&(g=this.b.Oc(this.d)))this.d.x=p,this.d.y=u,this.d.r(),this.b.eb(this.d,
g)?(g=q,f=r):f=n,this.d.x=p+b,this.d.y=u+c,this.d.r();if(g)if(b=Math.abs(this.n*a)+2,h||!this.b.nc(this.d,-this.Pa,-this.Qa,b,f,g)){this.b.ye(this.d,g);b=Math.max(Math.abs(2.5*this.n*a),30);if(!this.b.nc(this.d,this.Od*(0>this.n?1:-1),this.Pd*(0>this.n?1:-1),b,r))this.d.x=p,this.d.y=u,this.d.r();f||(this.n=0)}else!h&&15>Math.abs(this.q)&&(this.q=0,y||(t=n));else p=this.Bk(),y&&!p?(c=Math.ceil(Math.abs(this.n*a))+2,p=this.d.x,u=this.d.y,this.d.x+=this.Pa*c,this.d.y+=this.Qa*c,this.d.r(),this.b.Ua(this.d)||
this.b.Oc(this.d)?this.b.nc(this.d,-this.Pa,-this.Qa,c+2,n):(this.d.x=p,this.d.y=u,this.d.r())):p&&0===this.q&&this.b.Ki(this.d,-this.Pa,-this.Qa,p)}if(0!==this.q){p=this.d.x;u=this.d.y;this.d.x+=this.q*a*this.Pa;this.d.y+=this.q*a*this.Qa;b=this.d.x;g=this.d.y;this.d.r();c=this.b.Ua(this.d);f=r;if(!c&&0<this.q&&!y){if((f=0<this.Ad?q:this.b.Oc(this.d,n))&&f.length){if(this.fh){this.d.x=p;this.d.y=u;this.d.r();m=h=0;for(k=f.length;h<k;h++)f[m]=f[h],this.b.eb(this.d,f[h])||m++;f.length=m;this.d.x=b;
this.d.y=g;this.d.r()}1<=f.length&&(c=f[0])}f=!!c}c&&(this.b.ye(this.d,c),b=Math.max(Math.abs(2.5*this.q*a+10),30),this.b.nc(this.d,this.Pa*(0>this.q?1:-1),this.Qa*(0>this.q?1:-1),b,f,c)?(this.Ab=c,this.Fd=c.x,this.Gd=c.y,f&&(t=n)):(this.d.x=p,this.d.y=u,this.d.r(),this.Fe=n),this.q=0)}3!==this.Tb&&(0<this.q&&!y)&&(this.b.trigger(Z.prototype.m.Zl,this.d),this.Tb=3);if(y||t)if(3===this.Tb||t||s&&0===this.q)this.b.trigger(Z.prototype.m.yj,this.d),this.Tb=0===this.n&&0===this.q?0:1;else if(0!==this.Tb&&
(0===this.n&&0===this.q)&&(this.b.trigger(Z.prototype.m.im,this.d),this.Tb=0),1!==this.Tb&&(0!==this.n||0!==this.q)&&!s)this.b.trigger(Z.prototype.m.hm,this.d),this.Tb=1;0<this.Ad&&this.Ad--;this.fh=this.b.Oc(this.d)}};c.prototype.hh=function(){if(0!==this.q)return r;var a=q,b=q,c,g;c=this.d.x;g=this.d.y;this.d.x+=this.Pa;this.d.y+=this.Qa;this.d.r();a=this.b.Ua(this.d);!a&&0===this.Ad&&(b=this.b.Oc(this.d,n));this.d.x=c;this.d.y=g;this.d.r();if(a)return!this.b.eb(this.d,a);if(b&&b.length){g=a=0;
for(c=b.length;a<c;a++)b[g]=b[a],this.b.eb(this.d,b[a])||g++;if(1<=g)return n}return r};c.prototype.$l=F(n);c.prototype.Zl=F(n);c.prototype.im=F(n);c.prototype.hm=F(n);c.prototype.yj=F(n);k.m=new c;m.prototype.Gj=function(a){switch(a){case 0:this.Rg=n;break;case 1:this.Sg=n;break;case 2:this.Hf=n}};k.P=new m;p.prototype.oh=function(a){a.H(Math.sqrt(this.n*this.n+this.q*this.q))};k.S=new p})();function Eb(c){this.b=c}
(function(){var c=Eb.prototype;c.Ma=function(c,k){this.Xa=c;this.Zk=k;this.b=c.b};c.Ma.prototype.Z=A();c.xa=function(c,k){this.type=c;this.Xa=c.Xa;this.d=k;this.b=c.b;this.d.ea.To=n};var m=c.xa.prototype;m.Z=A();m.rc=A();c.P=new (A())})();
function ib(){return[q,q,[[Gb,n,r,r,r,r,r,r,r,r],[W,r,n,n,n,n,n,n,n,r],[Hb,r,n,n,n,n,n,n,n,r],[X,r,n,n,n,n,n,n,n,n],[Y,n,r,r,r,r,r,r,r,r]],[["t0",X,r,[],1,0,["tiledbackground.png",37323,0],q,[["Bullet",Ib,4693923832308516]],r,r,8930946771068628,[]],["t1",X,r,[],2,0,["block.png",738,0],q,[["Solid",Eb,5457582861391336],["Bullet",Ib,0xbc42c0cfc856a]],r,r,906680660422098,[]],["t2",W,r,[],1,0,q,[["Default",11,n,1,0,r,4775474658831821,[["player-sheet0.png",1232,0,0,479,403,1,0.501044,0.501241,[],[-0.398748,
-0.0248137,-0.129437,-0.0248137,-0.129437,0.456575,-0.39666,0.456575],2],["player-sheet1.png",1230,0,0,479,403,1,0.501044,0.501241,[],[-0.398748,-0.0248137,-0.129437,-0.0248137,-0.129437,0.456575,-0.39666,0.456575],2],["player-sheet2.png",1193,0,0,479,403,1,0.501044,0.501241,[],[-0.398748,-0.0248137,-0.129437,-0.0248137,-0.129437,0.456575,-0.39666,0.456575],2],["player-sheet3.png",1237,0,0,479,403,1,0.501044,0.501241,[],[-0.398748,-0.0248137,-0.129437,-0.0248137,-0.129437,0.456575,-0.39666,0.456575],
2],["player-sheet4.png",1118,0,0,479,403,1,0.501044,0.501241,[],[-0.398748,-0.0248137,-0.129437,-0.0248137,-0.129437,0.456575,-0.39666,0.456575],2],["player-sheet5.png",958,0,0,479,403,1,0.501044,0.501241,[],[-0.398748,-0.0248137,-0.129437,-0.0248137,-0.129437,0.456575,-0.39666,0.456575],2],["player-sheet6.png",1011,0,0,479,403,1,0.501044,0.501241,[],[-0.398748,-0.0248137,-0.129437,-0.0248137,-0.129437,0.456575,-0.39666,0.456575],2],["player-sheet7.png",1081,0,0,479,403,1,0.501044,0.501241,[],[-0.398748,
-0.0248137,-0.129437,-0.0248137,-0.129437,0.456575,-0.39666,0.456575],2]]],["Jump",5,r,1,0,r,0xc0f7ede3d3591,[["player-sheet8.png",1237,0,0,479,403,1,0.501044,0.501241,[],[-0.398748,-0.0248137,-0.129437,-0.0248137,-0.129437,0.456575,-0.39666,0.456575],2]]]],[["Platform",Z,0x53b0c6e63f080]],r,r,556048122075544,[]],["t3",Y,r,[],0,0,q,q,[],r,r,5115084107861437,[],[1]],["t4",Gb,r,[],0,0,q,q,[],r,r,9878513380333996,[],[]],["t5",Hb,r,[],0,0,q,q,[],r,r,0xd5cdee4477cbd,[]]],[],[["Layout 1",630,360,r,"Event sheet 1",
6794616835964848,[["Background",0,0xcaffbb6bed00a,n,[255,255,255],r,1,1,1,r,1,0,0,[[[0,0,0,1260,360,0,0,1,0,0,0,0,[]],0,0,[],[[40,0,0,0,0]],[0,0]]],[]],["Game",1,0x8bece24b118a,n,[255,255,255],n,1,1,1,r,1,0,0,[[[209.484,115.031,0,251,184,0,0,1,0.501044,0.501241,0,0,[]],2,1,[],[[300,1E4,1E4,650,1300,1E3,0]],[0,"Default",0,1]],[[30,243,0,993,117,0,0,1,0,0,0,0,[]],1,2,[],[[],[300,0,0,0,0]],[0,0]]],[]],["UI",2,0x9460da2b7c3c3,n,[255,255,255],n,0,0,1,r,1,0,0,[[[4,2,0,200,30,0,0,1,0,0,0,0,[]],5,3,[],[],
["Text",0,"12pt Arial","rgb(0,0,0)",0,0,0,0,0]]],[]]],[],[]]],[["Event sheet 1",[[1,"TotalDistance",0,0,r,r,0xc6a2047b7fc59],[1,"CurrentDistance",0,0,r,r,8894967196902591],[1,"NextBlock",0,600,r,r,0x8564957f0444c],[0,q,r,6379055433905029,[[-1,V.prototype.m.zj,q,1,r,r,r,0xb89b9242b5ad8]],[[0,Ib.prototype.P.mh,"Bullet",297999990606009,[[0,[0,180]]]],[1,Ib.prototype.P.mh,"Bullet",0x43ce513f57809,[[0,[0,180]]]]]],[0,q,r,0xf91090a0a12b,[[0,X.prototype.m.gh,q,0,r,r,r,9227485692609024,[[8,3],[0,[7,[3,[20,
0,X.prototype.S.Pf,r,q]],[0,2]]]]]],[[0,X.prototype.P.nh,q,0xd69bb001b3e3e,[[0,[4,[20,0,X.prototype.S.Qf,r,q],[7,[20,0,X.prototype.S.Pf,r,q],[0,2]]]]]]]],[0,q,r,0x732033a5893a8,[[2,Z.prototype.m.hh,"Platform",0,r,r,r,6996653157087629]],[[2,Z.prototype.P.Gj,"Platform",6810791514581694,[[3,1]]]]],[0,q,n,0x9aad72387c4bb,[[3,Y.prototype.m.lh,q,1,r,r,r,9258178004234048],[4,Gb.prototype.m.wj,q,1,r,r,r,9723474496909368],[4,Gb.prototype.m.xj,q,1,r,r,r,0xcf36f17f8dd32,[[9,38]]]],[[2,Z.prototype.P.Gj,"Platform",
0xaea28bfd7191b,[[3,2]]],[2,W.prototype.P.Fj,q,0x6e1aa3af6e81d,[[1,[2,"Jump"]],[3,1]]]]],[0,q,r,8444897906942181,[[-1,V.prototype.m.Sl,q,0,r,r,r,5785595222579927]],[[-1,V.prototype.P.vj,q,0xee503d858e3c8,[[11,"CurrentDistance"],[7,[6,[22,1,"Bullet",Ib.prototype.S.oh,r,q],[19,V.prototype.S.Bc]]]]],[-1,V.prototype.P.vj,q,4559426249921106,[[11,"TotalDistance"],[7,[6,[22,1,"Bullet",Ib.prototype.S.oh,r,q],[19,V.prototype.S.Bc]]]]],[5,Hb.prototype.P.nm,q,5241967644779557,[[7,[19,V.prototype.S.round,[[23,
"TotalDistance"]]]]]]]],[0,q,r,0xaaa9fb262e53e,[[-1,V.prototype.m.Nl,q,0,r,r,r,4582101216804666,[[11,"CurrentDistance"],[8,5],[7,[23,"NextBlock"]]]]],[[-1,V.prototype.P.qm,q,8378979469074598,[[11,"CurrentDistance"],[7,[23,"NextBlock"]]]],[-1,V.prototype.P.Pl,q,7939285052414964,[[4,1],[5,[2,"Game"]],[0,[0,0]],[0,[0,0]]]],[1,X.prototype.P.mm,q,7464404730712219,[[0,[4,[0,100],[19,V.prototype.S.random,[[0,400]]]]],[0,[4,[0,60],[19,V.prototype.S.random,[[0,180]]]]]]],[1,X.prototype.P.lm,q,7030072070251503,
[[0,[19,V.prototype.S.oo]],[0,[5,[19,V.prototype.S.Nk],[20,1,X.prototype.S.Tl,r,q]]]]],[1,Ib.prototype.P.mh,"Bullet",8665739934699483,[[0,[0,180]]]],[-1,V.prototype.P.om,q,5003465370875365,[[11,"NextBlock"],[7,[4,[4,[20,1,X.prototype.S.Pf,r,q],[0,20]],[19,V.prototype.S.random,[[0,200]]]]]]]]],[0,q,r,5809431068793161,[[1,X.prototype.m.gh,q,0,r,r,r,7790213153584046,[[8,2],[0,[3,[20,1,X.prototype.S.Pf,r,q]]]]]],[[1,X.prototype.P.Ql,q,0x5921ae7427e3b]]],[0,q,r,5327849061455511,[[2,W.prototype.m.Ol,q,
0,r,r,r,0x6ac0ceb94889e,[[8,4],[0,[19,V.prototype.S.Nk]]]]],[[-1,V.prototype.P.jm,q,0xbe730fdb54fbb],[-1,V.prototype.P.km,q,5366716609123096]]],[0,q,r,7827081609317956,[[2,W.prototype.m.gh,q,0,r,r,r,9694319468140896,[[8,2],[0,[0,105]]]],[2,Z.prototype.m.hh,"Platform",0,r,n,r,0xb45eb0f3cac0d]],[[2,W.prototype.P.nh,q,6648980830749892,[[0,[4,[20,2,W.prototype.S.Qf,r,q],[6,[0,5],[19,V.prototype.S.Bc]]]]]]]],[0,q,r,9289753069984672,[[2,Z.prototype.m.yj,"Platform",1,r,r,r,8974665930719129]],[[2,W.prototype.P.nh,
q,5763274001054686,[[0,[4,[20,2,W.prototype.S.Qf,r,q],[0,1]]]]]]],[0,q,r,5058991834027378,[[2,Z.prototype.m.hh,"Platform",0,r,r,r,0xdd144674a636f]],[[2,W.prototype.P.Fj,q,0xfcee914a315da,[[1,[2,"Default"]],[3,1]]]]]]]],"",r,630,360,4,n,n,n,"1.0",2,r,0,r,6,r,[]]};

createCocoonJSRuntime();

})();
